<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ë¬´ì†ì‹¤ ì••ì¶• ì²´í—˜í•˜ê¸° - RLE, í—ˆí”„ë§Œ, ì‚¬ì „ ê¸°ë°˜, LZ</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { 
      font-family: 'Malgun Gothic', sans-serif; 
      background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
      margin: 0;
      padding: 20px;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .fade-in {
      animation: fadeIn 0.5s ease-in-out;
    }
    .pixel-cell {
      width: 30px;
      height: 30px;
      border: 1px solid #ccc;
      cursor: pointer;
      transition: transform 0.1s;
    }
    .pixel-cell:hover {
      transform: scale(1.1);
    }
    .tree-node {
      position: relative;
      display: inline-block;
      padding: 10px 15px;
      border-radius: 50%;
      background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
      color: white;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      min-width: 50px;
      text-align: center;
      }

    .tree-leaf {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }

    .tree-line {
      stroke: #64748b;
      stroke-width: 2;
      fill: none;
    }

    .tree-label {
      font-size: 14px;
      font-weight: bold;
      fill: #1e293b;
    }

  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    const LosslessCompressionEducation = () => {
      const [selectedMethod, setSelectedMethod] = useState('rle');
      const [runlengthInput, setRunlengthInput] = useState('cchaaaammm');
      const [runlengthResult, setRunlengthResult] = useState(null);
      const [huffmanInput, setHuffmanInput] = useState('cchaaaammm');
      const [huffmanResult, setHuffmanResult] = useState(null);
      const [dictionaryInput, setDictionaryInput] = useState('Sorry Sorry Sorry Sorry\në‚´ê°€ ë‚´ê°€ ë‚´ê°€ ë¨¼ì €\në„¤ê²Œ ë„¤ê²Œ ë„¤ê²Œ ë¹ ì ¸');
      const [dictionaryResult, setDictionaryResult] = useState(null);
      const [lzInput, setLzInput] = useState('chamsaechamda');
      const [lzResult, setLzResult] = useState(null);
      const [pixels, setPixels] = useState(Array(66).fill('white'));
      const [currentColor, setCurrentColor] = useState('black');
      const [imageResult, setImageResult] = useState(null);
      const [quizAnswers, setQuizAnswers] = useState({});

      const compressionMethods = {
        rle: {
          icon: 'ğŸ”„',
          name: 'RLE',
          fullName: 'Run-Length Encoding (ëŸ° ë ìŠ¤ ë¶€í˜¸í™”)',
          color: 'cyan',
          description: 'ê°™ì€ ë°ì´í„°ê°€ ì—°ì†ìœ¼ë¡œ ë°˜ë³µë  ë•Œ "ë¬¸ì+ê°œìˆ˜"ë¡œ í‘œí˜„í•˜ëŠ” ì••ì¶• ë°©ë²•ì´ì—ìš”. ì˜ˆë¥¼ ë“¤ì–´ "aaaaaabbbb"ë¼ëŠ” ë¬¸ìì—´ì„ "a6b4"ë¡œ ì¤„ì¼ ìˆ˜ ìˆì–´ìš”. 6ê°œì˜ aì™€ 4ê°œì˜ bë¼ëŠ” ì˜ë¯¸ì£ ! ê°„ë‹¨í•˜ì§€ë§Œ íš¨ê³¼ì ì¸ ì••ì¶• ë°©ë²•ì´ì—ìš”!',
          features: [
            { label: 'ì›ë¦¬', value: 'ë°˜ë³µ íšŸìˆ˜ ê¸°ë¡' },
            { label: 'ë³µì›', value: '100% ê°€ëŠ¥' },
            { label: 'íš¨ìœ¨', value: 'ë°˜ë³µ ë§ì„ìˆ˜ë¡ ì¢‹ìŒ' }
          ],
          examples: [
            'í‘ë°± ì´ë¯¸ì§€ ì••ì¶• (ê°™ì€ ìƒ‰ ì—°ì†)',
            'íŒ©ìŠ¤ ë¬¸ì„œ ì „ì†¡',
            'ë‹¨ìˆœí•œ ê·¸ë¦¼ íŒŒì¼',
            'ê°™ì€ ê°’ì´ ë§ì€ ë°ì´í„°ë² ì´ìŠ¤'
          ]
        },
        huffman: {
          icon: 'ğŸŒ³',
          name: 'í—ˆí”„ë§Œ ì½”ë”©',
          fullName: 'Huffman Coding',
          color: 'blue',
          description: 'í—ˆí”„ë§Œ ì½”ë”©ì€ ìì£¼ ë‚˜ì˜¤ëŠ” ë¬¸ìì— ì§§ì€ ì½”ë“œë¥¼ ì£¼ê³ , ë“œë¬¼ê²Œ ë‚˜ì˜¤ëŠ” ë¬¸ìì— ê¸´ ì½”ë“œë¥¼ ì£¼ëŠ” ë°©ë²•ì´ì—ìš”. ë§ˆì¹˜ ìì£¼ ì“°ëŠ” ë‹¨ì–´ëŠ” ì§§ê²Œ ì¤„ì—¬ ì“°ëŠ” ê²ƒì²˜ëŸ¼ìš”!',
          features: [
            { label: 'ì›ë¦¬', value: 'ë¹ˆë„ ê¸°ë°˜ ì½”ë“œ' },
            { label: 'ë³µì›', value: '100% ê°€ëŠ¥' },
            { label: 'íš¨ìœ¨', value: 'ë¹ˆë„ ì°¨ì´ í´ìˆ˜ë¡ ì¢‹ìŒ' }
          ],
          examples: [
            'ZIP íŒŒì¼ ì••ì¶•',
            'JPEG ì´ë¯¸ì§€ì˜ ì¼ë¶€',
            'í…ìŠ¤íŠ¸ íŒŒì¼ ì••ì¶•',
            'ë°ì´í„° ì „ì†¡ ìµœì í™”'
          ]
        },
        dictionary: {
          icon: 'ğŸ“–',
          name: 'ì‚¬ì „ ê¸°ë°˜',
          fullName: 'Dictionary-based Compression',
          color: 'indigo',
          description: 'ì‚¬ì „ ê¸°ë°˜ ì••ì¶•ì€ ìì£¼ ë‚˜ì˜¤ëŠ” ë‹¨ì–´ë‚˜ íŒ¨í„´ì„ ë¯¸ë¦¬ ì‚¬ì „ì— ë“±ë¡í•˜ê³ , ì§§ì€ ê¸°í˜¸ë¡œ ë°”ê¾¸ëŠ” ë°©ë²•ì´ì—ìš”. ë§ˆì¹˜ "ã…‹ã…‹"ì„ ì›ƒìŒìœ¼ë¡œ ì•½ì†í•˜ëŠ” ê²ƒì²˜ëŸ¼ìš”!',
          features: [
            { label: 'ì›ë¦¬', value: 'íŒ¨í„´ì„ ê¸°í˜¸ë¡œ' },
            { label: 'ë³µì›', value: '100% ê°€ëŠ¥' },
            { label: 'íš¨ìœ¨', value: 'íŒ¨í„´ ë§ì„ìˆ˜ë¡ ì¢‹ìŒ' }
          ],
          examples: [
            'ë¬¸ì„œ íŒŒì¼ ì••ì¶•',
            'ë°˜ë³µë˜ëŠ” ë¬¸êµ¬ê°€ ë§ì€ í…ìŠ¤íŠ¸',
            'í”„ë¡œê·¸ë¨ ì½”ë“œ',
            'HTML ì›¹í˜ì´ì§€'
          ]
        },
        lz: {
          icon: 'ğŸ”',
          name: 'LZ ì••ì¶• (LZ77)',
          fullName: 'Lempel-Ziv Compression',
          color: 'purple',
          description: 'LZ ì••ì¶•ì€ ì´ì „ì— ë‚˜ì˜¨ ë°ì´í„°ë¥¼ ì°¸ì¡°í•˜ëŠ” ë°©ë²•ì´ì—ìš”. "7ì¹¸ ì „ìœ¼ë¡œ ê°€ì„œ 4ê¸€ì ê°€ì ¸ì™€"ì²˜ëŸ¼ ìœ„ì¹˜ì™€ ê¸¸ì´ë¡œ í‘œí˜„í•©ë‹ˆë‹¤. ZIP íŒŒì¼ì´ ì´ ë°©ë²•ì„ ì‚¬ìš©í•´ìš”!',
          features: [
            { label: 'ì›ë¦¬', value: 'ì´ì „ ë°ì´í„° ì°¸ì¡°' },
            { label: 'ë³µì›', value: '100% ê°€ëŠ¥' },
            { label: 'íš¨ìœ¨', value: 'íŒ¨í„´ ë°˜ë³µ ë§ì„ìˆ˜ë¡' }
          ],
          examples: [
            'ZIP, RAR ì••ì¶• íŒŒì¼',
            'PNG ì´ë¯¸ì§€',
            'GIF ì´ë¯¸ì§€',
            'ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ì¹˜ íŒŒì¼'
          ]
        }
      };

      const colorMap = {
        cyan: { bg: 'from-cyan-400 to-cyan-600', text: 'text-cyan-600', border: 'border-cyan-500' },
        blue: { bg: 'from-blue-400 to-blue-600', text: 'text-blue-600', border: 'border-blue-500' },
        indigo: { bg: 'from-indigo-400 to-indigo-600', text: 'text-indigo-600', border: 'border-indigo-500' },
        purple: { bg: 'from-purple-400 to-purple-600', text: 'text-purple-600', border: 'border-purple-500' }
      };

      const quizData = [
        {
          id: 1,
          question: '"AAAAABBB"ë¥¼ "A5B3"ìœ¼ë¡œ ì••ì¶•í•˜ëŠ” ë°©ë²•ì€?',
          options: ['RLE', 'í—ˆí”„ë§Œ ì½”ë”©', 'LZ ì••ì¶•', 'ì‚¬ì „ ê¸°ë°˜'],
          correct: 'RLE'
        },
        {
          id: 2,
          question: 'ìì£¼ ë‚˜ì˜¤ëŠ” ë¬¸ìì— ì§§ì€ ì½”ë“œë¥¼ ì£¼ëŠ” ì••ì¶• ë°©ë²•ì€?',
          options: ['RLE', 'í—ˆí”„ë§Œ ì½”ë”©', 'LZ ì••ì¶•', 'ì‚¬ì „ ê¸°ë°˜'],
          correct: 'í—ˆí”„ë§Œ ì½”ë”©'
        },
        {
          id: 3,
          question: 'ZIP íŒŒì¼ì´ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì••ì¶• ë°©ë²•ì€?',
          options: ['RLEë§Œ', 'í—ˆí”„ë§Œ ì½”ë”©ë§Œ', 'LZ ì••ì¶•', 'ì‚¬ì „ ê¸°ë°˜ë§Œ'],
          correct: 'LZ ì••ì¶•'
        },
        {
          id: 4,
          question: 'ë¬´ì†ì‹¤ ì••ì¶•ì˜ íŠ¹ì§•ìœ¼ë¡œ ì˜³ì€ ê²ƒì€?',
          options: ['ì›ë³¸ì„ 100% ë³µì›í•  ìˆ˜ ìˆë‹¤', 'ì›ë³¸ë³´ë‹¤ í™”ì§ˆì´ ì¢‹ì•„ì§„ë‹¤', 'ìš©ëŸ‰ì´ í•­ìƒ ì ˆë°˜ì´ ëœë‹¤', 'ì†ë„ê°€ ë§¤ìš° ë¹ ë¥´ë‹¤'],
          correct: 'ì›ë³¸ì„ 100% ë³µì›í•  ìˆ˜ ìˆë‹¤'
        }
      ];

      const handleQuizAnswer = (quizId, selected, correct) => {
        setQuizAnswers(prev => ({
          ...prev,
          [quizId]: { selected, correct: selected === correct }
        }));
      };

      const compressRunLength = () => {
        if (!runlengthInput) {
          setRunlengthResult({ error: 'í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!' });
          return;
        }

        let compressed = '';
        let count = 1;
        let current = runlengthInput[0];

        for (let i = 1; i < runlengthInput.length; i++) {
          if (runlengthInput[i] === current) {
            count++;
          } else {
            compressed += current + count;
            current = runlengthInput[i];
            count = 1;
          }
        }
        compressed += current + count;

        const originalBits = runlengthInput.length * 8;
        const compressedBits = compressed.length * 8;
        const ratio = ((1 - compressedBits / originalBits) * 100).toFixed(1);

        let rleMessage = "ì—°ì†ëœ ê°™ì€ ìƒ‰ì´ ë§ì„ìˆ˜ë¡ íš¨ê³¼ê°€ ì¢‹ê³ , ìƒ‰ì´ ìì£¼ ë°”ë€Œë©´ ì˜¤íˆë ¤ ë°ì´í„°ê°€ ë” ì»¤ì§ˆ ìˆ˜ ìˆì–´ìš”.";

        if (parseFloat(ratio) > 0) {
          rleMessage = "ì˜ ì••ì¶•ëì–´ìš”! " + rleMessage;
        } else if (parseFloat(ratio) < 0) {
          rleMessage = "ìƒ‰ìƒì´ ìì£¼ ë°”ë€Œì–´ì„œ ì˜¤íˆë ¤ ì»¤ì¡Œë„¤ìš”. " + rleMessage;
        } else {
          rleMessage = "ì••ì¶• íš¨ê³¼ê°€ ê±°ì˜ ì—†ì–´ìš”. " + rleMessage;
        }

        setRunlengthResult({ compressed, originalBits, compressedBits, ratio });
      };

      // í—ˆí”„ë§Œ íŠ¸ë¦¬ ì‹œê°í™” ì»´í¬ë„ŒíŠ¸
      const HuffmanTreeVisualization = ({ tree }) => {
      if (!tree) return null;

  const calculateTreeLayout = (node, x = 400, y = 50, level = 0, xOffset = 200) => {
    if (!node) return [];

    const positions = [];
    const nodeSize = 50;
    
    positions.push({
      x,
      y,
      char: node.char,
      count: node.count,
      isLeaf: node.char !== null
    });

    if (node.left) {
      const leftX = x - xOffset / (level + 1);
      const leftY = y + 80;
      positions.push({
        type: 'line',
        x1: x,
        y1: y + nodeSize / 2,
        x2: leftX,
        y2: leftY - nodeSize / 2,
        label: '0'
      });
      positions.push(...calculateTreeLayout(node.left, leftX, leftY, level + 1, xOffset));
    }

    if (node.right) {
      const rightX = x + xOffset / (level + 1);
      const rightY = y + 80;
      positions.push({
        type: 'line',
        x1: x,
        y1: y + nodeSize / 2,
        x2: rightX,
        y2: rightY - nodeSize / 2,
        label: '1'
      });
      positions.push(...calculateTreeLayout(node.right, rightX, rightY, level + 1, xOffset));
    }

    return positions;
  };

  const elements = calculateTreeLayout(tree);
  const lines = elements.filter(e => e.type === 'line');
  const nodes = elements.filter(e => !e.type);

  return (
    <div className="bg-white p-6 rounded-lg shadow-lg overflow-x-auto">
      <h4 className="font-bold text-blue-800 mb-4 text-center">ğŸŒ³ í—ˆí”„ë§Œ íŠ¸ë¦¬ êµ¬ì¡°</h4>
      <svg width="800" height="400" className="mx-auto">
        {lines.map((line, idx) => (
          <g key={`line-${idx}`}>
            <line
              x1={line.x1}
              y1={line.y1}
              x2={line.x2}
              y2={line.y2}
              className="tree-line"
            />
            <text
              x={(line.x1 + line.x2) / 2}
              y={(line.y1 + line.y2) / 2 - 5}
              className="tree-label"
              textAnchor="middle"
            >
              {line.label}
            </text>
          </g>
        ))}

        {nodes.map((node, idx) => (
          <g key={`node-${idx}`}>
            <circle
              cx={node.x}
              cy={node.y}
              r="25"
              fill={node.isLeaf ? '#10b981' : '#3b82f6'}
              stroke="#1e293b"
              strokeWidth="2"
            />
            <text
              x={node.x}
              y={node.y + 5}
              textAnchor="middle"
              fill="white"
              fontWeight="bold"
              fontSize="14"
            >
              {node.char || node.count}
            </text>
            {node.isLeaf && (
              <text
                x={node.x}
                y={node.y + 45}
                textAnchor="middle"
                fill="#1e293b"
                fontSize="12"
              >
                ë¹ˆë„: {node.count}
              </text>
            )}
          </g>
        ))}
      </svg>
      <div className="mt-4 text-sm text-gray-600 text-center">
        <p>ğŸ’¡ <span className="font-bold text-green-600">ì´ˆë¡ìƒ‰ ì›</span>ì€ ì‹¤ì œ ë¬¸ì(ë¦¬í”„ ë…¸ë“œ), <span className="font-bold text-blue-600">íŒŒë€ìƒ‰ ì›</span>ì€ ë¹ˆë„ìˆ˜ í•©(ë‚´ë¶€ ë…¸ë“œ)</p>
        <p>ğŸ’¡ ì™¼ìª½ ê°€ì§€ëŠ” <span className="font-bold">0</span>, ì˜¤ë¥¸ìª½ ê°€ì§€ëŠ” <span className="font-bold">1</span>ì„ ì˜ë¯¸í•´ìš”</p>
      </div>
    </div>
  );
};

      const compressHuffman = () => {
        if (!huffmanInput) {
          setHuffmanResult({ error: 'í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!' });
          return;
        }

        // 1ë‹¨ê³„: ë¹ˆë„ìˆ˜ ê³„ì‚°
        const freq = {};
        for (let char of huffmanInput) {
          freq[char] = (freq[char] || 0) + 1;
        }

        // 2ë‹¨ê³„: ë…¸ë“œ ìƒì„± (ë¹ˆë„ìˆ˜ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬)
        let nodes = Object.entries(freq).map(([char, count]) => ({
          char: char,
          count: count,
          left: null,
          right: null
        }));
        nodes.sort((a, b) => a.count - b.count);

        // 3ë‹¨ê³„: í—ˆí”„ë§Œ íŠ¸ë¦¬ êµ¬ì„±
        while (nodes.length > 1) {
          // ê°€ì¥ ì‘ì€ ë¹ˆë„ìˆ˜ 2ê°œ êº¼ë‚´ê¸°
          const left = nodes.shift();
          const right = nodes.shift();
          
          // ìƒˆ ë¶€ëª¨ ë…¸ë“œ ìƒì„±
          const parent = {
            char: null,
            count: left.count + right.count,
            left: left,
            right: right
          };
          
          // ë¶€ëª¨ ë…¸ë“œë¥¼ ë‹¤ì‹œ ì‚½ì… (ì •ë ¬ëœ ìœ„ì¹˜ì—)
          let inserted = false;
          for (let i = 0; i < nodes.length; i++) {
            if (parent.count <= nodes[i].count) {
              nodes.splice(i, 0, parent);
              inserted = true;
              break;
            }
          }
          if (!inserted) nodes.push(parent);
        }
        
        const tree = nodes[0];  // íŠ¸ë¦¬ ì €ì¥

        // 4ë‹¨ê³„: íŠ¸ë¦¬ì—ì„œ ì½”ë“œ ì¶”ì¶œ
        const codes = {};
        const generateCodes = (node, code = '') => {
          if (node.char !== null) {
            // ë¦¬í”„ ë…¸ë“œ (ë¬¸ì)
            codes[node.char] = code || '0';
          } else {
            // ë‚´ë¶€ ë…¸ë“œ
            if (node.left) generateCodes(node.left, code + '0');
            if (node.right) generateCodes(node.right, code + '1');
          }
        };
        
        if (tree) {
          generateCodes(tree);
        }
        /* if (nodes.length > 0) {
          generateCodes(nodes[0]);
        } */

        // 5ë‹¨ê³„: ì••ì¶•
        let compressed = '';
        for (let char of huffmanInput) {
          compressed += codes[char];
        }

        const originalBits = huffmanInput.length * 8;
        const compressedBits = compressed.length;
        const ratio = ((1 - compressedBits / originalBits) * 100).toFixed(1);

        // ë¹ˆë„ìˆœ ì •ë ¬ (ê²°ê³¼ í‘œì‹œìš©)
        const sorted = Object.entries(freq).sort((a, b) => b[1] - a[1]);

        setHuffmanResult({ compressed, codes, sorted, originalBits, compressedBits, ratio, tree: tree, freq: freq });
      };

       const compressDictionary = () => {
        if (!dictionaryInput) {
          setDictionaryResult({ error: 'í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!' });
          return;
        }

        // êµ¬ë‘ì ê³¼ ê³µë°±ì„ ê¸°ì¤€ìœ¼ë¡œ ë‹¨ì–´ ë¶„ë¦¬
        const words = dictionaryInput.split(/[\s,.\?!;:]+/).filter(word => word.length > 0);
        const wordCount = {};
        words.forEach(word => {
          wordCount[word] = (wordCount[word] || 0) + 1;
        });

        // 2ë²ˆ ì´ìƒ ë‚˜ì˜¨ ë‹¨ì–´ë¥¼ ì‚¬ì „ì— ë“±ë¡
        const dictionary = {};
        const symbols = ['â‘ ', 'â‘¡', 'â‘¢', 'â‘£', 'â‘¤', 'â‘¥', 'â‘¦', 'â‘§', 'â‘¨', 'â‘©'];
        let symbolIndex = 0;
        Object.keys(wordCount).forEach(word => {
          if (wordCount[word] >= 2 && symbolIndex < symbols.length) {
            dictionary[word] = symbols[symbolIndex];
            symbolIndex++;
          }
        });

        // ì••ì¶• ì‹¤í–‰ (ê¸´ ë‹¨ì–´ë¶€í„° ì¹˜í™˜)
        let compressed = dictionaryInput;
        const sortedEntries = Object.entries(dictionary).sort((a, b) => b[0].length - a[0].length);
        sortedEntries.forEach(([word, symbol]) => {
          compressed = compressed.replaceAll(word, symbol);
        });

        const ratio = Math.round((1 - compressed.length / dictionaryInput.length) * 100);

        setDictionaryResult({
          original: dictionaryInput,
          compressed: compressed,
          dictionary: dictionary,
          ratio: ratio > 0 ? ratio : 0
        });
      };

      const compressLZ = () => {
        if (!lzInput) {
          setLzResult({ error: 'í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!' });
          return;
        }

        const MIN_MATCH_LENGTH = 3; // ìµœì†Œ ë§¤ì¹­ ê¸¸ì´
        const WINDOW_SIZE = 100; // ê²€ìƒ‰ ìœˆë„ìš° í¬ê¸°
        
        let compressed = '';
        let i = 0;
        const steps = []; // ì••ì¶• ê³¼ì • ì‹œê°í™”ìš©

        while (i < lzInput.length) {
          let bestMatch = { distance: 0, length: 0, position: i };
          
          // í˜„ì¬ ìœ„ì¹˜ ì´ì „ì˜ ë°ì´í„°ì—ì„œ ë§¤ì¹­ ì°¾ê¸°
          const searchStart = Math.max(0, i - WINDOW_SIZE);
          
          for (let j = searchStart; j < i; j++) {
            let matchLength = 0;
            
            // í˜„ì¬ ìœ„ì¹˜(i)ë¶€í„° ì‹œì‘í•´ì„œ j ìœ„ì¹˜ì™€ ì–¼ë§ˆë‚˜ ë§¤ì¹­ë˜ëŠ”ì§€ í™•ì¸
            while (
              i + matchLength < lzInput.length &&
              lzInput[j + matchLength] === lzInput[i + matchLength]
            ) {
              matchLength++;
            }
            
            // ë” ê¸´ ë§¤ì¹­ì„ ì°¾ìœ¼ë©´ ì—…ë°ì´íŠ¸
            if (matchLength > bestMatch.length) {
              bestMatch = {
                distance: i - j,
                length: matchLength,
                position: j
              };
            }
          }
          
          // ìµœì†Œ ê¸¸ì´ ì´ìƒ ë§¤ì¹­ë˜ë©´ ì••ì¶•, ì•„ë‹ˆë©´ ê·¸ëŒ€ë¡œ ì¶œë ¥
          if (bestMatch.length >= MIN_MATCH_LENGTH) {
            compressed += `(${bestMatch.distance},${bestMatch.length})`;
            steps.push({
              type: 'match',
              original: lzInput.substring(i, i + bestMatch.length),
              compressed: `(${bestMatch.distance},${bestMatch.length})`,
              position: i
            });
            i += bestMatch.length;
          } else {
            compressed += lzInput[i];
            steps.push({
              type: 'literal',
              char: lzInput[i],
              position: i
            });
            i++;
          }
        }

        const originalBytes = lzInput.length;

        // ì••ì¶• í¬ê¸° ê³„ì‚°: ì¼ë°˜ ë¬¸ìëŠ” 1ë°”ì´íŠ¸, (ê±°ë¦¬,ê¸¸ì´)ëŠ” 2ë°”ì´íŠ¸
        let compressedBytes = 0;
        for (let idx = 0; idx < compressed.length; idx++) {
          if (compressed[idx] === '(') {
            // (ê±°ë¦¬,ê¸¸ì´) í˜•íƒœë¥¼ ì°¾ì•„ì„œ 2ë°”ì´íŠ¸ë¡œ ê³„ì‚°
            const closeIdx = compressed.indexOf(')', idx);
            compressedBytes += 2;  // (ê±°ë¦¬,ê¸¸ì´) = 2ë°”ì´íŠ¸
            idx = closeIdx;  // ) ë‹¤ìŒìœ¼ë¡œ ì´ë™
          } else {
            compressedBytes += 1;  // ì¼ë°˜ ë¬¸ì = 1ë°”ì´íŠ¸
          }
        }

        const ratio = ((1 - compressedBytes / originalBytes) * 100).toFixed(1);

        setLzResult({ 
          compressed, 
          originalBytes,
          compressedBytes,
          ratio,
          steps 
        });
      };

      const paintPixel = (index) => {
        const newPixels = [...pixels];
        newPixels[index] = currentColor;
        setPixels(newPixels);
      };

      const compressImage = () => {
        const COLS = 11;
        const ROWS = 6;
        let compressedRows = [];
        let totalCompressed = 0;

        // ê° í–‰ë³„ë¡œ RLE ì••ì¶• (í°ìƒ‰ë¶€í„° ì‹œì‘, ë²ˆê°ˆì•„ í‘œì‹œ)
        for (let row = 0; row < ROWS; row++) {
          let rowData = [];
          let isWhite = true; // í•­ìƒ í°ìƒ‰ë¶€í„° ì‹œì‘
          let count = 0;

          for (let col = 0; col < COLS; col++) {
            const idx = row * COLS + col;
            const currentIsWhite = pixels[idx] === 'white';

            if (currentIsWhite === isWhite) {
              count++;
            } else {
              // í˜„ì¬ ìƒ‰ìƒì˜ ê°œìˆ˜ ê¸°ë¡
              rowData.push(count);
              totalCompressed++;
              // ë‹¤ìŒ ìƒ‰ìƒìœ¼ë¡œ ì „í™˜
              isWhite = !isWhite;
              count = 1;
            }
          }
          // ë§ˆì§€ë§‰ ìƒ‰ìƒ ê°œìˆ˜ ê¸°ë¡
          rowData.push(count);
          totalCompressed++;
          
          compressedRows.push(rowData.join(', '));
        }

        const originalBits = pixels.length * 1; // í‘ë°±: 1ë¹„íŠ¸/í”½ì…€
        const compressedBits = totalCompressed * 3; // 0~5 í‘œí˜„ì— 3ë¹„íŠ¸ í•„ìš”
        const ratio = ((1 - compressedBits / originalBits) * 100).toFixed(1);

        let rleMessage = "ì—°ì†ëœ ê°™ì€ ìƒ‰ì´ ë§ì„ìˆ˜ë¡ íš¨ê³¼ê°€ ì¢‹ê³ , ìƒ‰ì´ ìì£¼ ë°”ë€Œë©´ ì˜¤íˆë ¤ ë°ì´í„°ê°€ ë” ì»¤ì§ˆ ìˆ˜ ìˆì–´ìš”.";

        if (parseFloat(ratio) > 0) {
          rleMessage = "ì˜ ì••ì¶•ëì–´ìš”! " + rleMessage;
        } else if (parseFloat(ratio) < 0) {
          rleMessage = "ìƒ‰ìƒì´ ìì£¼ ë°”ë€Œì–´ì„œ ì˜¤íˆë ¤ ì»¤ì¡Œë„¤ìš”. " + rleMessage;
        } else {
          rleMessage = "ì••ì¶• íš¨ê³¼ê°€ ê±°ì˜ ì—†ì–´ìš”. " + rleMessage;
        }

        setImageResult({ 
          compressedRows, 
          originalBits, 
          compressedBits, 
          ratio, 
          message: rleMessage  // ìƒˆë¡œ ì¶”ê°€!
        });
      };

      const currentMethod = compressionMethods[selectedMethod];

      return (
        <div className="min-h-screen p-6">
          <div className="max-w-7xl mx-auto">
            {/* í—¤ë” */}
            <div className="bg-gradient-to-r from-cyan-600 to-blue-600 p-6 text-white rounded-2xl shadow-xl mb-6">
              <div className="text-sm mb-2 text-cyan-100">ë¶€ì‚°ì§„ì—¬ììƒì—…ê³ ë“±í•™êµ ì •ë³´ í•™ìŠµìë£Œ</div>
              <h1 className="text-3xl font-bold mb-2">ğŸ—œï¸ ë¬´ì†ì‹¤ ì••ì¶• ì²´í—˜í•˜ê¸°</h1>
              <p className="text-cyan-100">ë°ì´í„°ë¥¼ ì¤„ì—¬ë„ ì›ë˜ëŒ€ë¡œ ë³µêµ¬í•  ìˆ˜ ìˆëŠ” ë§ˆë²• ê°™ì€ ê¸°ìˆ !</p>
            </div>
            {/* ë¬´ì†ì‹¤ ì••ì¶• ì†Œê°œ */}
            <div className="bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-2xl shadow-xl p-6 mb-6">
              <h2 className="text-2xl font-bold mb-3">ğŸ’¡ ë¬´ì†ì‹¤ ì••ì¶•ì´ë€?</h2>
              <p className="leading-relaxed text-lg">
                ì›ë³¸ ë°ì´í„°ë¥¼ ë” ì‘ì€ ìš©ëŸ‰ìœ¼ë¡œ ë§Œë“¤ë˜, <span className="font-bold text-yellow-300">ì••ì¶•ì„ í’€ë©´ ì›ë³¸ê³¼ ë˜‘ê°™ì´ ë³µì›</span>ë˜ëŠ” ì••ì¶• ë°©ë²•ì…ë‹ˆë‹¤.
              </p>
              <div className="mt-4 grid md:grid-cols-3 gap-4">
                <div className="bg-white bg-opacity-90 rounded-lg p-4 shadow-md">
                  <div className="text-3xl mb-2">ğŸ“¦</div>
                  <div className="font-bold mb-1 text-gray-800">ìš©ë„</div>
                  <div className="text-sm text-gray-700">ë¬¸ì„œ, í”„ë¡œê·¸ë¨, ë°ì´í„°ë² ì´ìŠ¤</div>
                </div>
                <div className="bg-white bg-opacity-90 rounded-lg p-4 shadow-md">
                  <div className="text-3xl mb-2">âœ¨</div>
                  <div className="font-bold mb-1 text-gray-800">íŠ¹ì§•</div>
                  <div className="text-sm text-gray-700">ì™„ë²½í•œ ë³µì› ê°€ëŠ¥</div>
                </div>
                <div className="bg-white bg-opacity-90 rounded-lg p-4 shadow-md">
                  <div className="text-3xl mb-2">ğŸ¯</div>
                  <div className="font-bold mb-1 text-gray-800">ì˜ˆì‹œ</div>
                  <div className="text-sm text-gray-700">ZIP, PNG, FLAC</div>
                </div>
              </div>
            </div>

            {/* ì••ì¶• ë°©ë²• ì„ íƒ ë²„íŠ¼ */}
            <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
              <h2 className="text-2xl font-bold text-gray-800 mb-4 text-center">ğŸ¨ ì••ì¶• ë°©ë²• ì„ íƒí•˜ê¸°</h2>
              <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                {Object.entries(compressionMethods).map(([key, method]) => (
                  <button
                    key={key}
                    onClick={() => setSelectedMethod(key)}
                    className={`p-4 rounded-xl font-bold transition-all ${
                      selectedMethod === key
                        ? `bg-gradient-to-br ${colorMap[method.color].bg} text-white shadow-lg transform scale-105`
                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                    }`}
                  >
                    <div className="text-3xl mb-2">{method.icon}</div>
                    <div>{method.name}</div>
                  </button>
                ))}
              </div>
            </div>

            {/* ì„ íƒëœ ì••ì¶• ë°©ë²• ìƒì„¸ ì •ë³´ */}
            <div className="bg-white rounded-2xl shadow-xl p-6 mb-6 fade-in">
              <div className="flex items-center gap-4 mb-6">
                <div className="text-6xl">{currentMethod.icon}</div>
                <div>
                  <h2 className={`text-3xl font-bold ${colorMap[currentMethod.color].text}`}>
                    {currentMethod.name}
                  </h2>
                  <p className="text-gray-600 text-lg">{currentMethod.fullName}</p>
                </div>
              </div>

              <div className="space-y-6">
                {/* ì„¤ëª… */}
                <div className="bg-gradient-to-r from-gray-50 to-gray-100 p-6 rounded-xl">
                  
                  <p className="text-gray-700 leading-relaxed">{currentMethod.description}</p>
                </div>

                {/* íŠ¹ì§• ì •ë³´ */}
                <div className="grid grid-cols-3 gap-4">
                  {currentMethod.features.map((feature, idx) => (
                    <div key={idx} className="bg-white p-4 rounded-lg text-center shadow-sm border-2 border-gray-100">
                      <div className={`text-2xl font-bold ${colorMap[currentMethod.color].text} mb-1`}>
                        {feature.value}
                      </div>
                      <div className="text-sm text-gray-600">{feature.label}</div>
                    </div>
                  ))}
                </div>
              </div>

              {/* ì‹¤ìƒí™œ ì˜ˆì‹œ */}
              <div className="bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-xl border border-orange-200 mt-6">
                <h3 className="text-xl font-bold text-orange-900 mb-4">ğŸ’¡ ì‹¤ìƒí™œ ì˜ˆì‹œ</h3>
                <div className="space-y-3">
                  {currentMethod.examples.map((example, idx) => (
                    <div key={idx} className="flex items-start gap-3">
                      <div className={`w-8 h-8 bg-gradient-to-br ${colorMap[currentMethod.color].bg} text-white rounded-full flex items-center justify-center font-bold flex-shrink-0`}>
                        {idx + 1}
                      </div>
                      <div className="flex-1 bg-white p-3 rounded-lg shadow-sm">
                        <p className="text-gray-700">{example}</p>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>

            {/* ì²´í—˜í•˜ê¸° ì„¹ì…˜ */}
            {selectedMethod === 'rle' && (
              <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
                <h3 className="text-2xl font-bold text-cyan-600 mb-4">ğŸ® RLE ì••ì¶• ì²´í—˜í•˜ê¸°</h3>
                
                {/* í…ìŠ¤íŠ¸ ì••ì¶• */}
                <div className="mb-6">
                  <h4 className="font-bold text-lg mb-3">1ï¸âƒ£ í…ìŠ¤íŠ¸ ì••ì¶•í•´ë³´ê¸°</h4>
                  <input
                    type="text"
                    value={runlengthInput}
                    onChange={(e) => setRunlengthInput(e.target.value)}
                    className="w-full p-3 border-2 border-gray-300 rounded-lg mb-3 font-mono text-lg"
                    placeholder="ê°™ì€ ë¬¸ìê°€ ë°˜ë³µë˜ëŠ” í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                  />
                  <button
                    onClick={compressRunLength}
                    className="bg-gradient-to-r from-cyan-500 to-cyan-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transition-all"
                  >
                    ì••ì¶•í•˜ê¸°!
                  </button>
                  
                  {runlengthResult && !runlengthResult.error && (
                    <div className="mt-4 bg-green-50 border-l-4 border-green-500 p-4 rounded">
                      <h4 className="font-bold text-green-800 mb-2">ì••ì¶• ê²°ê³¼:</h4>
                      <p><strong>ì›ë³¸:</strong> {runlengthInput} ({runlengthInput.length}ê¸€ì Ã— 8ë¹„íŠ¸ = {runlengthResult.originalBits}ë¹„íŠ¸)</p>
                      <p><strong>ì••ì¶•:</strong> {runlengthResult.compressed} ({runlengthResult.compressed.length}ê¸€ì Ã— 8ë¹„íŠ¸ = {runlengthResult.compressedBits}ë¹„íŠ¸)</p>
                      <p className={`text-2xl font-bold mt-2 ${parseFloat(runlengthResult.ratio) >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                        ì••ì¶•ë¥ : {runlengthResult.ratio}% {parseFloat(runlengthResult.ratio) >= 0 ? 'ì ˆì•½!' : 'ì¦ê°€'} ğŸ‰
                      </p>
                      <p className="mt-2 text-sm">ğŸ’¡ ê°™ì€ ë¬¸ìê°€ ì—°ì†ë  ë•Œ <strong>ë¬¸ì+ê°œìˆ˜</strong>ë¡œ í‘œí˜„í–ˆì–´ìš”.</p>
                    </div>
                  )}
                </div>

                {/* ì´ë¯¸ì§€ ì••ì¶• */}
                <div>
                  <h4 className="font-bold text-lg mb-3">2ï¸âƒ£ ì´ë¯¸ì§€ ì••ì¶•í•´ë³´ê¸° (í”½ì…€ í´ë¦­ìœ¼ë¡œ ê·¸ë¦¼ ê·¸ë¦¬ê¸°)</h4>
                  <div className="mb-3 flex gap-2">
                    <button
                      onClick={() => setCurrentColor('black')}
                      className={`px-4 py-2 rounded ${currentColor === 'black' ? 'bg-black text-white' : 'bg-gray-300'}`}
                    >
                      ê²€ì€ìƒ‰
                    </button>
                    <button
                      onClick={() => setCurrentColor('white')}
                      className={`px-4 py-2 rounded border-2 ${currentColor === 'white' ? 'bg-white border-black' : 'bg-gray-300'}`}
                    >
                      í°ìƒ‰
                    </button>
                  </div>
                  
                  <div className="flex gap-6 items-start">
                    {/* ì™¼ìª½: í”½ì…€ ê·¸ë¦¬ë“œ */}
                    <div className="flex flex-col gap-1">
                      {[0, 1, 2, 3, 4, 5].map(row => (
                        <div key={`row-${row}`} className="flex gap-1">
                          {[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(col => {
                            const idx = row * 11 + col;
                            return (
                              <div
                                key={idx}
                                className="pixel-cell"
                                style={{ 
                                  backgroundColor: pixels[idx],
                                  width: '50px',
                                  height: '50px',
                                  border: '2px solid #666'
                                }}
                                onClick={() => paintPixel(idx)}
                              />
                            );
                          })}
                        </div>
                      ))}
                    </div>

                    {/* ì˜¤ë¥¸ìª½: ì••ì¶• ê²°ê³¼ */}
                    {imageResult && (
                      <div className="bg-gray-100 p-4 rounded-lg flex-1 -mt-12">
                        <h5 className="font-bold text-gray-800 mb-3">í–‰ë³„ RLE ì••ì¶• ê²°ê³¼:</h5>
                        <div className="font-mono text-lg space-y-2">
                          {imageResult.compressedRows.map((row, idx) => (
                            <div key={idx} className="bg-white p-2 rounded border border-gray-300">
                              <span className="text-cyan-600 font-bold">{idx + 1}í–‰:</span> {row}
                            </div>
                          ))}
                        </div>
                        <div className="mt-4 pt-4 border-t-2 border-gray-300">
                          <p className="text-sm"><strong>ì›ë³¸:</strong> {pixels.length}í”½ì…€ Ã— 1ë¹„íŠ¸ = {imageResult.originalBits}ë¹„íŠ¸</p>
                          <p className="text-sm"><strong>ì••ì¶•:</strong> {imageResult.compressedBits}ë¹„íŠ¸ (ê° ìˆ«ì 3ë¹„íŠ¸)</p>
                          <p className={`text-xl font-bold mt-3 ${parseFloat(imageResult.ratio) >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                            ì••ì¶•ë¥ : {imageResult.ratio}% {parseFloat(imageResult.ratio) >= 0 ? 'ì ˆì•½!' : 'ì¦ê°€'} ğŸ‰
                          </p>
                          <p className="mt-3 text-sm text-gray-700 bg-yellow-50 p-3 rounded-lg border border-yellow-200">
                            ğŸ’¡ {imageResult.message}
                          </p>
                        </div>
                      </div>
                    )}
                  </div>
                  
                  <div className="mt-4">
                    <button
                      onClick={compressImage}
                      className="bg-gradient-to-r from-cyan-500 to-cyan-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transition-all mr-2"
                    >
                      ì´ë¯¸ì§€ ì••ì¶•í•˜ê¸°!
                    </button>
                    <button
                      onClick={() => {
                        setPixels(Array(66).fill('white'));
                        setImageResult(null);
                      }}
                      className="bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-bold hover:bg-gray-400 transition-all"
                    >
                      ì´ˆê¸°í™”
                    </button>
                  </div>

                  <div className="mt-4 bg-cyan-50 p-4 rounded-lg">
                    <p className="text-sm text-gray-700">
                      ğŸ’¡ <strong>RLE ì••ì¶• ê·œì¹™:</strong><br/>
                      â€¢ í•­ìƒ <strong>í°ìƒ‰ë¶€í„° ì‹œì‘</strong>í•˜ì—¬ í°ìƒ‰ê³¼ ê²€ì€ìƒ‰ì´ ë²ˆê°ˆì•„ ë‚˜íƒ€ë‚œë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.<br/>
                      â€¢ ê° ìˆ«ìëŠ” í•´ë‹¹ ìƒ‰ìƒì˜ ì—°ì† ê°œìˆ˜ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.<br/>
                      â€¢ ì˜ˆ: "0, 3, 1, 1" = í°ìƒ‰ 0ê°œ, ê²€ì€ìƒ‰ 3ê°œ, í°ìƒ‰ 1ê°œ, ê²€ì€ìƒ‰ 1ê°œ<br/>
                      â€¢ ì˜ˆ: "5" = í°ìƒ‰ 5ê°œ (ê²€ì€ìƒ‰ ì—†ìŒ)
                    </p>
                  </div>
                </div>
              </div>
            )}

            {selectedMethod === 'huffman' && (
              <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
                <h3 className="text-2xl font-bold text-blue-600 mb-4">ğŸ® í—ˆí”„ë§Œ ì½”ë”© ì²´í—˜í•˜ê¸°</h3>
                {/* ì—¬ê¸°ë¶€í„° ì¶”ê°€ */}
                <div className="bg-gradient-to-r from-blue-50 to-cyan-50 p-5 rounded-xl mb-4 border border-blue-200">
                  <h4 className="font-bold text-blue-800 mb-3 flex items-center gap-2">
                    <span className="text-2xl">ğŸŒ²</span>
                    í—ˆí”„ë§Œ íŠ¸ë¦¬ ë§Œë“¤ê¸° ê³¼ì •
                  </h4>
                  <div className="space-y-2 text-gray-700">
                    <div className="flex items-start gap-2">
                      <span className="font-bold text-blue-600 min-w-[24px]">1.</span>
                      <span>ê° ë¬¸ìì˜ <strong className="text-blue-600">ë¹ˆë„ìˆ˜</strong>ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.</span>
                    </div>
                    <div className="flex items-start gap-2">
                      <span className="font-bold text-blue-600 min-w-[24px]">2.</span>
                      <span>ë¹ˆë„ìˆ˜ê°€ <strong className="text-blue-600">ë‚®ì€ ìˆœì„œ</strong>ëŒ€ë¡œ ì •ë ¬í•©ë‹ˆë‹¤.</span>
                    </div>
                    <div className="flex items-start gap-2">
                      <span className="font-bold text-blue-600 min-w-[24px]">3.</span>
                      <span>ê°€ì¥ ë‚®ì€ <strong className="text-blue-600">2ê°œë¥¼ í•©ì³</strong> ë…¸ë“œ(ì •ì )ë¥¼ ë§Œë“­ë‹ˆë‹¤.</span>
                    </div>
                    <div className="flex items-start gap-2">
                      <span className="font-bold text-blue-600 min-w-[24px]">4.</span>
                      <span><strong className="text-blue-600">íŠ¸ë¦¬ê°€ ì™„ì„±</strong>ë  ë•Œê¹Œì§€ ë°˜ë³µí•©ë‹ˆë‹¤.</span>
                    </div>
                    <div className="flex items-start gap-2">
                      <span className="font-bold text-blue-600 min-w-[24px]">5.</span>
                      <span>ì™¼ìª½ì€ <strong className="text-blue-600">0</strong>, ì˜¤ë¥¸ìª½ì€ <strong className="text-blue-600">1</strong>ì„ ë¶€ì—¬í•©ë‹ˆë‹¤.</span>
                    </div>
                  </div>
                </div>
                
                <input
                  type="text"
                  value={huffmanInput}
                  onChange={(e) => setHuffmanInput(e.target.value)}
                  className="w-full p-3 border-2 border-gray-300 rounded-lg mb-3 font-mono text-lg"
                  placeholder="í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: AAABBC)"
                />
                <button
                  onClick={compressHuffman}
                  className="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transition-all"
                >
                  í—ˆí”„ë§Œ ì••ì¶•í•˜ê¸°!
                </button>

                {huffmanResult && !huffmanResult.error && (
                  <div className="mt-4 space-y-6">
                    {/* 1ë‹¨ê³„: ë¹ˆë„ìˆ˜ í‘œ */}
                    <div className="bg-blue-50 border-l-4 border-blue-500 p-4 rounded">
                      <h4 className="font-bold text-blue-800 mb-3">ğŸ“Š 1ë‹¨ê³„: ê° ë¬¸ìì˜ ë¹ˆë„ìˆ˜ ì„¸ê¸°</h4>
                      <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                        {huffmanResult.sorted.map(([char, count]) => (
                          <div key={char} className="bg-white p-3 rounded-lg shadow text-center">
                            <div className="text-2xl font-bold text-blue-600 mb-1">'{char}'</div>
                            <div className="text-sm text-gray-600">ë¹ˆë„: {count}ë²ˆ</div>
                          </div>
                        ))}
                      </div>
                      <p className="mt-3 text-sm text-gray-700">ğŸ’¡ ë¬¸ìê°€ ì–¼ë§ˆë‚˜ ìì£¼ ë‚˜íƒ€ë‚˜ëŠ”ì§€ ì„¸ì—ˆì–´ìš”!</p>
                    </div>

                    {/* 2ë‹¨ê³„: í—ˆí”„ë§Œ íŠ¸ë¦¬ */}
                    <div className="bg-blue-50 border-l-4 border-blue-500 p-4 rounded">
                      <h4 className="font-bold text-blue-800 mb-3">ğŸŒ³ 2ë‹¨ê³„: í—ˆí”„ë§Œ íŠ¸ë¦¬ ë§Œë“¤ê¸°</h4>
                      <HuffmanTreeVisualization tree={huffmanResult.tree} />
                    </div>

                    {/* 3ë‹¨ê³„: í—ˆí”„ë§Œ ì½”ë“œ */}
                    <div className="bg-blue-50 border-l-4 border-blue-500 p-4 rounded">
                      <h4 className="font-bold text-blue-800 mb-3">ğŸ”¢ 3ë‹¨ê³„: ê° ë¬¸ìì˜ í—ˆí”„ë§Œ ì½”ë“œ</h4>
                      <div className="overflow-x-auto mb-4">
                        <table className="w-full border-collapse">
                          <thead>
                            <tr className="bg-blue-600 text-white">
                              <th className="p-3 border">ë¬¸ì</th>
                              <th className="p-3 border">ë¹ˆë„</th>
                              <th className="p-3 border">ì½”ë“œ</th>
                            </tr>
                          </thead>
                          <tbody>
                            {huffmanResult.sorted.map(([char, count], idx) => (
                              <tr key={idx} className="bg-white">
                                <td className="p-3 border text-center font-bold">{char}</td>
                                <td className="p-3 border text-center">{count}íšŒ</td>
                                <td className="p-3 border text-center font-mono">{huffmanResult.codes[char]}</td>
                              </tr>
                            ))}
                          </tbody>
                        </table>
                      </div>
                      <p className="mt-3 text-sm text-gray-700">ğŸ’¡ ìì£¼ ë‚˜ì˜¤ëŠ” ë¬¸ìì¼ìˆ˜ë¡ ì§§ì€ ì½”ë“œë¥¼ ë°›ì•˜ì–´ìš”!</p>
                      <p className="text-sm text-gray-700">ğŸ’¡ íŠ¸ë¦¬ì—ì„œ ì™¼ìª½ìœ¼ë¡œ ê°€ë©´ 0, ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê°€ë©´ 1ì„ ì¶”ê°€í•´ìš”!</p>
                    </div>

                    {/* 4ë‹¨ê³„: ì••ì¶• ê²°ê³¼ (ê¸°ì¡´ ì½”ë“œ ìœ ì§€) */}
                    <div className="bg-green-50 border-l-4 border-green-500 p-4 rounded">
                      <h4 className="font-bold text-green-800 mb-2">ì••ì¶• ê²°ê³¼:</h4>
                      <p><strong>ì›ë³¸:</strong> {huffmanInput} ({huffmanInput.length}ê¸€ì Ã— 8ë¹„íŠ¸ = {huffmanResult.originalBits}ë¹„íŠ¸)</p>
                      <p><strong>ì••ì¶•:</strong> {huffmanResult.compressed} ({huffmanResult.compressedBits}ë¹„íŠ¸)</p>
                      <div className="bg-white p-4 rounded-lg">
                        <p className="text-2xl font-bold text-green-600 mb-2">
                          ì••ì¶•ë¥ : {huffmanResult.ratio}% ì ˆì•½! ğŸ‰
                        </p>
                        <p className="text-sm text-gray-700">
                          ğŸ’¡ ì›ë³¸ {huffmanResult.originalBits}ë¹„íŠ¸ â†’ ì••ì¶• {huffmanResult.compressedBits}ë¹„íŠ¸ë¡œ ì¤„ì—ˆì–´ìš”!
                        </p>
                      </div>
                    </div>
                  </div>
                )}
              </div>
            )}

            {selectedMethod === 'dictionary' && (
              <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
                <h3 className="text-2xl font-bold text-indigo-600 mb-4">ğŸ® ì‚¬ì „ ê¸°ë°˜ ì••ì¶• ì²´í—˜í•˜ê¸°</h3>
                <p className="text-gray-600 mb-4">ìì£¼ ë‚˜ì˜¤ëŠ” ë‹¨ì–´ë¥¼ ì§§ì€ ê¸°í˜¸ë¡œ ë°”ê¿‰ë‹ˆë‹¤!</p>
                
                <textarea
                  value={dictionaryInput}
                  onChange={(e) => setDictionaryInput(e.target.value)}
                  className="w-full p-3 border-2 border-gray-300 rounded-lg mb-3 font-mono text-lg"
                  rows="3"
                  placeholder="'ì•„ë¦¬ë‘'ì´ë‚˜ 'ì•„ë¼ë¦¬ìš”'ê°€ í¬í•¨ëœ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                />
                <button
                  onClick={compressDictionary}
                  className="bg-gradient-to-r from-indigo-500 to-indigo-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transition-all"
                >
                  ì‚¬ì „ ê¸°ë°˜ ì••ì¶•í•˜ê¸°!
                </button>

                {dictionaryResult && !dictionaryResult.error && (
                  <div className="mt-4 bg-green-50 border-l-4 border-green-500 p-4 rounded">
                    <h4 className="font-bold text-green-800 mb-2">ì••ì¶• ê²°ê³¼:</h4>
                    <p><strong>ì›ë³¸:</strong> {dictionaryInput} ({dictionaryInput.length}ê¸€ì)</p>
                    <p><strong>ì••ì¶•:</strong> {dictionaryResult.compressed} ({dictionaryResult.compressed.length}ê¸€ì)</p>
                    
                    {Object.keys(dictionaryResult.dictionary).length > 0 && (
                      <div className="mt-3 bg-white p-3 rounded">
                        <p className="font-bold text-indigo-600 mb-2">ğŸ“– ìƒì„±ëœ ì‚¬ì „:</p>
                        {Object.entries(dictionaryResult.dictionary).map(([word, symbol]) => (
                          <div key={word} className="text-sm mb-1">
                            <code className="bg-indigo-100 px-2 py-1 rounded">{symbol}</code> = "{word}"
                          </div>
                        ))}
                      </div>
                    )}
                    
                    <p className="text-2xl font-bold text-green-600 mt-2">ì••ì¶•ë¥ : {dictionaryResult.ratio}% ì ˆì•½! ğŸ‰</p>
                    <p className="mt-2 text-sm">ğŸ’¡ ë°˜ë³µë˜ëŠ” ë‹¨ì–´ë¥¼ <strong>ì§§ì€ ê¸°í˜¸</strong>ë¡œ ë°”ê¿¨ì–´ìš”!</p>
                  </div>
                )}
              </div>
            )}

            {selectedMethod === 'lz' && (
              <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
                <h3 className="text-2xl font-bold text-purple-600 mb-4">ğŸ® LZ ì••ì¶• ì²´í—˜í•˜ê¸°</h3>
                <p className="text-gray-600 mb-4">ì´ì „ì— ë‚˜ì˜¨ ë°ì´í„°ë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤! (ì˜ˆ: chamsaechamda)</p>
                
                <input
                  type="text"
                  value={lzInput}
                  onChange={(e) => setLzInput(e.target.value)}
                  className="w-full p-3 border-2 border-gray-300 rounded-lg mb-3 font-mono text-lg"
                  placeholder="ë°˜ë³µë˜ëŠ” íŒ¨í„´ì´ ìˆëŠ” í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                />
                <button
                  onClick={compressLZ}
                  className="bg-gradient-to-r from-purple-500 to-purple-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transition-all"
                >
                  LZ ì••ì¶•í•˜ê¸°!
                </button>

                {lzResult && !lzResult.error && (
  <div className="mt-4 bg-green-50 border-l-4 border-green-500 p-4 rounded">
    <h4 className="font-bold text-green-800 mb-2">ì••ì¶• ê²°ê³¼:</h4>
    <p><strong>ì›ë³¸:</strong> {lzInput} ({lzResult.originalBytes}ê¸€ì)</p>
    <p><strong>ì••ì¶•:</strong> {lzResult.compressed} ({lzResult.compressedBytes}ê¸€ì)</p>
    <p className="text-2xl font-bold text-green-600 mt-2">
      ì••ì¶•ë¥ : {lzResult.ratio}% {parseFloat(lzResult.ratio) >= 0 ? 'ì ˆì•½!' : 'ì¦ê°€'} ğŸ‰
    </p>
    
    {/* ì••ì¶• ê³¼ì • ì‹œê°í™” */}
    {lzResult.steps && lzResult.steps.length > 0 && (
      <div className="mt-4 bg-white p-3 rounded">
        <p className="font-bold text-purple-600 mb-2">ğŸ” ì••ì¶• ê³¼ì •:</p>
        <div className="space-y-1 text-sm">
          {lzResult.steps.map((step, idx) => (
            <div key={idx} className="flex items-center gap-2">
              {step.type === 'match' ? (
                <>
                  <span className="text-gray-600">ìœ„ì¹˜ {step.position}:</span>
                  <code className="bg-yellow-100 px-2 py-1 rounded">"{step.original}"</code>
                  <span>â†’</span>
                  <code className="bg-purple-100 px-2 py-1 rounded">{step.compressed}</code>
                  <span className="text-xs text-gray-500">(ì´ì „ ë°ì´í„° ì°¸ì¡°)</span>
                </>
              ) : (
                <>
                  <span className="text-gray-600">ìœ„ì¹˜ {step.position}:</span>
                  <code className="bg-gray-100 px-2 py-1 rounded">'{step.char}'</code>
                  <span className="text-xs text-gray-500">(ë§¤ì¹­ ì—†ìŒ, ê·¸ëŒ€ë¡œ ì¶œë ¥)</span>
                </>
              )}
            </div>
          ))}
        </div>
      </div>
    )}
    
    <p className="mt-2 text-sm">ğŸ’¡ <code className="bg-purple-100 px-2 py-1 rounded">(ê±°ë¦¬,ê¸¸ì´)</code>ëŠ” "í˜„ì¬ ìœ„ì¹˜ì—ì„œ ì™¼ìª½ìœ¼ë¡œ 'ê±°ë¦¬'ë§Œí¼ ì´ë™í•œ ê³³ë¶€í„° 'ê¸¸ì´'ë§Œí¼ ê°€ì ¸ì™€ë¼"ëŠ” ëœ»ì´ì—ìš”! 2ê¸€ìë¡œ ì·¨ê¸‰í•´ìš”.</p>
    <p className="text-sm mt-1">ì˜ˆ: (7,4)ëŠ” 7ì¹¸ ì™¼ìª½ë¶€í„° 4ê¸€ìë¥¼ ë³µì‚¬í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.</p>
  </div>
)}
              </div>
            )}

            {/* ë¹„êµí‘œ */}
            <div className="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 mb-6 border border-purple-200">
              <h3 className="text-2xl font-bold text-purple-900 mb-4">ğŸ“Š ì••ì¶• ë°©ë²• ë¹„êµí•˜ê¸°</h3>
              <div className="bg-white rounded-lg overflow-hidden shadow-sm">
                <table className="w-full">
                  <thead className="bg-gradient-to-r from-cyan-600 to-blue-600 text-white">
                    <tr>
                      <th className="p-4 text-left">ì••ì¶• ë°©ë²•</th>
                      <th className="p-4 text-left">ì›ë¦¬</th>
                      <th className="p-4 text-left">ì¥ì </th>
                      <th className="p-4 text-left">ëŒ€í‘œ í™œìš©</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr className="border-b hover:bg-cyan-50">
                      <td className="p-4 font-bold text-cyan-600">RLE</td>
                      <td className="p-4">ë°˜ë³µ íšŸìˆ˜ ê¸°ë¡</td>
                      <td className="p-4">ê°„ë‹¨í•˜ê³  ë¹ ë¦„</td>
                      <td className="p-4">í‘ë°± ì´ë¯¸ì§€, íŒ©ìŠ¤</td>
                    </tr>
                    <tr className="border-b hover:bg-blue-50">
                      <td className="p-4 font-bold text-blue-600">í—ˆí”„ë§Œ ì½”ë”©</td>
                      <td className="p-4">ë¹ˆë„ ê¸°ë°˜ ì½”ë“œ</td>
                      <td className="p-4">íš¨ìœ¨ì  ì••ì¶•</td>
                      <td className="p-4">ZIP, JPEG ì¼ë¶€</td>
                    </tr>
                    <tr className="border-b hover:bg-indigo-50">
                      <td className="p-4 font-bold text-indigo-600">ì‚¬ì „ ê¸°ë°˜</td>
                      <td className="p-4">íŒ¨í„´ì„ ê¸°í˜¸ë¡œ</td>
                      <td className="p-4">íŒ¨í„´ ì••ì¶• ìš°ìˆ˜</td>
                      <td className="p-4">ë¬¸ì„œ, HTML</td>
                    </tr>
                    <tr className="hover:bg-purple-50">
                      <td className="p-4 font-bold text-purple-600">LZ ì••ì¶•</td>
                      <td className="p-4">ì´ì „ ë°ì´í„° ì°¸ì¡°</td>
                      <td className="p-4">ë²”ìš©ì„± ë†’ìŒ</td>
                      <td className="p-4">ZIP, PNG, GIF</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            {/* í€´ì¦ˆ ì„¹ì…˜ */}
            <div className="bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl p-6 mb-6 shadow-lg">
              <h2 className="text-3xl font-bold text-white text-center mb-6">ğŸ¯ í€´ì¦ˆë¡œ ë³µìŠµí•˜ê¸°!</h2>
              
              <div className="space-y-4">
                {quizData.map((quiz) => (
                  <div key={quiz.id} className="bg-white p-5 rounded-lg shadow-md">
                    <p className="font-bold text-gray-900 mb-3">Q{quiz.id}. {quiz.question}</p>
                    <div className="space-y-2">
                      {quiz.options.map((option, idx) => {
                        const isAnswered = quizAnswers[quiz.id];
                        const isSelected = isAnswered?.selected === option;
                        const isCorrect = option === quiz.correct;
                        
                        let bgColor = 'bg-gray-50 hover:bg-gray-100';
                        if (isAnswered) {
                          if (isSelected && isCorrect) bgColor = 'bg-green-100 border-2 border-green-500';
                          else if (isSelected && !isCorrect) bgColor = 'bg-red-100 border-2 border-red-500';
                          else if (isCorrect) bgColor = 'bg-green-100 border-2 border-green-500';
                        }
                        
                        return (
                          <div
                            key={idx}
                            onClick={() => !isAnswered && handleQuizAnswer(quiz.id, option, quiz.correct)}
                            className={`p-3 rounded-lg ${bgColor} ${!isAnswered ? 'cursor-pointer' : 'cursor-default'} transition-all`}
                          >
                            <span className="font-semibold">{'â‘ â‘¡â‘¢â‘£'[idx]}</span> {option}
                          </div>
                        );
                      })}
                    </div>
                    {quizAnswers[quiz.id] && (
                      <div className={`mt-3 p-3 rounded-lg ${quizAnswers[quiz.id].correct ? 'bg-green-50 text-green-800' : 'bg-red-50 text-red-800'}`}>
                        {quizAnswers[quiz.id].correct 
                          ? 'âœ… ì •ë‹µì…ë‹ˆë‹¤! ì˜ ì´í•´í•˜ê³  ìˆì–´ìš”! ğŸ‘' 
                          : 'âŒ ì•„ì‰¬ì›Œìš”! ìœ„ì˜ ì„¤ëª…ì„ ë‹¤ì‹œ ì½ì–´ë³´ì„¸ìš”. ğŸ’ª'}
                      </div>
                    )}
                  </div>
                ))}
              </div>
            </div>

            {/* ìƒê°í•´ë³´ê¸° ì„¹ì…˜ */}
            <div className="bg-gradient-to-r from-cyan-50 to-blue-50 rounded-2xl p-6 border border-cyan-200">
              <h3 className="text-2xl font-bold text-cyan-900 mb-4">ğŸ¤” ìƒê°í•´ë³´ê¸°</h3>
              <div className="grid md:grid-cols-2 gap-4">
                <div className="bg-white p-5 rounded-lg shadow-sm">
                  <h4 className="font-bold text-cyan-600 mb-3">Q. ë¬´ì†ì‹¤ ì••ì¶•ê³¼ ì†ì‹¤ ì••ì¶•ì˜ ì°¨ì´ëŠ”?</h4>
                  <p className="text-sm text-gray-700 leading-relaxed">
                    <span className="font-bold text-cyan-600">ë¬´ì†ì‹¤ ì••ì¶•</span>ì€ ì›ë³¸ì„ 100% ë³µì›í•  ìˆ˜ ìˆì–´ìš”. ë¬¸ì„œ, í”„ë¡œê·¸ë¨ì²˜ëŸ¼ ì •í™•í•´ì•¼ í•˜ëŠ” íŒŒì¼ì— ì‚¬ìš©í•©ë‹ˆë‹¤.
                    <span className="font-bold text-orange-600"> ì†ì‹¤ ì••ì¶•</span>ì€ ì¼ë¶€ ì •ë³´ë¥¼ ë²„ë ¤ì„œ ë” ì‘ê²Œ ë§Œë“¤ì–´ìš”. ì‚¬ì§„, ìŒì•…, ë™ì˜ìƒì²˜ëŸ¼ ì•½ê°„ì˜ ì†ì‹¤ì´ ê´œì°®ì€ íŒŒì¼ì— ì‚¬ìš©í•©ë‹ˆë‹¤.
                  </p>
                </div>
                <div className="bg-white p-5 rounded-lg shadow-sm">
                  <h4 className="font-bold text-blue-600 mb-3">Q. ZIP íŒŒì¼ì€ ì–´ë–¤ ì••ì¶•ì„ ì‚¬ìš©í•˜ë‚˜ìš”?</h4>
                  <p className="text-sm text-gray-700 leading-relaxed">
                    <span className="font-bold text-blue-600">ZIP íŒŒì¼</span>ì€ ì£¼ë¡œ LZ ì••ì¶•ê³¼ í—ˆí”„ë§Œ ì½”ë”©ì„ í•¨ê»˜ ì‚¬ìš©í•´ìš”.
                    ë¨¼ì € LZë¡œ ë°˜ë³µ íŒ¨í„´ì„ ì°¾ê³ , ê·¸ ë‹¤ìŒ í—ˆí”„ë§Œ ì½”ë”©ìœ¼ë¡œ ë¹ˆë„ê°€ ë†’ì€ ë°ì´í„°ë¥¼ ë” ì••ì¶•í•©ë‹ˆë‹¤!
                  </p>
                </div>
                <div className="bg-white p-5 rounded-lg shadow-sm">
                  <h4 className="font-bold text-indigo-600 mb-3">Q. ì••ì¶•ë¥ ì€ í•­ìƒ ì¢‹ì„ê¹Œìš”?</h4>
                  <p className="text-sm text-gray-700 leading-relaxed">
                    ì•„ë‹ˆìš”! <span className="font-bold text-indigo-600">ë°˜ë³µì´ë‚˜ íŒ¨í„´ì´ ì ì€ ë°ì´í„°</span>ëŠ” ì••ì¶•ë¥ ì´ ë‚®ì•„ìš”.
                    ì˜ˆë¥¼ ë“¤ì–´ ì™„ì „íˆ ëœë¤í•œ ë°ì´í„°ë‚˜ ì´ë¯¸ ì••ì¶•ëœ íŒŒì¼ì€ ë” ì´ìƒ ì••ì¶•ì´ ì•ˆ ë  ìˆ˜ ìˆì–´ìš”.
                  </p>
                </div>
                <div className="bg-white p-5 rounded-lg shadow-sm">
                  <h4 className="font-bold text-purple-600 mb-3">Q. ì‹¤ìƒí™œì—ì„œ ë¬´ì†ì‹¤ ì••ì¶•ì„ ì–´ë””ì— ì“¸ê¹Œìš”?</h4>
                  <p className="text-sm text-gray-700 leading-relaxed">
                    <span className="font-bold text-purple-600">ë¬¸ì„œ ì „ì†¡</span>, <span className="font-bold text-cyan-600">í”„ë¡œê·¸ë¨ ì„¤ì¹˜íŒŒì¼</span>,
                    <span className="font-bold text-green-600"> ì˜ë£Œ ì´ë¯¸ì§€</span>, <span className="font-bold text-orange-600">ë²•ë¥  ë¬¸ì„œ</span> ë“±
                    ì›ë³¸ì´ ì¤‘ìš”í•œ ëª¨ë“  ê³³ì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤!
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<LosslessCompressionEducation />);
  </script>
</body>
</html>
