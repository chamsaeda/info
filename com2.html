<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì†ì‹¤ ì••ì¶• ì²´í—˜í•˜ê¸° - ë¶€ì‚°ì§„ì—¬ììƒì—…ê³ ë“±í•™êµ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            min-height: 100vh;
            padding: 20px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 0;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        /* í—¤ë” ìŠ¤íƒ€ì¼ */
        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 40px 30px;
            text-align: left;
            box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .home-button {
            background: white;
            color: #f5576c;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            font-size: 0.9em;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .home-button:hover {
            background: #fff5f7;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transform: translateY(-2px);
        }
        
        .school-name {
            font-size: 0.8em;      
            
            opacity: 0.95;
        }
        
        .main-title {
            font-size: 2.0em;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            font-size: 1em;
            opacity: 0.9;
        }
        
        /* ì½˜í…ì¸  ì˜ì—­ */
        .content {
            padding: 30px;
        }
        
        .info-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
        }
        
        .info-box h2 {
            margin-bottom: 10px;
            font-size: 1.8em;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #f5576c;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .section h2 {
            color: #f5576c;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .example-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        button {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(245, 87, 108, 0.3);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 87, 108, 0.5);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .result {
            background: linear-gradient(135deg, #fff0f6 0%, #ffe4ec 100%);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #f5576c;
        }
        
        .canvas-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
        }
        
        .canvas-box {
            text-align: center;
        }
        
        canvas {
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: crosshair;
            max-width: 100%;
            height: auto;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .slider-container {
            margin: 20px 0;
        }
        
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #f5576c;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #f5576c;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .value-display {
            font-size: 1.3em;
            font-weight: bold;
            color: #f5576c;
            margin: 10px 0;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .comparison-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(245, 87, 108, 0.3);
        }
        
        .comparison-item h4 {
            color: #f5576c;
            margin-bottom: 10px;
        }
        
        .file-size {
            font-size: 1.5em;
            font-weight: bold;
            color: #f5576c;
            margin: 10px 0;
        }
        
        .icon {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .compression-ratio {
            font-size: 1.2em;
            color: #059669;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .highlight {
            background: linear-gradient(to right, #fff0f6, #ffe4ec);
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
            color: #f5576c;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .tab-button {
            background: #e9ecef;
            color: #495057;
            flex: 1;
            min-width: 150px;
        }
        
        .tab-button.active {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .success {
            background: #d1f2eb;
            border-left: 4px solid #059669;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .color-palette {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 5px;
            border: 3px solid #ddd;
            cursor: pointer;
            transition: all 0.2s;
        }

        .color-option:hover {
            transform: scale(1.1);
            border-color: #f5576c;
        }

        .color-option.selected {
            border-color: #f5576c;
            box-shadow: 0 0 10px rgba(245, 87, 108, 0.5);
            transform: scale(1.1);
        }

        .compression-visual {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .bar-container {
            margin: 15px 0;
        }

        .bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9em;
            color: #666;
        }

        .bar {
            height: 40px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            padding-left: 15px;
            font-weight: bold;
            color: white;
            transition: width 0.5s ease;
        }

        .bar-original {
            background: linear-gradient(to right, #dc2626, #ef4444);
            width: 100%;
        }

        .bar-compressed {
            background: linear-gradient(to right, #059669, #10b981);
        }

        .image-compare-item {
            background: white;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .image-compare-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(245, 87, 108, 0.3);
        }

        .image-compare-item img {
            transition: transform 0.3s;
        }

        .image-compare-item:hover img {
            transform: scale(1.05);
        }

        #imageDetailResult {
            margin-top: 20px;
        }

        .detail-comparison {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .detail-image {
            flex: 1;
            min-width: 200px;
            text-align: center;
        }

        .detail-image img {
            width: 100%;
            max-width: 900px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-top">
                <div class="school-name">ë¶€ì‚°ì§„ì—¬ììƒì—…ê³ ë“±í•™êµ ì •ë³´ í•™ìŠµìë£Œ</div>
                <a href="index.html" class="home-button">ğŸ  í™ˆìœ¼ë¡œ</a>
            </div>
            <div class="main-title">ğŸ¨ ì†ì‹¤ ì••ì¶• ì²´í—˜í•˜ê¸°</div>
            <div class="subtitle">ì´ë¯¸ì§€ì™€ ì˜ìƒ, ìŒì•… íŒŒì¼ì´ ì–´ë–»ê²Œ ì‘ì•„ì§€ëŠ”ì§€ ì§ì ‘ ì²´í—˜í•´ë´ìš”!</div>
        </div>

        <div class="content">
            <div class="info-box fade-in">
                <h2>ğŸ’¡ ì†ì‹¤ ì••ì¶•ì´ë€?</h2>
                <p style="font-size: 1.1em; line-height: 1.8;">
                    íŒŒì¼ì„ ì‘ê²Œ ë§Œë“¤ê¸° ìœ„í•´ ì¼ë¶€ ë°ì´í„°ë¥¼ ë²„ë¦¬ëŠ” ë°©ë²•ì´ì—ìš”. 
                    ì‚¬ëŒì˜ ëˆˆì´ë‚˜ ê·€ë¡œëŠ” ì˜ ëŠë¼ì§€ ëª»í•˜ëŠ” ë¶€ë¶„ì„ ì œê±°í•´ì„œ íŒŒì¼ í¬ê¸°ë¥¼ í™• ì¤„ì¼ ìˆ˜ ìˆì–´ìš”!
                </p>
            </div>

            <div class="tabs">
                <button class="tab-button active" onclick="showTab('imageTab')">ğŸ–¼ï¸ ì´ë¯¸ì§€ ì••ì¶•</button>
                <button class="tab-button" onclick="showTab('videoTab')">ğŸ¬ ì˜ìƒ ì••ì¶•</button>
                <button class="tab-button" onclick="showTab('audioTab')">ğŸµ ìŒì•… ì••ì¶•</button>
            </div>

            <!-- ì´ë¯¸ì§€ ì••ì¶• íƒ­ -->
            <div id="imageTab" class="tab-content active">
                <div class="section fade-in">
                    <h2>ğŸ“¸ ì‹¤ì œ ì´ë¯¸ì§€ ì••ì¶• ë¹„êµí•˜ê¸°</h2>
                    <p style="margin-bottom: 20px;">
                        ê°™ì€ ì‚¬ì§„ì„ ë‹¤ì–‘í•œ ìƒ‰ìƒ ìˆ˜ë¡œ ì••ì¶•í–ˆì„ ë•Œ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ ì§ì ‘ ë¹„êµí•´ë´ìš”!
                    </p>

                    <div class="example-box">
                        <h3 style="color: #f5576c; margin-bottom: 15px;">ğŸ” ìƒ‰ìƒ ì••ì¶• ë‹¨ê³„ë³„ ë¹„êµ</h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin: 20px 0;">
                            <div class="image-compare-item" onclick="showImageDetail('src/1.png', 'ì›ë³¸', 92)">
                                <img src="src/1.png" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                <div style="text-align: center; margin-top: 10px;">
                                    <strong style="color: #f5576c;">ì›ë³¸ PNG</strong>
                                    <p style="font-size: 0.9em; color: #666;">24ë¹„íŠ¸ (1,677ë§Œìƒ‰)</p>
                                    <p style="font-weight: bold; color: #059669;">1.82 MB</p>
                                </div>
                            </div>

                            <div class="image-compare-item" onclick="showImageDetail('src/256.gif', '256ìƒ‰', 461)">
                                <img src="src/256.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                <div style="text-align: center; margin-top: 10px;">
                                    <strong style="color: #f5576c;">256ìƒ‰</strong>
                                    <p style="font-size: 0.9em; color: #666;">8ë¹„íŠ¸</p>
                                    <p style="font-weight: bold; color: #059669;">461 KB</p>
                                </div>
                            </div>

                            <div class="image-compare-item" onclick="showImageDetail('src/128.gif', '128ìƒ‰', 344)">
                                <img src="src/128.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                <div style="text-align: center; margin-top: 10px;">
                                    <strong style="color: #f5576c;">128ìƒ‰</strong>
                                    <p style="font-size: 0.9em; color: #666;">7ë¹„íŠ¸</p>
                                    <p style="font-weight: bold; color: #059669;">344 KB</p>
                                </div>
                            </div>

                            <div class="image-compare-item" onclick="showImageDetail('src/64.gif', '64ìƒ‰', 252)">
                                <img src="src/64.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                <div style="text-align: center; margin-top: 10px;">
                                    <strong style="color: #f5576c;">64ìƒ‰</strong>
                                    <p style="font-size: 0.9em; color: #666;">6ë¹„íŠ¸</p>
                                    <p style="font-weight: bold; color: #059669;">252 KB</p>
                                </div>
                            </div>

                            <div class="image-compare-item" onclick="showImageDetail('src/32.gif', '32ìƒ‰', 199)">
                                <img src="src/32.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                <div style="text-align: center; margin-top: 10px;">
                                    <strong style="color: #f5576c;">32ìƒ‰</strong>
                                    <p style="font-size: 0.9em; color: #666;">5ë¹„íŠ¸</p>
                                    <p style="font-weight: bold; color: #059669;">199 KB</p>
                                </div>
                            </div>

                            <div class="image-compare-item" onclick="showImageDetail('src/16.gif', '16ìƒ‰', 116)">
                                <img src="src/16.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                <div style="text-align: center; margin-top: 10px;">
                                    <strong style="color: #f5576c;">16ìƒ‰</strong>
                                    <p style="font-size: 0.9em; color: #666;">4ë¹„íŠ¸</p>
                                    <p style="font-weight: bold; color: #059669;">116 KB</p>
                                </div>
                            </div>

                            <div class="image-compare-item" onclick="showImageDetail('src/8.gif', '8ìƒ‰', 96)">
                                <img src="src/8.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                <div style="text-align: center; margin-top: 10px;">
                                    <strong style="color: #f5576c;">8ìƒ‰</strong>
                                    <p style="font-size: 0.9em; color: #666;">3ë¹„íŠ¸</p>
                                    <p style="font-weight: bold; color: #059669;">96 KB</p>
                                </div>
                            </div>

                            <div class="image-compare-item" onclick="showImageDetail('src/4.gif', '4ìƒ‰', 62)">
                                <img src="src/4.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                <div style="text-align: center; margin-top: 10px;">
                                    <strong style="color: #f5576c;">4ìƒ‰</strong>
                                    <p style="font-size: 0.9em; color: #666;">2ë¹„íŠ¸</p>
                                    <p style="font-weight: bold; color: #059669;">62 KB</p>
                                </div>
                            </div>

                            <div class="image-compare-item" onclick="showImageDetail('src/2.gif', '2ìƒ‰', 28)">
                                <img src="src/2.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                <div style="text-align: center; margin-top: 10px;">
                                    <strong style="color: #f5576c;">2ìƒ‰ (í‘ë°±)</strong>
                                    <p style="font-size: 0.9em; color: #666;">1ë¹„íŠ¸</p>
                                    <p style="font-weight: bold; color: #059669;">28 KB</p>
                                </div>
                            </div>
                        </div>
                            <!-- ë””ë”ë§ ì••ì¶• ë¹„êµ ì¶”ê°€ -->
                            <h3 style="color: #f5576c; margin: 30px 0 15px 0;">ğŸ¨ ë””ë”ë§ ì••ì¶• ë‹¨ê³„ë³„ ë¹„êµ</h3>
                            <p style="margin-bottom: 15px; color: #666;">
                                ë””ë”ë§ì€ ì ì€ ìƒ‰ìƒìœ¼ë¡œë„ ë” ìì—°ìŠ¤ëŸ¬ìš´ í‘œí˜„ì„ ë§Œë“œëŠ” ê¸°ë²•ì´ì—ìš”!
                            </p>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin: 20px 0;">
                                <div class="image-compare-item" onclick="showImageDetail('src/256_1.gif', '256ìƒ‰ ë””ë”ë§', 703)">
                                    <img src="src/256_1.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                    <div style="text-align: center; margin-top: 10px;">
                                        <strong style="color: #f5576c;">256ìƒ‰ ë””ë”ë§</strong>
                                        <p style="font-size: 0.9em; color: #666;">8ë¹„íŠ¸</p>
                                        <p style="font-weight: bold; color: #059669;">703 KB</p>
                                    </div>
                                </div>

                                <div class="image-compare-item" onclick="showImageDetail('src/128_1.gif', '128ìƒ‰ ë””ë”ë§', 544)">
                                    <img src="src/128_1.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                    <div style="text-align: center; margin-top: 10px;">
                                        <strong style="color: #f5576c;">128ìƒ‰ ë””ë”ë§</strong>
                                        <p style="font-size: 0.9em; color: #666;">7ë¹„íŠ¸</p>
                                        <p style="font-weight: bold; color: #059669;">544 KB</p>
                                    </div>
                                </div>

                                <div class="image-compare-item" onclick="showImageDetail('src/64_1.gif', '64ìƒ‰ ë””ë”ë§', 419)">
                                    <img src="src/64_1.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                    <div style="text-align: center; margin-top: 10px;">
                                        <strong style="color: #f5576c;">64ìƒ‰ ë””ë”ë§</strong>
                                        <p style="font-size: 0.9em; color: #666;">6ë¹„íŠ¸</p>
                                        <p style="font-weight: bold; color: #059669;">419 KB</p>
                                    </div>
                                </div>

                                <div class="image-compare-item" onclick="showImageDetail('src/32_1.gif', '32ìƒ‰ ë””ë”ë§', 341)">
                                    <img src="src/32_1.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                    <div style="text-align: center; margin-top: 10px;">
                                        <strong style="color: #f5576c;">32ìƒ‰ ë””ë”ë§</strong>
                                        <p style="font-size: 0.9em; color: #666;">5ë¹„íŠ¸</p>
                                        <p style="font-weight: bold; color: #059669;">341 KB</p>
                                    </div>
                                </div>

                                <div class="image-compare-item" onclick="showImageDetail('src/16_1.gif', '16ìƒ‰ ë””ë”ë§', 229)">
                                    <img src="src/16_1.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                    <div style="text-align: center; margin-top: 10px;">
                                        <strong style="color: #f5576c;">16ìƒ‰ ë””ë”ë§</strong>
                                        <p style="font-size: 0.9em; color: #666;">4ë¹„íŠ¸</p>
                                        <p style="font-weight: bold; color: #059669;">229 KB</p>
                                    </div>
                                </div>

                                <div class="image-compare-item" onclick="showImageDetail('src/8_1.gif', '8ìƒ‰ ë””ë”ë§', 188)">
                                    <img src="src/8_1.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                    <div style="text-align: center; margin-top: 10px;">
                                        <strong style="color: #f5576c;">8ìƒ‰ ë””ë”ë§</strong>
                                        <p style="font-size: 0.9em; color: #666;">3ë¹„íŠ¸</p>
                                        <p style="font-weight: bold; color: #059669;">188 KB</p>
                                    </div>
                                </div>

                                <div class="image-compare-item" onclick="showImageDetail('src/4_1.gif', '4ìƒ‰ ë””ë”ë§', 130)">
                                    <img src="src/4_1.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                    <div style="text-align: center; margin-top: 10px;">
                                        <strong style="color: #f5576c;">4ìƒ‰ ë””ë”ë§</strong>
                                        <p style="font-size: 0.9em; color: #666;">2ë¹„íŠ¸</p>
                                        <p style="font-weight: bold; color: #059669;">130 KB</p>
                                    </div>
                                </div>

                                <div class="image-compare-item" onclick="showImageDetail('src/2_1.gif', '2ìƒ‰ ë””ë”ë§', 77)">
                                    <img src="src/2_1.gif" style="width: 100%; border-radius: 8px; cursor: pointer;">
                                    <div style="text-align: center; margin-top: 10px;">
                                        <strong style="color: #f5576c;">2ìƒ‰ ë””ë”ë§</strong>
                                        <p style="font-size: 0.9em; color: #666;">1ë¹„íŠ¸</p>
                                        <p style="font-weight: bold; color: #059669;">77 KB</p>
                                    </div>
                                </div>
                            </div>

                            <div class="success" style="margin-top: 20px;">
                                <h4>ğŸ¨ ë””ë”ë§ì˜ ì¥ì !</h4>
                                <p>âœ… ê°™ì€ ìƒ‰ìƒ ìˆ˜ì—ë„ ë” ë¶€ë“œëŸ½ê³  ìì—°ìŠ¤ëŸ¬ì›Œ ë³´ì—¬ìš”</p>
                                <p>âœ… ì ì„ ì„ì–´ì„œ ì¤‘ê°„ìƒ‰ì„ í‘œí˜„í•˜ëŠ” ì°©ì‹œ íš¨ê³¼ë¥¼ ì´ìš©í•´ìš”</p>
                                <p>âœ… ì˜›ë‚  ê²Œì„ì´ë‚˜ ì‹ ë¬¸ ì¸ì‡„ì—ì„œ ë§ì´ ì‚¬ìš©í–ˆì–´ìš”</p>
                                <p>âœ… íŒŒì¼ í¬ê¸°ëŠ” ë¹„ìŠ·í•˜ì§€ë§Œ ì‹œê°ì  í’ˆì§ˆì´ ë” ì¢‹ì•„ìš”!</p>
                            </div>
                        </div>

                        <div id="imageDetailResult"></div>

                        <div class="compression-visual" style="margin-top: 30px;">
                            <h4 style="color: #f5576c; margin-bottom: 15px;">ğŸ“Š íŒŒì¼ í¬ê¸° ë³€í™” ê·¸ë˜í”„</h4>
                            <div style="position: relative; height: 300px; background: #f8f9fa; border-radius: 10px; padding: 20px;">
                                <canvas id="compressionChart" width="800" height="260"></canvas>
                            </div>
                        </div>

                        <div class="success" style="margin-top: 20px;">
                            <h4>ğŸ’¡ ê´€ì°°í•´ë³´ì„¸ìš”!</h4>
                            <p>âœ… ìƒ‰ìƒ ìˆ˜ê°€ ì¤„ì–´ë“¤ìˆ˜ë¡ íŒŒì¼ í¬ê¸°ë„ ì‘ì•„ì ¸ìš”</p>
                            <p>âœ… 256ìƒ‰ê¹Œì§€ëŠ” ì‚¬ì§„ì˜ í’ˆì§ˆì´ í¬ê²Œ ë‚˜ë¹ ì§€ì§€ ì•Šì•„ìš”</p>
                            <p>âœ… 16ìƒ‰ ì´í•˜ë¡œ ì¤„ì–´ë“¤ë©´ ì‚¬ì§„ì˜ ë””í…Œì¼ì´ ë§ì´ ì†ì‹¤ë¼ìš”</p>
                            <p>âœ… 2ìƒ‰(í‘ë°±)ì€ ì›ë³¸ì˜ 4.2%ë§Œ ì°¨ì§€í•´ìš”! (1,820KB â†’ 77KB)</p>
                        </div>
                    </div>
                </div>

                <div class="section fade-in">
                    <h2>ğŸ¨ ìƒ‰ìƒ ì••ì¶• ì²´í—˜í•˜ê¸° (PNG/GIF ë°©ì‹)</h2>
                    <p style="margin-bottom: 20px;">
                        ì§ì ‘ ê·¸ë¦¼ì„ ê·¸ë¦¬ê³  ìƒ‰ìƒ ìˆ˜ë¥¼ ì¤„ì—¬ë³´ë©´ì„œ ì••ì¶• íš¨ê³¼ë¥¼ ì²´í—˜í•´ë´ìš”!
                    </p>

                    <div class="example-box">
                        <h3 style="color: #f5576c; margin-bottom: 15px;">ğŸ¨ ê·¸ë¦¼ ê·¸ë¦¬ê¸°</h3>
                        
                        <div class="color-palette">
                            <div class="color-option selected" style="background: black;" onclick="selectColor('black', this)"></div>
                            <div class="color-option" style="background: red;" onclick="selectColor('red', this)"></div>
                            <div class="color-option" style="background: orange;" onclick="selectColor('orange', this)"></div>
                            <div class="color-option" style="background: yellow;" onclick="selectColor('yellow', this)"></div>
                            <div class="color-option" style="background: green;" onclick="selectColor('green', this)"></div>
                            <div class="color-option" style="background: blue;" onclick="selectColor('blue', this)"></div>
                            <div class="color-option" style="background: purple;" onclick="selectColor('purple', this)"></div>
                        </div>

                        <div style="text-align: center; margin: 20px 0;">
                            <button onclick="drawRainbow()">ğŸŒˆ ë¬´ì§€ê°œ ê·¸ë¦¬ê¸°</button>
                            <button onclick="clearCanvas()">ğŸ—‘ï¸ ì§€ìš°ê¸°</button>
                        </div>

                        <div class="slider-container">
                            <label><strong>ìƒ‰ìƒ ìˆ˜ ì„ íƒ:</strong></label>
                            <input type="range" 
                                   id="colorCountSlider" 
                                   class="slider" 
                                   min="1" 
                                   max="4" 
                                   value="4" 
                                   oninput="updateColorCount()">
                            <div class="value-display">
                                <span id="colorCountValue">16</span> ìƒ‰ìƒ
                            </div>
                        </div>

                        <div class="canvas-container">
                            <div class="canvas-box">
                                <h4>ì›ë³¸</h4>
                                <canvas id="drawCanvas" width="300" height="300"></canvas>
                            </div>
                            <div class="canvas-box">
                                <h4>ì••ì¶• í›„</h4>
                                <canvas id="compressedCanvas" width="300" height="300"></canvas>
                            </div>
                        </div>

                        <div style="text-align: center; margin-top: 20px;">
                            <button onclick="compressColors()">ğŸ¯ ìƒ‰ìƒ ì••ì¶• ì‹¤í–‰</button>
                        </div>

                        <div id="colorResult"></div>
                    </div>

                    <div class="success">
                        <h4>ğŸ’¡ ì•Œì•„ë‘ì„¸ìš”!</h4>
                        <p>PNGì™€ GIFëŠ” ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ìƒ‰ìƒ ìˆ˜ë¥¼ ì œí•œí•´ì„œ íŒŒì¼ í¬ê¸°ë¥¼ ì¤„ì—¬ìš”. 
                        ì‚¬ì§„ë³´ë‹¤ëŠ” ê·¸ë¦¼ì´ë‚˜ ë¡œê³ ì²˜ëŸ¼ ìƒ‰ìƒì´ ë‹¨ìˆœí•œ ì´ë¯¸ì§€ì— ì í•©í•´ìš”!</p>
                    </div>
                </div>
                <!-- DCT (ì´ì‚° ì½”ì‚¬ì¸ ë³€í™˜) ì²´í—˜ ì„¹ì…˜ -->
                <div class="section">
                <h2>ğŸŒŠ ì´ì‚° ì½”ì‚¬ì¸ ë³€í™˜(DCT) ì²´í—˜í•˜ê¸°</h2>
                <div class="info-box">
                    <h3>ğŸ’¡ DCTë€ ë¬´ì—‡ì¸ê°€ìš”?</h3>
                    <p><strong>ì´ì‚° ì½”ì‚¬ì¸ ë³€í™˜(Discrete Cosine Transform, DCT)</strong>ì€ ì´ë¯¸ì§€ë¥¼ ì£¼íŒŒìˆ˜ ì„±ë¶„ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ìˆ˜í•™ì  ê¸°ë²•ì…ë‹ˆë‹¤.</p>
                    <p>ğŸµ ë§ˆì¹˜ ì†Œë¦¬ë¥¼ ë†’ì€ ìŒê³¼ ë‚®ì€ ìŒìœ¼ë¡œ ë‚˜ëˆ„ë“¯ì´, ì´ë¯¸ì§€ë„ "ìì£¼ ë³€í•˜ëŠ” ë¶€ë¶„(ê³ ì£¼íŒŒ)"ê³¼ "ì²œì²œíˆ ë³€í•˜ëŠ” ë¶€ë¶„(ì €ì£¼íŒŒ)"ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆì–´ìš”!</p>
                    <p>ğŸ“¸ <strong>JPEG ì´ë¯¸ì§€ ì••ì¶•ì˜ í•µì‹¬ ê¸°ìˆ </strong>ì´ë©°, ì‚¬ëŒ ëˆˆì— ëœ ì¤‘ìš”í•œ ê³ ì£¼íŒŒ ì •ë³´ë¥¼ ì œê±°í•´ì„œ íŒŒì¼ í¬ê¸°ë¥¼ ì¤„ì…ë‹ˆë‹¤.</p>
                </div>

                <div class="example-box">
                    <h3>ğŸ“¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ</h3>
                    <div style="text-align: center; margin: 20px 0;">
                        <input type="file" id="imageUpload" accept="image/*" onchange="handleImageUpload(event)" style="display:none;">
                        <button onclick="document.getElementById('imageUpload').click()">
                            ğŸ–¼ï¸ ì´ë¯¸ì§€ ì„ íƒí•˜ê¸°
                        </button>
                        <p style="margin-top: 10px; color: #666;">
                            ğŸ’¡ ì¶”ì²œ: í’ê²½ ì‚¬ì§„ì´ë‚˜ ì‚¬ëŒ ì–¼êµ´ ì‚¬ì§„ì„ ì—…ë¡œë“œí•´ë³´ì„¸ìš”!
                        </p>
                    </div>

                    <div class="slider-container">
                        <label for="qualitySlider">ì••ì¶• í’ˆì§ˆ ì¡°ì ˆ:</label>
                        <input type="range" id="qualitySlider" class="slider" 
                               min="1" max="100" value="50" 
                               oninput="updateQuality()">
                        <div class="value-display" id="qualityValue">50%</div>
                    </div>

                    <div class="slider-container">
                        <label for="blockSizeSlider">ë¸”ë¡ í¬ê¸° ì¡°ì ˆ:</label>
                        <input type="range" id="blockSizeSlider" class="slider" 
                               min="4" max="32" step="4" value="8" 
                               oninput="updateBlockSize()">
                        <div class="value-display" id="blockSizeValue">8x8</div>
                        <p style="color: #666; font-size: 0.9em; margin-top: 5px;">
                            ğŸ’¡ JPEGëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 8x8 ë¸”ë¡ì„ ì‚¬ìš©í•´ìš”!
                        </p>
                    </div>

                    <div class="canvas-container">
                        <div class="canvas-box">
                            <h4>ì›ë³¸ ì´ë¯¸ì§€</h4>
                            <canvas id="originalCanvas" width="400" height="300" style="max-width: 100%;"></canvas>
                        </div>
                        <div class="canvas-box">
                            <h4>ì£¼íŒŒìˆ˜ ì˜ì—­ (DCT)</h4>
                            <canvas id="frequencyCanvas" width="400" height="400" style="max-width: 100%;"></canvas>
                            <p style="font-size: 0.85em; color: #666; margin-top: 10px;">
                                ë¹¨ê°„ ë°•ìŠ¤: ì €ì£¼íŒŒ(ì¤‘ìš”)<br>
                                ë°ì„ìˆ˜ë¡ í° ê°’, íšŒìƒ‰ì€ 0
                            </p>
                        </div>
                        <div class="canvas-box">
                            <h4>ì••ì¶•ëœ ì´ë¯¸ì§€</h4>
                            <canvas id="dctcompressedCanvas" width="400" height="300" style="max-width: 100%;"></canvas>
                        </div>
                    </div>

                    <div class="comparison">
                        <div class="comparison-item">
                            <div class="icon">ğŸ“¦</div>
                            <h4>ì›ë³¸ í¬ê¸°</h4>
                            <div class="file-size" id="dctOriginalSize">-</div>
                        </div>
                        <div class="comparison-item">
                            <div class="icon">ğŸ’¾</div>
                            <h4>ì••ì¶• í›„ í¬ê¸°</h4>
                            <div class="file-size" id="dctCompressedSize">-</div>
                        </div>
                        <div class="comparison-item">
                            <div class="icon">ğŸ“Š</div>
                            <h4>ë°ì´í„° ë³´ê´€ë¥ </h4>
                            <div class="file-size" id="dctCompressionRatio">-</div>
                        </div>
                        <div class="comparison-item">
                            <div class="icon">âœ¨</div>
                            <h4>ê³µê°„ ì ˆì•½</h4>
                            <div class="file-size" id="dctSavedSpace">-</div>
                        </div>
                    </div>

                    <div class="result" id="dctExplanation">
                        <h4>ğŸ“š ì–´ë–»ê²Œ ì‘ë™í•˜ë‚˜ìš”?</h4>
                        <p id="dctExplanationText">
                            ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ë©´ DCTê°€ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ë³¼ ìˆ˜ ìˆì–´ìš”!
                        </p>
                    </div>

                    <div style="background: #e8f4fd; padding: 20px; border-radius: 10px; margin-top: 20px;">
                        <h4 style="color: #0277bd; margin-bottom: 10px;">ğŸ”¬ DCTì˜ ë¹„ë°€</h4>
                        <p style="line-height: 1.6;">
                            <strong>1ë‹¨ê³„:</strong> ì´ë¯¸ì§€ë¥¼ ì‘ì€ ë¸”ë¡(ë³´í†µ 8x8)ìœ¼ë¡œ ë‚˜ëˆ•ë‹ˆë‹¤.<br>
                            <strong>2ë‹¨ê³„:</strong> ê° ë¸”ë¡ì„ DCTë¡œ ë³€í™˜í•˜ì—¬ ì£¼íŒŒìˆ˜ ì •ë³´ë¥¼ ì–»ìŠµë‹ˆë‹¤.<br>
                            <strong>3ë‹¨ê³„:</strong> ê³ ì£¼íŒŒ(ì„¸ë°€í•œ ë””í…Œì¼)ë¥¼ ì œê±°í•©ë‹ˆë‹¤ - ì‚¬ëŒ ëˆˆì€ ì´ê±¸ ì˜ ëª»ë´ìš”!<br>
                            <strong>4ë‹¨ê³„:</strong> ì—­DCTë¡œ ì´ë¯¸ì§€ë¡œ ë‹¤ì‹œ ë³€í™˜í•©ë‹ˆë‹¤.<br><br>
                            ğŸ’¡ <strong>ì™œ íš¨ê³¼ì ì¼ê¹Œìš”?</strong><br>
                            ì‚¬ëŒì˜ ëˆˆì€ ê¸‰ê²©í•œ ë³€í™”(ê³ ì£¼íŒŒ)ë³´ë‹¤ ì™„ë§Œí•œ ë³€í™”(ì €ì£¼íŒŒ)ì— ë” ë¯¼ê°í•©ë‹ˆë‹¤. 
                            DCTëŠ” ì´ íŠ¹ì„±ì„ ì´ìš©í•´ì„œ ì¤‘ìš”í•œ ì •ë³´ë§Œ ë‚¨ê¸°ê³  ë‚˜ë¨¸ì§€ë¥¼ ë²„ë ¤ íŒŒì¼ í¬ê¸°ë¥¼ ì¤„ì…ë‹ˆë‹¤!
                        </p>
                    </div>
                </div>
                </div>
            </div>

            <!-- ì˜ìƒ ì••ì¶• íƒ­ -->
            <div id="videoTab" class="tab-content">
                <div class="section fade-in">
                    <h2>ğŸ¬ ì˜ìƒ ì••ì¶• ì²´í—˜í•˜ê¸° (MPEG ë°©ì‹)</h2>
                    <p style="margin-bottom: 20px;">
                        ì—°ì†ëœ í”„ë ˆì„ì—ì„œ ë³€í™”ê°€ ìˆëŠ” ë¶€ë¶„ë§Œ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ì—ìš”.
                        ë°°ê²½ì€ ê·¸ëŒ€ë¡œì´ê³  ì‚¬ëŒë§Œ ì›€ì§ì´ë©´ ì‚¬ëŒ ë¶€ë¶„ë§Œ ì €ì¥í•˜ë©´ ë˜ê² ì£ ?
                    </p>

                    <div class="example-box">
                        <h3 style="color: #f5576c; margin-bottom: 15px;">â±ï¸ ì—°ì†ëœ ì¥ë©´ ë§Œë“¤ê¸°</h3>
                        <p>ê° í”„ë ˆì„ì— ê·¸ë¦¼ì„ ê·¸ë¦¬ê³  ë³€í™”ë¥¼ ê°ì§€í•´ë³´ì„¸ìš”!</p>

                        <div class="canvas-container">
                            <div class="canvas-box">
                                <h4>í”„ë ˆì„ 1</h4>
                                <canvas id="frame1Canvas" width="250" height="250"></canvas>
                            </div>
                            <div class="canvas-box">
                                <h4>í”„ë ˆì„ 2</h4>
                                <canvas id="frame2Canvas" width="250" height="250"></canvas>
                            </div>
                        </div>

                        <div style="text-align: center; margin-top: 20px;">
                            <button onclick="clearFrame1()">í”„ë ˆì„ 1 ì§€ìš°ê¸°</button>
                            <button onclick="clearFrame2()">í”„ë ˆì„ 2 ì§€ìš°ê¸°</button>
                            <button onclick="detectChanges()">ğŸ” ë³€í™” ê°ì§€í•˜ê¸°</button>
                        </div>

                        <div id="frameResult"></div>
                    </div>

                    <div class="note">
                        <h4>ğŸ’¡ ì˜ìƒ ì••ì¶•ì˜ ë¹„ë°€!</h4>
                        <p>MPEG ê°™ì€ ì˜ìƒ ì••ì¶•ì€ ì´ì „ í”„ë ˆì„ê³¼ ë¹„êµí•´ì„œ ë³€í•œ ë¶€ë¶„ë§Œ ì €ì¥í•´ìš”. 
                        ê·¸ë˜ì„œ ì •ì§€ëœ ë°°ê²½ì´ ë§ì€ ì˜ìƒì¼ìˆ˜ë¡ ì••ì¶•ì´ ì˜ ë¼ìš”!</p>
                    </div>
                </div>
            </div>

            <!-- ìŒì•… ì••ì¶• íƒ­ -->
            <div id="audioTab" class="tab-content">
                <div class="section fade-in">
                    <h2>ğŸµ ìŒì•… ì••ì¶• ì²´í—˜í•˜ê¸° (MP3 ë°©ì‹)</h2>
                    <p style="margin-bottom: 20px;">
                        ì‚¬ëŒì˜ ê·€ë¡œ ì˜ ë“¤ë¦¬ì§€ ì•ŠëŠ” ì†Œë¦¬ë¥¼ ì œê±°í•˜ëŠ” ë°©ì‹ì´ì—ìš”!
                    </p>

                    <div class="example-box">
                        <h3 style="color: #f5576c; margin-bottom: 15px;">ğŸ‘‚ ì†Œë¦¬ì˜ ì£¼íŒŒìˆ˜</h3>
                        <p>ì‚¬ëŒì€ ì•½ 20Hz ~ 20,000Hz ì‚¬ì´ì˜ ì†Œë¦¬ë¥¼ ë“¤ì„ ìˆ˜ ìˆì–´ìš”.</p>

                        <canvas id="waveCanvas" width="600" height="200"></canvas>

                        <div class="slider-container">
                            <label><strong>ì£¼íŒŒìˆ˜:</strong></label>
                            <input type="range" 
                                   id="freqSlider" 
                                   class="slider" 
                                   min="20" 
                                   max="20000" 
                                   value="440" 
                                   oninput="updateFrequency()">
                            <div class="value-display">
                                <span id="freqValue">440</span> Hz
                            </div>
                        </div>

                        <div style="text-align: center; margin: 20px 0;">
                            <button onclick="playTone()">â–¶ï¸ ì†Œë¦¬ ë“¤ì–´ë³´ê¸° (3ì´ˆ)</button>
                            <button onclick="stopTone()">â¹ï¸ ì •ì§€</button>
                        </div>

                        <div class="warning">
                            <p>âš ï¸ ë†’ì€ ì£¼íŒŒìˆ˜ëŠ” ê·€ê°€ ì•„í”Œ ìˆ˜ ìˆìœ¼ë‹ˆ ë³¼ë¥¨ì„ ë‚®ì¶°ì£¼ì„¸ìš”!</p>
                        </div>
                    </div>

                    <div class="example-box">
                        <h3 style="color: #f5576c; margin-bottom: 15px;">ğŸ’¿ ë¹„íŠ¸ë ˆì´íŠ¸ì™€ ìŒì§ˆ</h3>
                        <p>ë¹„íŠ¸ë ˆì´íŠ¸ê°€ ë†’ì„ìˆ˜ë¡ ìŒì§ˆì´ ì¢‹ì§€ë§Œ íŒŒì¼ í¬ê¸°ë„ ì»¤ì ¸ìš”.</p>

                        <div class="slider-container">
                            <label><strong>ë¹„íŠ¸ë ˆì´íŠ¸:</strong></label>
                            <input type="range" 
                                   id="bitrateSlider" 
                                   class="slider" 
                                   min="64" 
                                   max="320" 
                                   step="32" 
                                   value="128" 
                                   oninput="updateBitrate()">
                            <div class="value-display">
                                <span id="bitrateValue">128</span> kbps
                            </div>
                        </div>

                        <div id="bitrateResult" class="result">
                            <p><strong>128 kbps:</strong> ì¼ë°˜ì ì¸ ìŒì§ˆ, ëŒ€ë¶€ë¶„ ì‚¬ëŒë“¤ì´ ë§Œì¡±</p>
                            <p><strong>ì˜ˆìƒ íŒŒì¼ í¬ê¸° (3ë¶„ ê³¡):</strong> ì•½ 2.8 MB</p>
                        </div>
                    </div>

                    <div class="success">
                        <h4>ğŸ’¡ MP3ì˜ ë¹„ë°€!</h4>
                        <p>MP3ëŠ” ì‚¬ëŒì˜ ê·€ë¡œ ì˜ ë“¤ë¦¬ì§€ ì•ŠëŠ” ì£¼íŒŒìˆ˜ë‚˜ ì‘ì€ ì†Œë¦¬ë¥¼ ì œê±°í•´ìš”. 
                        ê·¸ë˜ì„œ ì›ë³¸ CD ìŒì§ˆë³´ë‹¤ 10ë¶„ì˜ 1 ì •ë„ë¡œ ì‘ì•„ì ¸ë„ ê±°ì˜ ì°¨ì´ë¥¼ ëŠë‚„ ìˆ˜ ì—†ë‹µë‹ˆë‹¤!</p>
                    </div>
                </div>
            </div>

            <div class="comparison fade-in">
                <div class="comparison-item">
                    <div class="icon">ğŸ–¼ï¸</div>
                    <h4>ì´ë¯¸ì§€ ì••ì¶•</h4>
                    <p>PNG, GIF: ìƒ‰ìƒ ìˆ˜ ì œí•œ</p>
                    <p class="file-size">2~10ë°° ì••ì¶•</p>
                </div>
                <div class="comparison-item">
                    <div class="icon">ğŸ¬</div>
                    <h4>ì˜ìƒ ì••ì¶•</h4>
                    <p>MPEG: ë³€í™” ë¶€ë¶„ë§Œ ì €ì¥</p>
                    <p class="file-size">10~50ë°° ì••ì¶•</p>
                </div>
                <div class="comparison-item">
                    <div class="icon">ğŸµ</div>
                    <h4>ìŒì•… ì••ì¶•</h4>
                    <p>MP3: ì•ˆ ë“¤ë¦¬ëŠ” ì†Œë¦¬ ì œê±°</p>
                    <p class="file-size">10~12ë°° ì••ì¶•</p>
                </div>
            </div>
        </div>
        
        <!-- í™ˆìœ¼ë¡œ ë²„íŠ¼ -->
        <div style="text-align: center; padding: 30px;">
            <a href="index.html" class="home-button" style="font-size: 1.1em; padding: 12px 30px;">
                ğŸ  í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </a>
        </div>

    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let isDrawing = false;
        let currentColor = 'black';
        let audioContext = null;
        let oscillator = null;
        let gainNode = null;

        // ìº”ë²„ìŠ¤ ì„¤ì •
        const drawCanvas = document.getElementById('drawCanvas');
        const drawCtx = drawCanvas.getContext('2d');
        const compressedCanvas = document.getElementById('compressedCanvas');
        const compressedCtx = compressedCanvas.getContext('2d');

        // ì´ˆê¸° ìº”ë²„ìŠ¤ ë°°ê²½ìƒ‰ ì„¤ì •
        drawCtx.fillStyle = 'white';
        drawCtx.fillRect(0, 0, drawCanvas.width, drawCanvas.height);
        compressedCtx.fillStyle = 'white';
        compressedCtx.fillRect(0, 0, compressedCanvas.width, compressedCanvas.height);

        // ê·¸ë¦¬ê¸° ì´ë²¤íŠ¸
        drawCanvas.addEventListener('mousedown', startDrawing);
        drawCanvas.addEventListener('mousemove', draw);
        drawCanvas.addEventListener('mouseup', stopDrawing);
        drawCanvas.addEventListener('mouseout', stopDrawing);

        // í„°ì¹˜ ì´ë²¤íŠ¸
        drawCanvas.addEventListener('touchstart', handleTouchStart);
        drawCanvas.addEventListener('touchmove', handleTouchMove);
        drawCanvas.addEventListener('touchend', stopDrawing);

        function handleTouchStart(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const rect = drawCanvas.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            isDrawing = true;
            drawCtx.beginPath();
            drawCtx.moveTo(x, y);
        }

        function handleTouchMove(e) {
            if (!isDrawing) return;
            e.preventDefault();
            const touch = e.touches[0];
            const rect = drawCanvas.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            drawCtx.lineTo(x, y);
            drawCtx.strokeStyle = currentColor;
            drawCtx.lineWidth = 3;
            drawCtx.lineCap = 'round';
            drawCtx.stroke();
        }

        function startDrawing(e) {
            isDrawing = true;
            const rect = drawCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            drawCtx.beginPath();
            drawCtx.moveTo(x, y);
        }

        function draw(e) {
            if (!isDrawing) return;
            const rect = drawCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            drawCtx.lineTo(x, y);
            drawCtx.strokeStyle = currentColor;
            drawCtx.lineWidth = 3;
            drawCtx.lineCap = 'round';
            drawCtx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
            drawCtx.beginPath();
        }

        function selectColor(color, element) {
            currentColor = color;
            document.querySelectorAll('.color-option').forEach(el => {
                el.classList.remove('selected');
            });
            element.classList.add('selected');
        }

        function clearCanvas() {
            drawCtx.fillStyle = 'white';
            drawCtx.fillRect(0, 0, drawCanvas.width, drawCanvas.height);
            compressedCtx.fillStyle = 'white';
            compressedCtx.fillRect(0, 0, compressedCanvas.width, compressedCanvas.height);
            document.getElementById('colorResult').innerHTML = '';
        }

        // 5.htmlì˜ ë¬´ì§€ê°œ ê·¸ë¦¬ê¸° í•¨ìˆ˜ ì ìš©
        function drawRainbow() {
            const colors = ['red', 'orange', 'yellow', 'green', 'blue', 'indigo', 'violet'];
            const h = drawCanvas.height / colors.length;

            colors.forEach((c, i) => {
                drawCtx.fillStyle = c;
                drawCtx.fillRect(0, i * h, drawCanvas.width, h);
            });
        }

        function updateColorCount() {
            const value = document.getElementById('colorCountSlider').value;
            const colorCount = Math.pow(2, value);
            document.getElementById('colorCountValue').textContent = colorCount;
        }

        // 5.htmlì˜ ì •í™•í•œ ë¬´ì§€ê°œ íŒ”ë ˆíŠ¸ ì‚¬ìš©
        const RAINBOW_PALETTE = [
            [255, 0, 0],      // red
            [255, 165, 0],    // orange
            [255, 255, 0],    // yellow
            [0, 128, 0],      // green
            [0, 0, 255],      // blue
            [75, 0, 130],     // indigo
            [238, 130, 238]   // violet
        ];

        function getPalette(colorCount) {
            if (colorCount >= 8) {
                return RAINBOW_PALETTE;
            } else if (colorCount === 4) {
                return [
                    [255, 0, 0],    // red
                    [255, 255, 0],  // yellow
                    [0, 128, 0],    // green
                    [0, 0, 255]     // blue
                ];
            } else {
                return [
                    [0, 0, 0],      // black
                    [255, 255, 255] // white
                ];
            }
        }

        function findClosestColor(r, g, b, palette) {
            let minDistance = Infinity;
            let closestColor = palette[0];

            for (const [pr, pg, pb] of palette) {
                const distance = Math.pow(r - pr, 2) + Math.pow(g - pg, 2) + Math.pow(b - pb, 2);
                if (distance < minDistance) {
                    minDistance = distance;
                    closestColor = [pr, pg, pb];
                }
            }

            return closestColor;
        }

        function isExactMatch(r, g, b, palette) {
            for (const [pr, pg, pb] of palette) {
                if (r === pr && g === pg && b === pb) {
                    return true;
                }
            }
            return false;
        }

        function compressColors() {
            const canvas = document.getElementById('drawCanvas');
            const compressedCanvas = document.getElementById('compressedCanvas');
            const compressedCtx = compressedCanvas.getContext('2d');

            compressedCtx.drawImage(canvas, 0, 0);

            const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);
            const data = imageData.data;
            
            const sliderValue = parseInt(document.getElementById('colorCountSlider').value);
            const colorCount = Math.pow(2, sliderValue);
            
            let actualColors, levelsText;

            if (colorCount === 2) {
                actualColors = 2;
                levelsText = 'í‘ë°± (2ìƒ‰)';
            } else if (colorCount === 4) {
                actualColors = 4;
                levelsText = 'ê¸°ë³¸ 4ìƒ‰';
            } else {
                actualColors = colorCount;
                levelsText = `ë¬´ì§€ê°œ ${colorCount}ìƒ‰`;
            }

            const palette = getPalette(colorCount);

            for (let i = 0; i < data.length; i += 4) {
                const r = data[i];
                const g = data[i + 1];
                const b = data[i + 2];

                if (isExactMatch(r, g, b, palette)) continue;

                const [nr, ng, nb] = findClosestColor(r, g, b, palette);
                data[i] = nr;
                data[i + 1] = ng;
                data[i + 2] = nb;
            }

            compressedCtx.putImageData(imageData, 0, 0);
            
            const originalColors = 16777216;
            const imagePixels = canvas.width * canvas.height;
            const bitsPerPixel = Math.ceil(Math.log2(actualColors));
            const dataSizeReduction = ((1 - bitsPerPixel / 24) * 100).toFixed(1);
            const colorReductionFactor = Math.round(originalColors / actualColors).toLocaleString();
            const originalSizeBytes = imagePixels * 3;
            const compressedSizeBytes = Math.ceil((imagePixels * bitsPerPixel) / 8);
            const originalSize = (originalSizeBytes / (1024 * 1024)).toFixed(2);
            const compressedSize = (compressedSizeBytes / (1024 * 1024)).toFixed(2);
            const savedSizeMB = ((originalSizeBytes - compressedSizeBytes) / (1024 * 1024)).toFixed(2);
            const barWidth = Math.max(5, (compressedSizeBytes / originalSizeBytes * 100)).toFixed(1);

            document.getElementById('colorResult').innerHTML = `
                <div class="result">
                    <h4>ì••ì¶• ê²°ê³¼:</h4>
                    <p><strong>ì›ë³¸:</strong> ì•½ 1,677ë§Œ ê°€ì§€ ìƒ‰ìƒ ì‚¬ìš© ê°€ëŠ¥ (24ë¹„íŠ¸)</p>
                    <p><strong>ì••ì¶• í›„:</strong> ì•½ ${actualColors.toLocaleString()}ê°€ì§€ ìƒ‰ìƒ (${bitsPerPixel}ë¹„íŠ¸, ${levelsText})</p>
                    <p><strong>ìƒ‰ìƒ ê°ì†Œ:</strong> ${colorReductionFactor}ë¶„ì˜ 1ë¡œ ì¤„ì–´ë“¦!</p>
                    <p class="compression-ratio">ë°ì´í„° í¬ê¸° ${dataSizeReduction}% ì ˆì•½! ğŸ‰</p>
                    <p style="margin-top:10px;">ğŸ’¡ 24ë¹„íŠ¸ â†’ ${bitsPerPixel}ë¹„íŠ¸ë¡œ ì¤„ì–´ì„œ íŒŒì¼ì´ ì‘ì•„ì ¸ìš”!</p>
                </div>
                
                <div class="compression-visual">
                    <h4 style="color: #f5576c; margin-bottom: 15px;">ğŸ“Š íŒŒì¼ í¬ê¸° ë¹„êµ (ë¬´ì••ì¶• ë¹„íŠ¸ë§µ ê¸°ì¤€)</h4>
                    
                    <div class="bar-container">
                        <div class="bar-label">
                            <span>ì›ë³¸</span>
                            <span>${originalSize} MB</span>
                        </div>
                        <div class="bar bar-original">100%</div>
                    </div>
                    
                    <div class="bar-container">
                        <div class="bar-label">
                            <span>ì••ì¶• í›„</span>
                            <span>${compressedSize} MB</span>
                        </div>
                        <div class="bar bar-compressed" style="width: ${barWidth}%">${barWidth}%</div>
                    </div>
                    
                    <p style="margin-top: 15px; text-align: center; font-size: 1.2em; color: #059669; font-weight: bold;">
                        ğŸ’¾ ${savedSizeMB} MB ì ˆì•½! (${dataSizeReduction}% ì••ì¶•)
                    </p>
                    <p style="margin-top: 10px; text-align: center; font-size: 0.9em; color: #666;">
                        â€» PNGë‚˜ GIF í˜•ì‹ì€ íŒ”ë ˆíŠ¸ ë°©ì‹ìœ¼ë¡œ ìƒ‰ìƒì„ ì œí•œí•˜ì—¬ íŒŒì¼ í¬ê¸°ë¥¼ ì¤„ì—¬ìš”!
                    </p>
                </div>
            `;
        }

        // ì˜ìƒ ì••ì¶• ê´€ë ¨ í•¨ìˆ˜
        const frame1Canvas = document.getElementById('frame1Canvas');
        const frame2Canvas = document.getElementById('frame2Canvas');
        const frame1Ctx = frame1Canvas.getContext('2d');
        const frame2Ctx = frame2Canvas.getContext('2d');

        frame1Ctx.fillStyle = 'white';
        frame1Ctx.fillRect(0, 0, frame1Canvas.width, frame1Canvas.height);
        frame2Ctx.fillStyle = 'white';
        frame2Ctx.fillRect(0, 0, frame2Canvas.width, frame2Canvas.height);

        let currentFrame = 1;

        frame1Canvas.addEventListener('mousedown', (e) => {
            currentFrame = 1;
            startFrameDrawing(e, frame1Canvas, frame1Ctx);
        });
        frame1Canvas.addEventListener('mousemove', (e) => {
            if (currentFrame === 1) drawFrame(e, frame1Canvas, frame1Ctx);
        });
        frame1Canvas.addEventListener('mouseup', stopDrawing);

        frame2Canvas.addEventListener('mousedown', (e) => {
            currentFrame = 2;
            startFrameDrawing(e, frame2Canvas, frame2Ctx);
        });
        frame2Canvas.addEventListener('mousemove', (e) => {
            if (currentFrame === 2) drawFrame(e, frame2Canvas, frame2Ctx);
        });
        frame2Canvas.addEventListener('mouseup', stopDrawing);

        function startFrameDrawing(e, canvas, ctx) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            ctx.beginPath();
            ctx.moveTo(x, y);
        }

        function drawFrame(e, canvas, ctx) {
            if (!isDrawing) return;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            ctx.lineTo(x, y);
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.stroke();
        }

        function clearFrame1() {
            frame1Ctx.fillStyle = 'white';
            frame1Ctx.fillRect(0, 0, frame1Canvas.width, frame1Canvas.height);
        }

        function clearFrame2() {
            frame2Ctx.fillStyle = 'white';
            frame2Ctx.fillRect(0, 0, frame2Canvas.width, frame2Canvas.height);
        }

        function detectChanges() {
            const canvas1 = document.getElementById('frame1Canvas');
            const canvas2 = document.getElementById('frame2Canvas');
            const ctx1 = canvas1.getContext('2d');
            const ctx2 = canvas2.getContext('2d');
            
            const data1 = ctx1.getImageData(0, 0, canvas1.width, canvas1.height);
            const data2 = ctx2.getImageData(0, 0, canvas2.width, canvas2.height);
            
            let changedPixels = 0;
            let totalPixels = canvas1.width * canvas1.height;
            
            for (let i = 0; i < data1.data.length; i += 4) {
                if (data1.data[i] !== data2.data[i] ||
                    data1.data[i + 1] !== data2.data[i + 1] ||
                    data1.data[i + 2] !== data2.data[i + 2]) {
                    changedPixels++;
                }
            }
            
            const changePercent = ((changedPixels / totalPixels) * 100).toFixed(1);
            const savedPercent = (100 - parseFloat(changePercent)).toFixed(1);
            
            document.getElementById('frameResult').innerHTML = `
                <div class="result">
                    <h4>ë³€í™” ê°ì§€ ê²°ê³¼:</h4>
                    <p><strong>ì „ì²´ í”½ì…€:</strong> ${totalPixels.toLocaleString()}ê°œ</p>
                    <p><strong>ë³€í™”ëœ í”½ì…€:</strong> ${changedPixels.toLocaleString()}ê°œ (${changePercent}%)</p>
                    <p><strong>ê°™ì€ í”½ì…€:</strong> ${(totalPixels - changedPixels).toLocaleString()}ê°œ (${savedPercent}%)</p>
                    <p class="compression-ratio">ì•½ ${savedPercent}%ì˜ ë°ì´í„° ì ˆì•½ ê°€ëŠ¥! ğŸ‰</p>
                    <p style="margin-top:10px;">ğŸ’¡ MPEGëŠ” ë³€í™”ëœ ${changePercent}%ì˜ í”½ì…€ë§Œ ì €ì¥í•´ìš”!</p>
                </div>
            `;
        }

        // ìŒì•… ì••ì¶• ê´€ë ¨ í•¨ìˆ˜
        function drawWaveform() {
            const canvas = document.getElementById('waveCanvas');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = '#f0f0f0';
            ctx.fillRect(0, 0, width, height);
            
            ctx.strokeStyle = '#f5576c';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            const frequency = document.getElementById('freqSlider').value;
            const amplitude = height / 3;
            const centerY = height / 2;
            const wavelength = width / (frequency / 100);
            
            for (let x = 0; x < width; x++) {
                const y = centerY + amplitude * Math.sin((x / wavelength) * Math.PI * 2);
                if (x === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            
            ctx.stroke();
            
            ctx.fillStyle = '#666';
            ctx.font = '14px Malgun Gothic';
            ctx.fillText('20Hz', 10, height - 10);
            ctx.fillText('20,000Hz', width - 70, height - 10);
        }

        function updateFrequency() {
            const value = document.getElementById('freqSlider').value;
            document.getElementById('freqValue').textContent = value + ' Hz';
            drawWaveform();
        }

        function playTone() {
            stopTone();
            
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            oscillator = audioContext.createOscillator();
            gainNode = audioContext.createGain();
            
            const frequency = document.getElementById('freqSlider').value;
            oscillator.frequency.value = frequency;
            oscillator.type = 'sine';
            
            gainNode.gain.value = 0.3;
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.start();
            
            setTimeout(stopTone, 3000);
        }

        function stopTone() {
            if (oscillator) {
                oscillator.stop();
                oscillator = null;
            }
            if (audioContext) {
                audioContext.close();
                audioContext = null;
            }
        }

        function updateBitrate() {
            const value = document.getElementById('bitrateSlider').value;
            document.getElementById('bitrateValue').textContent = value + ' kbps';
            
            const fileSize = (value * 180 / 8 / 1024).toFixed(1);
            
            let quality = '';
            if (value <= 96) quality = 'ë‚®ì€ ìŒì§ˆ, ì‘ì€ íŒŒì¼';
            else if (value <= 192) quality = 'ì¼ë°˜ì ì¸ ìŒì§ˆ, ëŒ€ë¶€ë¶„ ì‚¬ëŒë“¤ì´ ë§Œì¡±';
            else quality = 'ë†’ì€ ìŒì§ˆ, ìŒì•… ì• í˜¸ê°€ìš©';
            
            document.getElementById('bitrateResult').innerHTML = `
                <p><strong>${value} kbps:</strong> ${quality}</p>
                <p><strong>ì˜ˆìƒ íŒŒì¼ í¬ê¸° (3ë¶„ ê³¡):</strong> ì•½ ${fileSize} MB</p>
            `;
        }

        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // ì´ˆê¸°í™”        
        window.addEventListener('DOMContentLoaded', function() {
            drawWaveform();
            updateBitrate();
            drawCompressionChart();

            // DCT ì´ˆê¸° ì´ë¯¸ì§€ ë¡œë“œ
            loadInitialImage();
        });

        // ===== DCT ê´€ë ¨ ë³€ìˆ˜ ë° í•¨ìˆ˜ =====
        let uploadedImage = null;
        let currentQuality = 50;
        let currentBlockSize = 8;

        function loadInitialImage() {
            console.log('ğŸ–¼ï¸ ì´ˆê¸° ì´ë¯¸ì§€ ë¡œë”© ì‹œì‘...');
            
            // fetchë¥¼ ì‚¬ìš©í•´ì„œ ì´ë¯¸ì§€ë¥¼ blobìœ¼ë¡œ ê°€ì ¸ì˜¨ í›„ FileReaderë¡œ ë³€í™˜
            fetch('src/ex01.png')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨');
                    }
                    return response.blob();
                })
                .then(blob => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = new Image();
                        img.onload = function() {
                            console.log('âœ… ì´ë¯¸ì§€ ë¡œë“œ ì„±ê³µ!', img.width, 'x', img.height);
                            uploadedImage = img;
                            processImage();
                        };
                        img.src = e.target.result;  // base64 ë°ì´í„°
                    };
                    reader.readAsDataURL(blob);
                })
                .catch(error => {
                    console.error('âŒ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:', error);
                    console.log('ğŸ’¡ ì›¹ ì„œë²„ì—ì„œ ì‹¤í–‰í•˜ê±°ë‚˜ ì´ë¯¸ì§€ ê²½ë¡œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”!');
                });
        }

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    uploadedImage = img;
                    processImage();
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function processImage() {
            console.log('ğŸ”„ processImage í˜¸ì¶œë¨');
            
            if (!uploadedImage) {
                console.error('âŒ uploadedImageê°€ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            console.log('ğŸ“Š uploadedImage:', uploadedImage.width, 'x', uploadedImage.height);
            
            const originalCanvas = document.getElementById('originalCanvas');
            const compressedCanvas = document.getElementById('dctcompressedCanvas');
            
            console.log('ğŸ¨ originalCanvas:', originalCanvas);
            console.log('ğŸ¨ compressedCanvas:', compressedCanvas);
            
            if (!originalCanvas || !compressedCanvas) {
                console.error('âŒ ìº”ë²„ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            // ì›ë³¸ ì´ë¯¸ì§€ ê·¸ë¦¬ê¸°
            const ctx = originalCanvas.getContext('2d');
            originalCanvas.width = uploadedImage.width;
            originalCanvas.height = uploadedImage.height;
            ctx.drawImage(uploadedImage, 0, 0);
            console.log('âœ… ì›ë³¸ ì´ë¯¸ì§€ ê·¸ë¦¬ê¸° ì™„ë£Œ');
            
            // DCT ì••ì¶• ì ìš©
            console.log('ğŸ”„ DCT ì••ì¶• ì‹œì‘...');
            const result = applyDCTCompression(originalCanvas, currentQuality / 100, currentBlockSize);
            console.log('âœ… DCT ì••ì¶• ì™„ë£Œ:', result);
            
            // ì••ì¶•ëœ ì´ë¯¸ì§€ ê·¸ë¦¬ê¸°
            compressedCanvas.width = uploadedImage.width;
            compressedCanvas.height = uploadedImage.height;
            const compressedCtx = compressedCanvas.getContext('2d');
            compressedCtx.putImageData(result.imageData, 0, 0);
            console.log('âœ… ì••ì¶•ëœ ì´ë¯¸ì§€ ê·¸ë¦¬ê¸° ì™„ë£Œ');
            
            // ì£¼íŒŒìˆ˜ ì‹œê°í™”
            console.log('ğŸ”„ ì£¼íŒŒìˆ˜ ì‹œê°í™” ì‹œì‘...');
            visualizeFrequency(result.frequencyData);
            console.log('âœ… ì£¼íŒŒìˆ˜ ì‹œê°í™” ì™„ë£Œ');
            
            // í†µê³„ ì—…ë°ì´íŠ¸
            updateDCTStats(result.stats);
            updateExplanation();
            console.log('âœ… processImage ì™„ë£Œ!');
        }

        function updateQuality() {
            const value = document.getElementById('qualitySlider').value;
            currentQuality = value;
            document.getElementById('qualityValue').textContent = value + '%';
            if (uploadedImage) processImage();
        }

        function updateBlockSize() {
            const value = document.getElementById('blockSizeSlider').value;
            currentBlockSize = parseInt(value);
            document.getElementById('blockSizeValue').textContent = value + 'x' + value;
            if (uploadedImage) processImage();
        }

        function applyDCTCompression(canvas, keepRatio, blockSize) {
            const ctx = canvas.getContext('2d');
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            const width = canvas.width;
            const height = canvas.height;
            
            const rChannel = new Float32Array(width * height);
            const gChannel = new Float32Array(width * height);
            const bChannel = new Float32Array(width * height);
            
            for (let i = 0; i < data.length; i += 4) {
                const idx = i / 4;
                rChannel[idx] = data[i];
                gChannel[idx] = data[i + 1];
                bChannel[idx] = data[i + 2];
            }
            
            const newImageData = ctx.createImageData(width, height);
            const newData = newImageData.data;
            const frequencyData = [];
            let totalCoefficients = 0;
            let keptCoefficients = 0;
            
            for (let y = 0; y < height; y += blockSize) {
                for (let x = 0; x < width; x += blockSize) {
                    const rBlock = extractBlock(rChannel, x, y, blockSize, width, height);
                    const gBlock = extractBlock(gChannel, x, y, blockSize, width, height);
                    const bBlock = extractBlock(bChannel, x, y, blockSize, width, height);
                    
                    const rDct = performDCT(rBlock, blockSize);
                    const gDct = performDCT(gBlock, blockSize);
                    const bDct = performDCT(bBlock, blockSize);
                    
                    const rQuantized = quantizeBlock(rDct, blockSize, keepRatio);
                    const gQuantized = quantizeBlock(gDct, blockSize, keepRatio);
                    const bQuantized = quantizeBlock(bDct, blockSize, keepRatio);
                    
                    const rIdct = performIDCT(rQuantized, blockSize);
                    const gIdct = performIDCT(gQuantized, blockSize);
                    const bIdct = performIDCT(bQuantized, blockSize);
                    
                    insertColorBlock(newData, rIdct, gIdct, bIdct, x, y, blockSize, width, height);
                    
                    totalCoefficients += blockSize * blockSize * 3;
                    keptCoefficients += (countNonZero(rQuantized) + countNonZero(gQuantized) + countNonZero(bQuantized));
                    
                    if (frequencyData.length === 0 && x < 200 && y < 200) {
                        frequencyData.push({dct: rDct, quantized: rQuantized});
                    }
                }
            }
            
            const compressionRatio = (keptCoefficients / totalCoefficients * 100).toFixed(1);
            
            return {
                imageData: newImageData,
                frequencyData: frequencyData,
                stats: {
                    originalSize: (width * height * 3 / 1024).toFixed(1),
                    compressedSize: (width * height * 3 * keptCoefficients / totalCoefficients / 1024).toFixed(1),
                    ratio: compressionRatio,
                    saved: (100 - parseFloat(compressionRatio)).toFixed(1)
                }
            };
        }
        
        function extractBlock(data, x, y, blockSize, width, height) {
            const block = new Float32Array(blockSize * blockSize);
            for (let j = 0; j < blockSize; j++) {
                for (let i = 0; i < blockSize; i++) {
                    const px = Math.min(x + i, width - 1);
                    const py = Math.min(y + j, height - 1);
                    block[j * blockSize + i] = data[py * width + px];
                }
            }
            return block;
        }
        
        function performDCT(block, N) {
            const dct = new Float32Array(N * N);
            const pi = Math.PI;
            
            for (let v = 0; v < N; v++) {
                for (let u = 0; u < N; u++) {
                    let sum = 0;
                    for (let y = 0; y < N; y++) {
                        for (let x = 0; x < N; x++) {
                            const pixel = block[y * N + x] - 128;
                            sum += pixel * 
                                   Math.cos((2 * x + 1) * u * pi / (2 * N)) *
                                   Math.cos((2 * y + 1) * v * pi / (2 * N));
                        }
                    }
                    
                    const cu = u === 0 ? 1 / Math.sqrt(2) : 1;
                    const cv = v === 0 ? 1 / Math.sqrt(2) : 1;
                    dct[v * N + u] = 0.25 * cu * cv * sum;
                }
            }
            
            return dct;
        }
        
        function quantizeBlock(dctBlock, N, keepRatio) {
            const quantized = new Float32Array(N * N);
            const keepCount = Math.floor(N * N * keepRatio);
            
            const zigzag = generateZigzagOrder(N);
            const values = [];
            
            for (let i = 0; i < N * N; i++) {
                const idx = zigzag[i];
                values.push({value: Math.abs(dctBlock[idx]), index: idx, original: dctBlock[idx]});
            }
            
            for (let i = 0; i < Math.min(keepCount, values.length); i++) {
                quantized[values[i].index] = values[i].original;
            }
            
            return quantized;
        }
        
        function generateZigzagOrder(N) {
            const order = [];
            for (let sum = 0; sum < 2 * N; sum++) {
                if (sum % 2 === 0) {
                    for (let y = Math.min(sum, N - 1); y >= Math.max(0, sum - N + 1); y--) {
                        const x = sum - y;
                        if (x < N && y < N) {
                            order.push(y * N + x);
                        }
                    }
                } else {
                    for (let x = Math.min(sum, N - 1); x >= Math.max(0, sum - N + 1); x--) {
                        const y = sum - x;
                        if (x < N && y < N) {
                            order.push(y * N + x);
                        }
                    }
                }
            }
            return order;
        }
        
        function performIDCT(dctBlock, N) {
            const block = new Float32Array(N * N);
            const pi = Math.PI;
            
            for (let y = 0; y < N; y++) {
                for (let x = 0; x < N; x++) {
                    let sum = 0;
                    for (let v = 0; v < N; v++) {
                        for (let u = 0; u < N; u++) {
                            const cu = u === 0 ? 1 / Math.sqrt(2) : 1;
                            const cv = v === 0 ? 1 / Math.sqrt(2) : 1;
                            sum += cu * cv * dctBlock[v * N + u] *
                                   Math.cos((2 * x + 1) * u * pi / (2 * N)) *
                                   Math.cos((2 * y + 1) * v * pi / (2 * N));
                        }
                    }
                    block[y * N + x] = Math.max(0, Math.min(255, sum * 0.25 + 128));
                }
            }
            
            return block;
        }
        
        function insertColorBlock(data, rBlock, gBlock, bBlock, x, y, blockSize, width, height) {
            for (let j = 0; j < blockSize; j++) {
                for (let i = 0; i < blockSize; i++) {
                    const px = x + i;
                    const py = y + j;
                    if (px < width && py < height) {
                        const idx = (py * width + px) * 4;
                        data[idx] = rBlock[j * blockSize + i];
                        data[idx + 1] = gBlock[j * blockSize + i];
                        data[idx + 2] = bBlock[j * blockSize + i];
                        data[idx + 3] = 255;
                    }
                }
            }
        }
        
        function countNonZero(arr) {
            let count = 0;
            for (let i = 0; i < arr.length; i++) {
                if (Math.abs(arr[i]) > 0.1) count++;
            }
            return count;
        }
        
        function visualizeFrequency(frequencyData) {
            const canvas = document.getElementById('frequencyCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            
            if (frequencyData.length === 0) return;
            
            const N = currentBlockSize;
            const cellSize = Math.min(400 / N, 50);
            canvas.width = N * cellSize;
            canvas.height = N * cellSize;
            
            const dct = frequencyData[0].quantized;
            
            let max = 0;
            for (let i = 0; i < dct.length; i++) {
                max = Math.max(max, Math.abs(dct[i]));
            }
            
            for (let y = 0; y < N; y++) {
                for (let x = 0; x < N; x++) {
                    const value = dct[y * N + x];
                    const normalized = Math.abs(value) / max;
                    const brightness = Math.floor(normalized * 255);
                    
                    if (Math.abs(value) < 0.1) {
                        ctx.fillStyle = '#f0f0f0';
                    } else {
                        ctx.fillStyle = `rgb(${255-brightness}, ${255-brightness}, 255)`;
                    }
                    
                    ctx.fillRect(x * cellSize, y * cellSize, cellSize - 1, cellSize - 1);
                    
                    if (N <= 16) {
                        ctx.fillStyle = normalized > 0.5 ? 'white' : 'black';
                        ctx.font = `${cellSize/3}px monospace`;
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText(
                            Math.abs(value) < 0.1 ? '0' : Math.round(value),
                            x * cellSize + cellSize/2,
                            y * cellSize + cellSize/2
                        );
                    }
                }
            }
            
            ctx.strokeStyle = '#ff0000';
            ctx.lineWidth = 3;
            ctx.strokeRect(0, 0, cellSize * 3, cellSize * 3);
            
            ctx.font = '14px bold sans-serif';
            ctx.fillStyle = '#ff0000';
            ctx.fillText('ì €ì£¼íŒŒ', 5, 20);
            ctx.fillText('(ì¤‘ìš”!)', 5, 40);
        }
        
        function updateDCTStats(stats) {
            document.getElementById('dctOriginalSize').textContent = stats.originalSize + ' KB';
            document.getElementById('dctCompressedSize').textContent = stats.compressedSize + ' KB';
            document.getElementById('dctCompressionRatio').textContent = stats.ratio + '%';
            document.getElementById('dctSavedSpace').textContent = stats.saved + '%';
        }
        
        function updateExplanation() {
            const quality = currentQuality;
            const blockSize = currentBlockSize;
            
            let text = `í˜„ì¬ ì´ë¯¸ì§€ë¥¼ ${blockSize}x${blockSize} í¬ê¸°ì˜ ë¸”ë¡ìœ¼ë¡œ ë‚˜ëˆ„ê³ , RGB ê° ìƒ‰ìƒ ì±„ë„ì— ë…ë¦½ì ìœ¼ë¡œ DCTë¥¼ ì ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. `;
            
            if (quality >= 70) {
                text += `í’ˆì§ˆ ${quality}%ëŠ” ë†’ì€ í’ˆì§ˆë¡œ, ëŒ€ë¶€ë¶„ì˜ ì£¼íŒŒìˆ˜ ì„±ë¶„ì„ ìœ ì§€í•˜ê³  ìˆì–´ ì›ë³¸ê³¼ ê±°ì˜ êµ¬ë³„ì´ ì•ˆ ë©ë‹ˆë‹¤. `;
            } else if (quality >= 40) {
                text += `í’ˆì§ˆ ${quality}%ëŠ” ì¤‘ê°„ í’ˆì§ˆë¡œ, ì¤‘ìš”í•œ ì €ì£¼íŒŒ ì„±ë¶„ì€ ìœ ì§€í•˜ë©´ì„œ ê³ ì£¼íŒŒ(ì„¸ë°€í•œ ë””í…Œì¼)ëŠ” ì¼ë¶€ ì œê±°í•©ë‹ˆë‹¤. `;
            } else {
                text += `í’ˆì§ˆ ${quality}%ëŠ” ë‚®ì€ í’ˆì§ˆë¡œ, ì €ì£¼íŒŒ ì„±ë¶„ë§Œ ë‚¨ê¸°ê³  ëŒ€ë¶€ë¶„ì˜ ê³ ì£¼íŒŒë¥¼ ì œê±°í•˜ì—¬ ë­‰ê°œì§„ ëŠë‚Œì´ ë‚©ë‹ˆë‹¤. `;
            }
            
            text += `\n\nğŸ¨ ê°€ìš´ë° ì´ë¯¸ì§€(ì£¼íŒŒìˆ˜ ì˜ì—­)ì—ì„œ ì™¼ìª½ ìœ„ ëª¨ì„œë¦¬ì˜ ë¹¨ê°„ ë°•ìŠ¤ê°€ "ì €ì£¼íŒŒ" ì˜ì—­ì…ë‹ˆë‹¤. ì´ ë¶€ë¶„ì´ ì´ë¯¸ì§€ì˜ ì „ì²´ì ì¸ ìƒ‰ìƒê³¼ ë°ê¸°ë¥¼ ë‹´ë‹¹í•˜ë©°, ì‚¬ëŒ ëˆˆì— ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤. ë‚˜ë¨¸ì§€ ì˜ì—­ì€ ì„¸ë°€í•œ ë””í…Œì¼(ê³ ì£¼íŒŒ)ì„ ë‹´ë‹¹í•˜ëŠ”ë°, ì´ ë¶€ë¶„ì„ ì¤„ì—¬ë„ ìš°ë¦¬ ëˆˆì€ í¬ê²Œ ì°¨ì´ë¥¼ ëª» ëŠë‚ë‹ˆë‹¤!\n\nğŸ’¡ ì‹¤ì œ JPEG ì••ì¶•ì€ ë¹¨ê°•(R), ì´ˆë¡(G), íŒŒë‘(B) ê° ì±„ë„ì— DCTë¥¼ ì ìš©í•´ì„œ ì»¬ëŸ¬ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.`;
            
            document.getElementById('dctExplanationText').textContent = text;
        }

        // ì´ë¯¸ì§€ ë¹„êµ ê´€ë ¨ í•¨ìˆ˜
        function showImageDetail(filename, colorName, sizeKB) {
            const originalSize = 1820; // ì›ë³¸ PNG í¬ê¸°
            const compressionRatio = ((1 - sizeKB / originalSize) * 100).toFixed(1);
            const sizeRatio = (originalSize / sizeKB).toFixed(1);

            document.getElementById('imageDetailResult').innerHTML = `
                <div class="detail-comparison fade-in">
                    <div class="detail-image">
                        <h4 style="color: #f5576c; margin-bottom: 10px;">ì›ë³¸ (PNG)</h4>
                        <img src="src/1.png" alt="ì›ë³¸">
                        <p style="margin-top: 10px;"><strong>24ë¹„íŠ¸ (1,677ë§Œìƒ‰)</strong></p>
                        <p style="font-size: 1.2em; color: #059669; font-weight: bold;">1.82 MB</p>
                    </div>
                    <div style="display: flex; align-items: center; justify-content: center; font-size: 2em; color: #f5576c;">
                        â†’
                    </div>
                    <div class="detail-image">
                        <h4 style="color: #f5576c; margin-bottom: 10px;">${colorName}</h4>
                        <img src="${filename}" alt="${colorName}">
                        <p style="margin-top: 10px;"><strong>${colorName}</strong></p>
                        <p style="font-size: 1.2em; color: #059669; font-weight: bold;">${sizeKB} KB</p>
                    </div>
                </div>
                <div class="result">
                    <h4>ğŸ“Š ì••ì¶• ë¶„ì„:</h4>
                    <p><strong>íŒŒì¼ í¬ê¸°:</strong> ${originalSize} KB â†’ ${sizeKB} KB</p>
                    <p><strong>ì••ì¶•ë¥ :</strong> ${compressionRatio}% ê°ì†Œ</p>
                    <p><strong>í¬ê¸° ë¹„ìœ¨:</strong> ì›ë³¸ì˜ ${(sizeKB/originalSize*100).toFixed(1)}% (ì•½ ${sizeRatio}ë¶„ì˜ 1)</p>
                    <p class="compression-ratio">ğŸ’¾ ${(originalSize - sizeKB).toFixed(1)} KB ì ˆì•½!</p>
                    <p style="margin-top:10px;">ğŸ’¡ ${colorName}ìœ¼ë¡œ ì••ì¶•í•˜ë©´ íŒŒì¼ì´ ${sizeRatio}ë°° ì‘ì•„ì ¸ìš”!</p>
                </div>
            `;
        }

        // ì••ì¶• ì°¨íŠ¸ ê·¸ë¦¬ê¸°
        function drawCompressionChart() {
            const canvas = document.getElementById('compressionChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            // ë°ì´í„°
            const data = [
                { label: 'ì›ë³¸', size: 1820, color: '#dc2626' },
                { label: '256ìƒ‰', size: 703, color: '#f97316' },
                { label: '128ìƒ‰', size: 544, color: '#f59e0b' },
                { label: '64ìƒ‰', size: 419, color: '#eab308' },
                { label: '32ìƒ‰', size: 341, color: '#84cc16' },
                { label: '16ìƒ‰', size: 229, color: '#22c55e' },
                { label: '8ìƒ‰', size: 188, color: '#10b981' },
                { label: '4ìƒ‰', size: 130, color: '#14b8a6' },
                { label: '2ìƒ‰', size: 77, color: '#06b6d4' }
            ];
            
            const maxSize = 2000;
            const barWidth = (width - 100) / data.length;
            const padding = 40;
            
            // ë°°ê²½
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, width, height);
            
            // ê·¸ë¦¬ë“œ ë¼ì¸
            ctx.strokeStyle = '#e5e7eb';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const y = padding + (height - padding * 2) * (i / 5);
                ctx.beginPath();
                ctx.moveTo(50, y);
                ctx.lineTo(width - 20, y);
                ctx.stroke();
                
                // Yì¶• ë ˆì´ë¸”
                ctx.fillStyle = '#666';
                ctx.font = '12px Malgun Gothic';
                ctx.textAlign = 'right';
                const value = maxSize - (maxSize * i / 5);
                ctx.fillText(value + 'KB', 45, y + 4);
            }
            
            // ë§‰ëŒ€ ê·¸ë˜í”„
            data.forEach((item, index) => {
                const x = 60 + index * barWidth;
                const barHeight = (item.size / maxSize) * (height - padding * 2);
                const y = height - padding - barHeight;
                
                // ë§‰ëŒ€
                ctx.fillStyle = item.color;
                ctx.fillRect(x, y, barWidth - 10, barHeight);
                
                // ë ˆì´ë¸”
                ctx.fillStyle = '#374151';
                ctx.font = 'bold 11px Malgun Gothic';
                ctx.textAlign = 'center';
                ctx.save();
                ctx.translate(x + (barWidth - 10) / 2, height - 10);
                ctx.rotate(-Math.PI / 4);
                ctx.fillText(item.label, 0, 0);
                ctx.restore();
                
                // ê°’ í‘œì‹œ
                ctx.fillStyle = '#374151';
                ctx.font = 'bold 11px Malgun Gothic';
                ctx.textAlign = 'center';
                ctx.fillText(item.size + 'KB', x + (barWidth - 10) / 2, y - 5);
            });
            
            // ì œëª©
            ctx.fillStyle = '#f5576c';
            ctx.font = 'bold 14px Malgun Gothic';
            ctx.textAlign = 'center';
            ctx.fillText('ìƒ‰ìƒ ìˆ˜ì— ë”°ë¥¸ íŒŒì¼ í¬ê¸° ë³€í™”', width / 2, 20);
        }
    </script>
</body>
</html>
