<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>전화번호와 인터넷 주소 - 네트워크 통신의 기본</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { 
      font-family: 'Malgun Gothic', sans-serif; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      margin: 0;
      padding: 20px;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    @keyframes slideIn {
      from { transform: translateX(-20px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    .animate-pulse-custom {
      animation: pulse 2s ease-in-out infinite;
    }
    .animate-slide-in {
      animation: slideIn 0.5s ease-out;
    }
    
    /* 신호 전송 애니메이션 */
    @keyframes signalFlow {
      0% {
        opacity: 0;
        transform: scale(0.5);
      }
      50% {
        opacity: 1;
        transform: scale(1.2);
      }
      100% {
        opacity: 0;
        transform: scale(1);
      }
    }
    
    @keyframes lineGlow {
      0%, 100% {
        stroke-opacity: 0.3;
        stroke-width: 2;
      }
      50% {
        stroke-opacity: 1;
        stroke-width: 4;
      }
    }
    
    @keyframes bounceOnce {
      0%, 100% { transform: translateY(0) translateX(-50%); }
      50% { transform: translateY(-10px) translateX(-50%); }
    }

    .signal-dot {
      animation: signalFlow 1.5s ease-in-out;
    }
    
    .line-glow {
      animation: lineGlow 1.5s ease-in-out;
    }
    
    .network-node {
      transition: all 0.3s ease;
    }
    
    .network-node.active {
      transform: scale(1.2);
      filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.8));
    }
    
    .network-node.receiving {
      animation: pulse 0.5s ease-in-out 3;
    }

  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState } = React;

    const NetworkAddressEducation = () => {
      const [step, setStep] = useState(0);
      const [answer, setAnswer] = useState('');
      const [showFeedback, setShowFeedback] = useState(false);
      const [selectedPhone, setSelectedPhone] = useState('');
      const [selectedIP, setSelectedIP] = useState('');
      const [showPhoneConnection, setShowPhoneConnection] = useState(false);
      const [showIPConnection, setShowIPConnection] = useState(false);
      const [showTooltip, setShowTooltip] = useState(false);
      const [callingFrom, setCallingFrom] = useState('');
      const [callingTo, setCallingTo] = useState('');
      const [signalPath, setSignalPath] = useState([]);
      const [activeNodes, setActiveNodes] = useState([]);
      const [ipFrom, setIpFrom] = useState('');
      const [ipTo, setIpTo] = useState('');

      const phones = [
        { name: '민수', number: '010-1234-5678', emoji: '👦', id: 'minsu' },
        { name: '지은', number: '010-9876-5432', emoji: '👧', id: 'jieun' },
        { name: '선생님', number: '010-1004-1004', emoji: '👨‍🏫', id: 'teacher' }
      ];

      const devices = [
        { name: '학교 컴퓨터', ip: '192.168.1.10', emoji: '💻' },
        { name: '스마트폰', ip: '192.168.1.25', emoji: '📱' },
        { name: '태블릿', ip: '192.168.1.30', emoji: '📲' }
      ];

      const handleAnswer = (selectedAnswer) => {
        setAnswer(selectedAnswer);
        setShowFeedback(true);
        
        if (selectedAnswer === '선') {
          setTimeout(() => {
            setStep(1);
            setShowFeedback(false);
          }, 2000);
        }
      };

      const handlePhoneSelect = (number) => {
        setSelectedPhone(number);
        setShowPhoneConnection(true);
        setTimeout(() => setShowPhoneConnection(false), 2000);
      };

      const handlePhoneCall = (fromId, toId) => {
        setCallingFrom(fromId);
        setCallingTo(toId);
        setShowPhoneConnection(true);
        
        // 활성 노드 설정
        setActiveNodes([fromId, toId]);
        
        // 신호 경로 애니메이션
        setTimeout(() => {
          setSignalPath([fromId, toId]);
        }, 300);
        
        // 초기화
        setTimeout(() => {
          setShowPhoneConnection(false);
          setCallingFrom('');
          setCallingTo('');
          setSignalPath([]);
          setActiveNodes([]);
        }, 3000);
      };

      const handleTooltipClick = () => {
        setShowTooltip(true);
        setTimeout(() => {
          setShowTooltip(false);
        }, 500);
      };

      // 네트워크 노드 위치 계산 (교환기 중심)
      const getNodePosition = (id) => {
        const positions = {
          'minsu': { x: 150, y: 100 },
          'jieun': { x: 450, y: 100 },
          'teacher': { x: 300, y: 330 }
        };
        return positions[id] || { x: 300, y: 200 };
      };

      // SVG 연결선 그리기
      const renderConnections = () => {
        const connections = [];
        const center = { x: 300, y: 200 };
        
        phones.forEach((phone) => {
          const pos = getNodePosition(phone.id);
          const isActive = 
            (callingFrom === phone.id || callingTo === phone.id);
          
          connections.push(
            <line
              key={`line-${phone.id}`}
              x1={center.x}
              y1={center.y}
              x2={pos.x}
              y2={pos.y}
              stroke={isActive ? "#3b82f6" : "#d1d5db"}
              strokeWidth={isActive ? "4" : "3"}
              strokeDasharray="5,5"
              className={isActive ? "line-glow" : ""}
              opacity={isActive ? "1" : "0.5"}
            >
              {!isActive && (
                <animate attributeName="stroke-dashoffset" from="0" to="10" dur="1s" repeatCount="indefinite" />
              )}
            </line>
          );
        });
        
        return connections;
      };

      // 신호 점 렌더링
      const renderSignals = () => {
        if (signalPath.length !== 2) return null;
        
        const fromPos = getNodePosition(signalPath[0]);
        const centerPos = { x: 300, y: 200 };
        const toPos = getNodePosition(signalPath[1]);
        
        const signals = [];
        
        // 발신자 -> 교환기
        for (let i = 0; i < 3; i++) {
          const t = i / 2;
          const x = fromPos.x + (centerPos.x - fromPos.x) * t;
          const y = fromPos.y + (centerPos.y - fromPos.y) * t;
          
          signals.push(
            <circle
              key={`signal-to-center-${i}`}
              cx={x}
              cy={y}
              r="6"
              fill="#3b82f6"
              className="signal-dot"
              style={{ animationDelay: `${i * 0.15}s` }}
            />
          );
        }
        
        // 교환기 -> 수신자
        for (let i = 0; i < 3; i++) {
          const t = i / 2;
          const x = centerPos.x + (toPos.x - centerPos.x) * t;
          const y = centerPos.y + (toPos.y - centerPos.y) * t;
          
          signals.push(
            <circle
              key={`signal-from-center-${i}`}
              cx={x}
              cy={y}
              r="6"
              fill="#10b981"
              className="signal-dot"
              style={{ animationDelay: `${0.5 + i * 0.15}s` }}
            />
          );
        }
        
        return signals;
      };

      const handleIPSelect = (ip) => {
        setSelectedIP(ip);
        setShowIPConnection(true);
        setTimeout(() => setShowIPConnection(false), 3000);
      };

      const handleIPConnection = (fromDevice, toDevice) => {
        const fromId = fromDevice.replace(/\s/g, '_');
        const toId = toDevice.replace(/\s/g, '_');
        
        setIpFrom(fromDevice);
        setIpTo(toDevice);
        setShowIPConnection(true);
        setActiveNodes([fromId, toId]);
        
        // 신호 경로: 송신자 -> 라우터 -> 수신자
        setTimeout(() => {
          setSignalPath([fromId, toId]);
        }, 300);
        
        setTimeout(() => {
          setShowIPConnection(false);
          setIpFrom('');
          setIpTo('');
          setActiveNodes([]);
          setSignalPath([]);
        }, 3000);
      };

      // 네트워크 기기 노드 위치 계산
      const getDevicePosition = (deviceName) => {
        const positions = {
          '학교 컴퓨터': { x: 150, y: 100 },
          '스마트폰': { x: 450, y: 100 },
          '태블릿': { x: 300, y: 330 }
        };
        return positions[deviceName] || { x: 300, y: 200 };
      };

      // 네트워크 연결선 그리기
      const renderNetworkConnections = () => {
        const connections = [];
        const center = { x: 300, y: 200 };
        
        devices.forEach((device) => {
          const pos = getDevicePosition(device.name);
          const deviceId = device.name.replace(/\s/g, '_');
          const isActive = activeNodes.includes(deviceId);
          
          connections.push(
            <line
              key={`line-${device.name}`}
              x1={center.x}
              y1={center.y}
              x2={pos.x}
              y2={pos.y}
              stroke={isActive ? "#10b981" : "#d1d5db"}
              strokeWidth={isActive ? "4" : "3"}
              strokeDasharray="5,5"
              className={isActive ? "line-glow" : ""}
              opacity={isActive ? "1" : "0.5"}
            >
              {!isActive && (
                <animate attributeName="stroke-dashoffset" from="0" to="10" dur="1s" repeatCount="indefinite" />
              )}
            </line>
          );
        });
        
        return connections;
      };

      // 네트워크 신호 점 렌더링 (송신자 -> 라우터 -> 수신자)
      const renderNetworkSignals = () => {
        if (signalPath.length !== 2) return null;
        
        const fromDevice = devices.find(d => d.name.replace(/\s/g, '_') === signalPath[0]);
        const toDevice = devices.find(d => d.name.replace(/\s/g, '_') === signalPath[1]);
        if (!fromDevice || !toDevice) return null;
        
        const fromPos = getDevicePosition(fromDevice.name);
        const centerPos = { x: 300, y: 200 };
        const toPos = getDevicePosition(toDevice.name);
        
        const signals = [];
        
        // 송신자 -> 라우터 (초록색 신호)
        for (let i = 0; i < 3; i++) {
          const t = i / 2;
          const x = fromPos.x + (centerPos.x - fromPos.x) * t;
          const y = fromPos.y + (centerPos.y - fromPos.y) * t;
          
          signals.push(
            <circle
              key={`signal-to-router-${i}`}
              cx={x}
              cy={y}
              r="6"
              fill="#10b981"
              className="signal-dot"
              style={{ animationDelay: `${i * 0.15}s` }}
            />
          );
        }
        
        // 라우터 -> 수신자 (파란색 신호)
        for (let i = 0; i < 3; i++) {
          const t = i / 2;
          const x = centerPos.x + (toPos.x - centerPos.x) * t;
          const y = centerPos.y + (toPos.y - centerPos.y) * t;
          
          signals.push(
            <circle
              key={`signal-from-router-${i}`}
              cx={x}
              cy={y}
              r="6"
              fill="#3b82f6"
              className="signal-dot"
              style={{ animationDelay: `${0.5 + i * 0.15}s` }}
            />
          );
        }
        
        return signals;
      };

      return (
        <div className="max-w-7xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden">
          <div className="bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white">
            <div className="flex justify-between items-center mb-2">
              <div className="text-sm text-indigo-100">고등학교 정보 학습자료</div>
              <a 
                href="index.html" 
                className="bg-white text-indigo-600 px-4 py-2 rounded-lg font-bold text-sm hover:bg-indigo-50 transition-all shadow-md hover:shadow-lg flex items-center gap-2"
              >
                🏠 홈으로
              </a>
            </div>
            <h1 className="text-3xl font-bold mb-2">📞 인터넷 주소가 왜 필요하지?</h1>
            <p className="text-indigo-100">인터넷을 하려면 IP 주소가 필요해요! 어떻게 서로를 찾을까요?</p>
          </div>

          

          <div className="p-8">
            {step === 0 && (
              <div className="space-y-6">
                <div className="bg-yellow-50 p-6 rounded-lg border border-yellow-300">
                  <p className="text-lg font-semibold text-yellow-900 mb-4">🤔 먼저 생각해볼까요?</p>
                  <p className="text-gray-700 mb-4">
                    지구상에 <span className="font-bold text-blue-600">전화기 2대</span>만 있다고 상상해보세요. 
                    두 전화기가 서로 통신하려면 <span className="font-bold text-orange-600">가장 먼저</span> 무엇이 필요할까요?
                  </p>
                </div>

                <div className="bg-white p-8 rounded-xl shadow-lg border-2 border-gray-200">
                  <div className="flex justify-center gap-8 mb-8">
                    <div className="text-center">
                      <div className="text-6xl mb-2">📞</div>
                      <p className="font-bold text-gray-700">전화기 1</p>
                    </div>
                    <div className="text-5xl text-gray-400 flex items-center">❓</div>
                    <div className="text-center">
                      <div className="text-6xl mb-2">📞</div>
                      <p className="font-bold text-gray-700">전화기 2</p>
                    </div>
                  </div>

                  <p className="text-center text-lg text-gray-700 mb-6">
                    두 전화기를 연결하려면 무엇이 필요할까요?
                  </p>

                  <div className="grid md:grid-cols-3 gap-4">
                    <button
                      onClick={() => handleAnswer('선')}
                      className="bg-gradient-to-br from-blue-100 to-blue-200 hover:from-blue-200 hover:to-blue-300 p-6 rounded-xl border-2 border-blue-300 transition-all hover:scale-105 hover:shadow-lg"
                    >
                      <div className="text-4xl mb-2">📡</div>
                      <p className="font-bold text-blue-800">선 (케이블)</p>
                    </button>
                    <button
                      onClick={() => handleAnswer('전화번호')}
                      className="bg-gradient-to-br from-green-100 to-green-200 hover:from-green-200 hover:to-green-300 p-6 rounded-xl border-2 border-green-300 transition-all hover:scale-105 hover:shadow-lg"
                    >
                      <div className="text-4xl mb-2">🔢</div>
                      <p className="font-bold text-green-800">전화번호</p>
                    </button>
                    <button
                      onClick={() => handleAnswer('인터넷')}
                      className="bg-gradient-to-br from-purple-100 to-purple-200 hover:from-purple-200 hover:to-purple-300 p-6 rounded-xl border-2 border-purple-300 transition-all hover:scale-105 hover:shadow-lg"
                    >
                      <div className="text-4xl mb-2">🌐</div>
                      <p className="font-bold text-purple-800">인터넷</p>
                    </button>
                  </div>

                  {showFeedback && (
                    <div className={`mt-6 p-4 rounded-lg border-2 animate-slide-in ${
                      answer === '선' 
                        ? 'bg-green-100 border-green-400' 
                        : 'bg-orange-100 border-orange-400'
                    }`}>
                      {answer === '선' ? (
                        <div className="flex items-center gap-3">
                          <div className="text-3xl">✅</div>
                          <div>
                            <p className="font-bold text-green-800">정답입니다!</p>
                            <p className="text-sm text-green-700">
                              그렇습니다! 두 전화기를 연결하려면 먼저 <span className="font-bold">선(케이블)</span>이 필요해요!
                            </p>
                          </div>
                        </div>
                      ) : (
                        <div className="flex items-center gap-3">
                          <div className="text-3xl">💭</div>
                          <div>
                            <p className="font-bold text-orange-800">다시 생각해보세요!</p>
                            <p className="text-sm text-orange-700">
                              물리적으로 연결되지 않으면 신호를 주고받을 수 없어요. 다시 선택해보세요!
                            </p>
                          </div>
                        </div>
                      )}
                    </div>
                  )}
                </div>
              </div>
            )}

            {step === 1 && (
              <div className="space-y-6">
                <div className="bg-green-100 p-6 rounded-lg border-2 border-green-400">
                  <div className="flex items-center gap-3 mb-4">
                    <div className="text-4xl">✅</div>
                    <h2 className="text-2xl font-bold text-green-800">정답! 먼저 선이 필요합니다!</h2>
                  </div>
                  <p className="text-gray-700 text-lg">
                    전화기 2대가 통신하려면 신호를 주고받을 수 있는 <span className="font-bold text-blue-600">물리적 연결</span>이 필요합니다.
                  </p>
                </div>

                <div className="bg-white p-8 rounded-xl shadow-lg border-2 border-gray-200">
                  <h3 className="text-2xl font-bold text-indigo-700 mb-6 text-center">📡 2대의 전화기 연결</h3>
                  
                  <div className="flex justify-center items-center gap-4 mb-8">
                    <div className="text-center">
                      <div className="text-7xl mb-2">📞</div>
                      <p className="font-bold text-gray-700">전화기 1</p>
                      <p className="text-sm text-gray-500">(민수)</p>
                    </div>
                    <div className="flex-1 max-w-xs">
                      <div className="h-2 bg-gradient-to-r from-blue-500 to-green-500 rounded animate-pulse-custom"></div>
                      <p className="text-center text-sm text-gray-600 mt-2">선 (케이블)</p>
                    </div>
                    <div className="text-center">
                      <div className="text-7xl mb-2">📞</div>
                      <p className="font-bold text-gray-700">전화기 2</p>
                      <p className="text-sm text-gray-500">(지은)</p>
                    </div>
                  </div>

                  <div className="bg-blue-50 p-6 rounded-lg border border-blue-200">
                    <h4 className="font-bold text-blue-800 mb-3 flex items-center gap-2">
                      <span className="text-2xl">💡</span>
                      지구상에 전화기가 단 2대만 있다면?
                    </h4>
                    <div className="space-y-2 text-gray-700">
                      <p>✓ 선으로 연결되어 있으니 <span className="font-bold text-green-600">상대방은 항상 정해져</span> 있어요.</p>
                      <p>✓ 그냥 수화기를 들면 <span className="font-bold text-purple-600">자동으로 상대방과 연결</span>됩니다.</p>                      
                    </div>
                  </div>
                </div>

                <div className="bg-yellow-50 p-6 rounded-lg border border-yellow-300">
                  <h3 className="text-xl font-bold text-purple-900 mb-4">
                    <span 
                      className="relative inline-block cursor-pointer"
                      onClick={handleTooltipClick}
                    >
                      🤔
                      {showTooltip && (
                        <span 
                          className="absolute left-1/2 -translate-x-1/2 -top-16 
                                     bg-pink-200 text-gray-900 px-3 py-1 rounded-xl 
                                     text-sm font-bold whitespace-nowrap shadow-2xl z-50"
                          style={{
                            animation: 'bounceOnce 0.5s ease-in-out'
                          }}
                        >
                          참새다!
                        </span>
                      )}
                    </span>
                    {' '}그렇다면 다음 질문!
                  </h3>
                  <p className="text-gray-700">
                    만약 전화기가 <span className="font-bold text-red-600">3대 이상</span>으로 늘어난다면 어떻게 될까요?
                  </p>
                </div>

                <div className="text-center">
                  <button
                    onClick={() => setStep(2)}
                    className="bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-4 rounded-lg font-bold text-lg hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl"
                  >
                    다음 단계로 → 
                  </button>
                </div>
              </div>
            )}

            {step === 2 && (
              <div className="space-y-6">
                <div className="bg-gradient-to-r from-orange-50 to-red-50 p-6 rounded-lg border-2 border-orange-300">
                  <h2 className="text-2xl font-bold text-orange-800 mb-3">📞 전화기가 3대 이상이면?</h2>
                  <p className="text-gray-700 text-lg">
                    이제는 <span className="font-bold text-red-600">전화번호</span>가 필요합니다!
                  </p>
                </div>

                <div className="bg-white p-8 rounded-xl shadow-lg border-2 border-gray-200">
                  <h3 className="text-2xl font-bold text-purple-700 mb-6 text-center">🔢 3명 이상의 네트워크</h3>
                  
                  <div className="mb-8">
                    <svg viewBox="0 0 600 400" className="w-full max-w-2xl mx-auto">
                      {/* 전화망 중앙 */}
                      <circle cx="300" cy="200" r="60" fill="#8B5CF6" opacity="0.2" />
                      <text x="300" y="195" textAnchor="middle" fontSize="20" fontWeight="bold" fill="#7C3AED">전화망</text>
                      <text x="300" y="215" textAnchor="middle" fontSize="14" fill="#7C3AED">(교환기)</text>
                      
                      {/* 민수 - 왼쪽 위 */}
                      <line x1="300" y1="200" x2="150" y2="100" stroke="#3B82F6" strokeWidth="3" strokeDasharray="5,5">
                        <animate attributeName="stroke-dashoffset" from="0" to="10" dur="1s" repeatCount="indefinite" />
                      </line>
                      <circle cx="150" cy="100" r="50" fill="#DBEAFE" stroke="#3B82F6" strokeWidth="3" />
                      <text x="150" y="95" textAnchor="middle" fontSize="35">👦</text>
                      <text x="150" y="125" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#1E40AF">민수</text>
                      
                      {/* 전화번호 라벨 - 민수 */}
                      <rect x="50" y="130" width="200" height="30" rx="5" fill="#3B82F6" />
                      <text x="150" y="150" textAnchor="middle" fontSize="13" fontWeight="bold" fill="white">010-1234-5678</text>
                      
                      {/* 지은 - 오른쪽 위 */}
                      <line x1="300" y1="200" x2="450" y2="100" stroke="#10B981" strokeWidth="3" strokeDasharray="5,5">
                        <animate attributeName="stroke-dashoffset" from="0" to="10" dur="1s" repeatCount="indefinite" />
                      </line>
                      <circle cx="450" cy="100" r="50" fill="#D1FAE5" stroke="#10B981" strokeWidth="3" />
                      <text x="450" y="95" textAnchor="middle" fontSize="35">👧</text>
                      <text x="450" y="125" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#065F46">지은</text>
                      
                      {/* 전화번호 라벨 - 지은 */}
                      <rect x="350" y="130" width="200" height="30" rx="5" fill="#10B981" />
                      <text x="450" y="150" textAnchor="middle" fontSize="13" fontWeight="bold" fill="white">010-9876-5432</text>
                      
                      {/* 선생님 - 아래 */}
                      <line x1="300" y1="200" x2="300" y2="330" stroke="#A855F7" strokeWidth="3" strokeDasharray="5,5">
                        <animate attributeName="stroke-dashoffset" from="0" to="10" dur="1s" repeatCount="indefinite" />
                      </line>
                      <circle cx="300" cy="330" r="50" fill="#F3E8FF" stroke="#A855F7" strokeWidth="3" />
                      <text x="300" y="325" textAnchor="middle" fontSize="35">👨‍🏫</text>
                      <text x="300" y="355" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#6B21A8">선생님</text>
                      
                      {/* 전화번호 라벨 - 선생님 */}
                      <rect x="200" y="365" width="200" height="30" rx="5" fill="#A855F7" />
                      <text x="300" y="385" textAnchor="middle" fontSize="13" fontWeight="bold" fill="white">010-1004-1004</text>
                    </svg>
                    
                    <div className="text-center mt-4 text-sm text-gray-600">
                      <p className="font-bold text-purple-700">모든 전화기가 중앙 전화망(교환기)에 연결되어 있어요!</p>
                      <p className="mt-1">점선은 각 전화기와 교환기를 연결하는 선을 나타냅니다.</p>
                    </div>
                  </div>

                  <div className="bg-red-50 p-6 rounded-lg border border-red-200 mb-6">
                    <h4 className="font-bold text-red-800 mb-3 flex items-center gap-2">
                      <span className="text-2xl">⚠️</span>
                      문제 발생!
                    </h4>
                    <div className="space-y-2 text-gray-700">
                      <p>❌ 민수가 <span className="font-bold text-blue-600">지은</span>에게만 전화하고 싶은데...</p>
                      <p>❌ 전화번호가 없으면 <span className="font-bold text-red-600">누구에게 연결될지 알 수 없어요!</span></p>
                      <p>❌ 3명 모두에게 동시에 연결될 수도 있어요</p>
                    </div>
                  </div>

                  <div className="bg-green-50 p-6 rounded-lg border border-green-200">
                    <h4 className="font-bold text-green-800 mb-3 flex items-center gap-2">
                      <span className="text-2xl">✅</span>
                      해결책: 전화번호!
                    </h4>
                    <div className="space-y-2 text-gray-700">
                      <p>✓ 각 전화기마다 <span className="font-bold text-green-600">고유한 번호</span>를 부여합니다</p>
                      <p>✓ 민수가 지은에게 전화하려면 <span className="font-mono font-bold text-blue-600">010-9876-5432</span>를 누릅니다</p>
                      <p>✓ 전화망이 이 번호를 보고 <span className="font-bold text-purple-600">정확히 지은에게만 연결</span>해줍니다</p>
                      <p className="font-bold text-orange-600 mt-4">
                        → 3명 이상이면 누구에게 전화할지 구별하기 위해 전화번호가 필수입니다!
                      </p>
                    </div>
                  </div>
                </div>

                <div className="mb-6 bg-yellow-50 p-4 rounded-lg border border-yellow-300">
                  <p className="text-sm font-semibold text-yellow-900 mb-2">💡 직접 체험해보세요!</p>
                  <p className="text-sm text-gray-700">
                    <span className="font-bold text-blue-600">아래 버튼을 클릭</span>해서 전화번호로 원하는 사람에게 전화를 걸어보세요!
                    <br/>
                    신호가 네트워크를 통해 전송되는 모습을 확인할 수 있어요! 🔵
                  </p>
                </div>

                {/* 네트워크 신호 전송 시각화 */}
                <div className="bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border-2 border-blue-200 shadow-lg mb-6">
                  <h2 className="text-2xl font-bold text-blue-700 mb-4 flex items-center gap-2">
                    📞 네트워크에서 전화 걸기 체험
                  </h2>
                  
                  <div className="bg-white p-6 rounded-lg shadow-md mb-4">
                    <svg viewBox="0 0 600 400" className="w-full max-w-2xl mx-auto">
                      {/* 연결선 */}
                      {renderConnections()}
                      
                      {/* 신호 애니메이션 */}
                      {renderSignals()}
                      
                      {/* 전화망 중앙 */}
                      <circle cx="300" cy="200" r="60" fill="#8B5CF6" opacity="0.2" />
                      <text x="300" y="195" textAnchor="middle" fontSize="20" fontWeight="bold" fill="#7C3AED">전화망</text>
                      <text x="300" y="215" textAnchor="middle" fontSize="14" fill="#7C3AED">(교환기)</text>
                      
                      {/* 노드 (사람들) */}
                      {phones.map((phone) => {
                        const pos = getNodePosition(phone.id);
                        const isActive = activeNodes.includes(phone.id);
                        const isCalling = callingFrom === phone.id;
                        const isReceiving = callingTo === phone.id;
                        
                        return (
                          <g key={phone.id} className={`network-node ${isActive ? 'active' : ''} ${isReceiving ? 'receiving' : ''}`}>
                            <circle
                              cx={pos.x}
                              cy={pos.y}
                              r="50"
                              fill={isCalling ? "#DBEAFE" : isReceiving ? "#D1FAE5" : phone.id === 'minsu' ? "#DBEAFE" : phone.id === 'jieun' ? "#D1FAE5" : "#F3E8FF"}
                              stroke={isCalling ? "#3b82f6" : isReceiving ? "#10b981" : phone.id === 'minsu' ? "#3B82F6" : phone.id === 'jieun' ? "#10B981" : "#A855F7"}
                              strokeWidth="3"
                            />
                            <text
                              x={pos.x}
                              y={pos.y - 5}
                              textAnchor="middle"
                              dominantBaseline="middle"
                              fontSize="35"
                            >
                              {phone.emoji}
                            </text>
                            <text
                              x={pos.x}
                              y={pos.y + 30}
                              textAnchor="middle"
                              fontSize="14"
                              fontWeight="bold"
                              fill={phone.id === 'minsu' ? "#1E40AF" : phone.id === 'jieun' ? "#065F46" : "#6B21A8"}
                            >
                              {phone.name}
                            </text>
                            
                            {/* 전화번호 라벨 */}
                            <rect 
                              x={pos.x - 100} 
                              y={phone.id === 'teacher' ? pos.y + 45 : pos.y + 40} 
                              width="200" 
                              height="30" 
                              rx="5" 
                              fill={phone.id === 'minsu' ? "#3B82F6" : phone.id === 'jieun' ? "#10B981" : "#A855F7"}
                            />
                            <text
                              x={pos.x}
                              y={phone.id === 'teacher' ? pos.y + 65 : pos.y + 60}
                              textAnchor="middle"
                              fontSize="13"
                              fontWeight="bold"
                              fill="white"
                            >
                              {phone.number}
                            </text>
                          </g>
                        );
                      })}
                    </svg>
                  </div>

                  {/* 전화 걸기 버튼들 */}
                  <div className="space-y-3">
                    <p className="font-bold text-gray-700 mb-2">📞 전화를 걸어보세요:</p>
                    
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                      <button
                        onClick={() => handlePhoneCall('teacher', 'minsu')}
                        className="bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg font-bold transition-all hover:scale-105 shadow-md"
                      >
                        👨‍🏫 선생님 → 👦 민수
                      </button>
                      
                      <button
                        onClick={() => handlePhoneCall('minsu', 'jieun')}
                        className="bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg font-bold transition-all hover:scale-105 shadow-md"
                      >
                        👦 민수 → 👧 지은
                      </button>
                      
                      <button
                        onClick={() => handlePhoneCall('jieun', 'teacher')}
                        className="bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-lg font-bold transition-all hover:scale-105 shadow-md"
                      >
                        👧 지은 → 👨‍🏫 선생님
                      </button>
                    </div>
                  </div>

                  {showPhoneConnection && (
                    <div className="mt-4 bg-blue-100 border-2 border-blue-400 p-4 rounded-lg animate-slide-in">
                      <div className="flex items-center gap-2">
                        <div className="text-2xl">📞</div>
                        <div>
                          <div className="font-bold text-blue-800">전화 연결 중!</div>
                          <div className="text-sm text-blue-700">
                            신호가 교환기를 통해 전송되고 있어요! 
                            <span className="font-bold"> 파란색과 초록색 점</span>이 이동하는 모습을 확인하세요! 🔵🟢
                          </div>
                        </div>
                      </div>
                    </div>
                  )}

                  <div className="mt-4 bg-indigo-50 p-4 rounded-lg">
                    <p className="text-sm font-bold text-indigo-700 mb-2">💡 관찰해보세요!</p>
                    <ul className="text-sm text-gray-700 space-y-1">
                      <li>• <span className="font-bold text-blue-600">파란색 점</span>: 발신자에서 교환기로 가는 신호</li>
                      <li>• <span className="font-bold text-green-600">초록색 점</span>: 교환기에서 수신자로 가는 신호</li>
                      <li>• <span className="font-bold text-purple-600">교환기</span>: 전화번호를 확인하고 올바른 사람에게 연결</li>
                      <li>• <span className="font-bold">전화번호</span> 덕분에 정확한 사람에게 연결돼요!</li>
                    </ul>
                  </div>
                </div>

                <div className="text-center">
                  <button
                    onClick={() => setStep(3)}
                    className="bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-4 rounded-lg font-bold text-lg hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl"
                  >
                    인터넷도 같은 원리! →
                  </button>
                </div>
              </div>
            )}

            {step === 3 && (
              <div className="space-y-6">
                <div className="bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-lg border-2 border-green-300">
                  <h2 className="text-2xl font-bold text-green-800 mb-3">🌐 인터넷도 똑같아요!</h2>
                  <p className="text-gray-700 text-lg">
                    인터넷도 전화와 같은 원리입니다. 먼저 <span className="font-bold text-blue-600">선(케이블, Wi-Fi)</span>으로 연결하고, 
                    여러 기기를 구별하기 위해 <span className="font-bold text-green-600">IP 주소</span>를 사용해요!
                  </p>
                </div>

                <div className="grid md:grid-cols-2 gap-6">
                  <div className="bg-white p-6 rounded-xl shadow-lg border-2 border-blue-200">
                    <h3 className="text-xl font-bold text-blue-700 mb-4">📞 전화 통신</h3>
                    <div className="space-y-3 text-sm text-gray-700">
                      <div className="flex items-start gap-2">
                        <span className="text-lg">1️⃣</span>
                        <p><span className="font-bold text-blue-600">전화선</span>으로 연결</p>
                      </div>
                      <div className="flex items-start gap-2">
                        <span className="text-lg">2️⃣</span>
                        <p><span className="font-bold text-green-600">전화번호</span>로 상대 구별</p>
                      </div>
                      <div className="flex items-start gap-2">
                        <span className="text-lg">3️⃣</span>
                        <p>예: <span className="font-mono">010-1234-5678</span></p>
                      </div>
                    </div>
                  </div>

                  <div className="bg-white p-6 rounded-xl shadow-lg border-2 border-green-200">
                    <h3 className="text-xl font-bold text-green-700 mb-4">🌐 인터넷 통신</h3>
                    <div className="space-y-3 text-sm text-gray-700">
                      <div className="flex items-start gap-2">
                        <span className="text-lg">1️⃣</span>
                        <p><span className="font-bold text-blue-600">네트워크 선</span>으로 연결 (케이블/Wi-Fi)</p>
                      </div>
                      <div className="flex items-start gap-2">
                        <span className="text-lg">2️⃣</span>
                        <p><span className="font-bold text-green-600">IP 주소</span>로 기기 구별</p>
                      </div>
                      <div className="flex items-start gap-2">
                        <span className="text-lg">3️⃣</span>
                        <p>예: <span className="font-mono">192.168.1.10</span></p>
                      </div>
                    </div>
                  </div>
                </div>

                <div className="mb-6 bg-yellow-50 p-4 rounded-lg border border-yellow-300">
                  <p className="text-sm font-semibold text-yellow-900 mb-2">💡 직접 체험해보세요!</p>
                  <p className="text-sm text-gray-700">
                    <span className="font-bold text-green-600">아래 기기를 클릭</span>해서 IP 주소로 인터넷에 연결해보세요!
                  </p>
                </div>

                <div className="bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border-2 border-green-200 shadow-lg">
                  <h2 className="text-2xl font-bold text-green-700 mb-4 flex items-center gap-2">
                    🌐 IP 주소로 연결하기
                  </h2>
                  
                  <div className="mb-4 bg-yellow-50 p-4 rounded-lg border border-yellow-300">
                    <p className="text-sm font-semibold text-yellow-900 mb-2">💡 어떻게 연결할까요?</p>
                    <p className="text-sm text-gray-700">
                      전화처럼, <span className="font-bold text-green-600">송신자 기기를 선택</span>한 후 
                      <span className="font-bold text-blue-600"> 수신자 기기</span>를 클릭해서 두 기기를 연결해보세요!
                    </p>
                  </div>
                  
                  {/* 기기 선택 버튼 */}
                  <div className="grid grid-cols-3 gap-3 mb-4">
                    {devices.map((device) => (
                      <button
                        key={device.name}
                        onClick={() => {
                          if (!ipFrom) {
                            setIpFrom(device.name);
                          } else if (device.name !== ipFrom) {
                            handleIPConnection(ipFrom, device.name);
                            setIpFrom('');
                          }
                        }}
                        className={`p-3 rounded-lg border-2 transition-all ${
                          ipFrom === device.name
                            ? 'bg-green-100 border-green-500 scale-105'
                            : 'bg-white border-gray-300 hover:border-green-400 hover:scale-105'
                        }`}
                      >
                        <div className="text-3xl mb-1">{device.emoji}</div>
                        <div className="text-xs font-bold text-gray-800">{device.name}</div>
                        <div className="text-xs font-mono text-green-600">{device.ip}</div>
                        {ipFrom === device.name && (
                          <div className="mt-1 text-xs font-bold text-green-700">송신자 선택됨 ✓</div>
                        )}
                      </button>
                    ))}
                  </div>
                  
                  {/* 네트워크망 시각화 */}
                  <div className="bg-white rounded-lg p-6 mb-4 border-2 border-green-300">
                    <svg width="100%" height="400" viewBox="0 0 600 400" className="mx-auto">
                      {/* 연결선 */}
                      {renderNetworkConnections()}
                      
                      {/* 라우터 (중앙) */}
                      <g className="network-node">
                        <circle cx="300" cy="200" r="40" fill="#8b5cf6" stroke="#6d28d9" strokeWidth="3" />
                        <text x="300" y="200" textAnchor="middle" dominantBaseline="middle" fontSize="30">
                          🔀
                        </text>
                        <text x="300" y="250" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#6d28d9">
                          라우터
                        </text>
                        <text x="300" y="268" textAnchor="middle" fontSize="11" fill="#7c3aed">
                          (IP 주소 확인)
                        </text>
                      </g>
                      
                      {/* 기기들 */}
                      {devices.map((device) => {
                        const pos = getDevicePosition(device.name);
                        const deviceId = device.name.replace(/\s/g, '_');
                        const isActive = activeNodes.includes(deviceId);
                        const isSender = ipFrom === device.name && !showIPConnection;
                        const isInConnection = device.name === ipFrom || device.name === ipTo;
                        
                        return (
                          <g 
                            key={device.name}
                            className={`network-node ${isActive ? 'active' : ''} ${isInConnection && showIPConnection ? 'receiving' : ''}`}
                          >
                            <circle 
                              cx={pos.x} 
                              cy={pos.y} 
                              r="35" 
                              fill={isSender ? "#fbbf24" : isActive ? "#10b981" : "#e0e7ff"} 
                              stroke={isSender ? "#f59e0b" : isActive ? "#059669" : "#6366f1"} 
                              strokeWidth="3"
                            />
                            <text x={pos.x} y={pos.y} textAnchor="middle" dominantBaseline="middle" fontSize="28">
                              {device.emoji}
                            </text>
                            <text x={pos.x} y={pos.y + 50} textAnchor="middle" fontSize="13" fontWeight="bold" fill="#1f2937">
                              {device.name}
                            </text>
                            <text x={pos.x} y={pos.y + 68} textAnchor="middle" fontSize="11" fontFamily="monospace" fill="#059669" fontWeight="bold">
                              {device.ip}
                            </text>
                          </g>
                        );
                      })}
                      
                      {/* 신호 점들 */}
                      {renderNetworkSignals()}
                    </svg>
                    
                    <div className="mt-4 text-center text-sm text-gray-600">
                      {!ipFrom ? (
                        <span>💡 <span className="font-bold">송신자 기기</span>를 먼저 선택하세요!</span>
                      ) : (
                        <span>✅ <span className="font-bold text-green-600">{ipFrom}</span> 선택됨! 이제 <span className="font-bold text-blue-600">수신자 기기</span>를 선택하세요!</span>
                      )}
                    </div>
                  </div>

                  {showIPConnection && (
                    <div className="bg-green-100 border-2 border-green-400 p-4 rounded-lg animate-slide-in mb-4">
                      <div className="flex items-center gap-2">
                        <div className="text-2xl">✅</div>
                        <div>
                          <div className="font-bold text-green-800">네트워크 연결 중!</div>
                          <div className="text-sm text-green-700">
                            <span className="font-bold">{ipFrom}</span>에서 <span className="font-bold">{ipTo}</span>로 데이터가 전송되고 있어요! 
                            <span className="font-bold"> 초록색 점과 파란색 점</span>이 라우터를 통해 이동하는 모습을 확인하세요! 🟢🔵
                          </div>
                        </div>
                      </div>
                    </div>
                  )}

                  <div className="bg-green-100 p-4 rounded-lg">
                    <p className="text-sm font-bold text-green-700 mb-2">💡 관찰해보세요!</p>
                    <ul className="text-sm text-gray-700 space-y-1">
                      <li>• <span className="font-bold text-green-600">초록색 점</span>: 송신자 기기에서 라우터로 가는 신호</li>
                      <li>• <span className="font-bold text-blue-600">파란색 점</span>: 라우터에서 수신자 기기로 가는 신호</li>
                      <li>• <span className="font-bold text-purple-600">라우터</span>: IP 주소를 확인하고 올바른 기기에 연결</li>
                      <li>• <span className="font-bold">IP 주소</span> 덕분에 송신자와 수신자가 정확히 연결돼요!</li>
                      <li>• 전화의 <span className="font-bold text-blue-600">교환기</span>와 인터넷의 <span className="font-bold text-purple-600">라우터</span>는 같은 역할!</li>
                    </ul>
                  </div>
                </div>

                <div className="bg-white p-6 rounded-xl border-2 border-gray-200 shadow-lg">
                  <h2 className="text-2xl font-bold text-purple-700 mb-4">📊 전화번호 vs IP 주소</h2>
                  <div className="overflow-x-auto">
                    <table className="w-full">
                      <thead>
                        <tr className="bg-gradient-to-r from-indigo-100 to-purple-100">
                          <th className="p-3 text-left font-bold text-gray-700">구분</th>
                          <th className="p-3 text-left font-bold text-blue-700">📞 전화번호</th>
                          <th className="p-3 text-left font-bold text-green-700">🌐 IP 주소</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr className="border-b border-gray-200">
                          <td className="p-3 font-bold text-gray-700">물리적 연결</td>
                          <td className="p-3">전화선 (유선/무선)</td>
                          <td className="p-3">네트워크 케이블 / Wi-Fi</td>
                        </tr>
                        <tr className="border-b border-gray-200 bg-gray-50">
                          <td className="p-3 font-bold text-gray-700">주소 역할</td>
                          <td className="p-3">전화기를 구별</td>
                          <td className="p-3">인터넷 기기를 구별</td>
                        </tr>
                        <tr className="border-b border-gray-200">
                          <td className="p-3 font-bold text-gray-700">형식</td>
                          <td className="p-3">010-1234-5678</td>
                          <td className="p-3">192.168.1.10</td>
                        </tr>
                        <tr className="border-b border-gray-200 bg-gray-50">
                          <td className="p-3 font-bold text-gray-700">대상</td>
                          <td className="p-3">사람 (전화기)</td>
                          <td className="p-3">기기 (컴퓨터, 스마트폰 등)</td>
                        </tr>
                        <tr>
                          <td className="p-3 font-bold text-gray-700">필요한 시점</td>
                          <td className="p-3">3명 이상의 전화기</td>
                          <td className="p-3">3개 이상의 인터넷 기기</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                {/* 재미있는 사실 */}
                <div className="bg-gradient-to-r from-orange-50 to-yellow-50 p-6 rounded-lg border border-orange-200 mb-6">
                  <h3 className="text-xl font-bold text-orange-900 mb-4">💡 재미있는 사실</h3>
                  <div className="bg-white p-5 rounded-lg shadow-sm">
                    <p className="text-gray-700 text-lg leading-relaxed mb-4">
                      전 세계 인터넷에 연결된 기기는 
                      <span className="font-bold text-red-600 text-xl"> 약 500억 개</span>가 넘어요! 
                      이 모든 기기가 각자 고유한 IP 주소를 가지고 있답니다. 🌍
                    </p>
                    <div className="mt-4 p-4 bg-blue-50 rounded-lg">
                      <p className="text-sm text-gray-600 mb-2">
                        <strong className="text-blue-700">IPv4:</strong> 우리가 배운 192.168.1.10 같은 형식으로, 
                        약 <span className="font-bold text-blue-600">43억 개</span>의 주소를 만들 수 있어요.
                      </p>
                      <p className="text-sm text-gray-600">
                        <strong className="text-green-700">IPv6:</strong> 기기가 너무 많아져서 새로운 형식이 나왔어요! 
                        2001:0db8:85a3::8a2e:0370:7334 같은 형식으로, 
                        <span className="font-bold text-green-600"> 340조×1조×1조 개</span>를 만들 수 있답니다! 
                        지구의 모래알보다 많아요! 🏖️
                      </p>
                    </div>
                  </div>
                </div>

                <div className="bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-xl border-2 border-indigo-300">
                  <h3 className="text-2xl font-bold text-indigo-800 mb-4 flex items-center gap-2">
                    <span className="text-3xl">💡</span>
                    핵심 정리
                  </h3>
                  <div className="space-y-4">
                    <div className="bg-white p-4 rounded-lg shadow-sm">
                      <p className="font-bold text-blue-700 mb-2">1️⃣ 2개만 있을 때</p>
                      <p className="text-gray-700">
                        선으로 연결하면 끝! 주소(번호)는 필요 없어요. 
                        <span className="font-bold text-orange-600"> 상대가 이미 정해져 있으니까요.</span>
                      </p>
                    </div>
                    <div className="bg-white p-4 rounded-lg shadow-sm">
                      <p className="font-bold text-green-700 mb-2">2️⃣ 3개 이상일 때</p>
                      <p className="text-gray-700">
                        선으로 연결한 후, 각각에게 <span className="font-bold text-green-600">고유한 주소(전화번호/IP 주소)</span>를 부여해요. 
                        그래야 원하는 대상에게만 정확히 연결할 수 있어요!
                      </p>
                    </div>
                    <div className="bg-white p-4 rounded-lg shadow-sm">
                      <p className="font-bold text-purple-700 mb-2">3️⃣ 공통점</p>
                      <p className="text-gray-700">
                        전화든 인터넷이든 <span className="font-bold text-blue-600">①먼저 물리적으로 연결</span>하고, 
                        <span className="font-bold text-green-600"> ②여러 개면 주소로 구별</span>합니다!
                      </p>
                    </div>
                  </div>
                </div>

                <div className="mt-6 text-center">
                  <a 
                    href="index.html" 
                    className="inline-block bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-3 rounded-lg font-bold text-lg hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl"
                  >
                    🏠 홈으로 돌아가기
                  </a>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<NetworkAddressEducation />);
  </script>
</body>
</html>
