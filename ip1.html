<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>IP 주소의 종류 - 고정/유동 IP와 공인/사설 IP, NAT</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { 
      font-family: 'Malgun Gothic', sans-serif; 
      background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 50%, #8b5cf6 100%);
      margin: 0;
      padding: 20px;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.8; }
    }
    @keyframes slideIn {
      from { transform: translateX(-20px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes travel {
      0% { transform: translateX(0); }
      50% { transform: translateX(50%); }
      100% { transform: translateX(100%); }
    }
    .animate-slide-in {
      animation: slideIn 0.5s ease-out;
    }
    .animate-travel {
      animation: travel 2s ease-in-out;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    const IPEducation = () => {
      const [activeTab, setActiveTab] = useState('fixed-dynamic');
      const [dynamicIP, setDynamicIP] = useState('192.168.1.100');
      const [devices, setDevices] = useState([
        { name: '💻 컴퓨터', ip: '192.168.0.2' },
        { name: '📱 스마트폰', ip: '192.168.0.3' },
        { name: '📺 TV', ip: '192.168.0.4' }
      ]);
      const [showTooltip, setShowTooltip] = useState(false);

      // ── 실제 공인 IP (API 실패 시 임의 IP 표시) ──
      const randomPublicIP = () => {
        const prefixes = ['59', '61', '110', '118', '121', '175', '203', '211', '220'];
        const a = prefixes[Math.floor(Math.random() * prefixes.length)];
        const b = Math.floor(Math.random() * 200 + 10);
        const c = Math.floor(Math.random() * 200 + 10);
        const d = Math.floor(Math.random() * 200 + 10);
        return `${a}.${b}.${c}.${d}`;
      };
      const [publicIP, setPublicIP] = useState('불러오는 중...');
      const [ipLoading, setIpLoading] = useState(true);

      useEffect(() => {
        // CORS 안전한 방식으로 순차 시도
        const apis = [
          { url: 'https://api.ipify.org', parse: t => t.trim() },
          { url: 'https://api4.my-ip.io/ip', parse: t => t.trim() },
          { url: 'https://ipecho.net/plain', parse: t => t.trim() },
        ];
        const tryNext = (idx) => {
          if (idx >= apis.length) { setPublicIP(randomPublicIP()); setIpLoading(false); return; }
          fetch(apis[idx].url)
            .then(res => res.text())
            .then(t => {
              const ip = apis[idx].parse(t);
              if (/^\d+\.\d+\.\d+\.\d+$/.test(ip)) { setPublicIP(ip); setIpLoading(false); }
              else tryNext(idx + 1);
            })
            .catch(() => tryNext(idx + 1));
        };
        tryNext(0);
      }, []);

      // ── 퀴즈 state (bit.html 방식) ──
      const [quizAnswers, setQuizAnswers] = useState({});
      const [showQuizResult, setShowQuizResult] = useState(false);

      const quizData = [
        {
          id: 1, tag: null,
          question: '고정 IP에 대한 설명으로 맞는 것은?',
          options: ['인터넷에 연결할 때마다 주소가 바뀐다', '항상 같은 IP 주소를 사용한다', '무료로 사용할 수 있다', '집 안에서만 사용하는 주소다'],
          correct: 1,
          explanation: '고정 IP는 한번 부여받으면 변하지 않는 IP 주소예요. 서버나 CCTV처럼 항상 같은 주소가 필요한 곳에 사용해요.'
        },
        {
          id: 2, tag: null,
          question: '192.168.0.5는 어떤 IP인가요?',
          options: ['공인 IP', '사설 IP', '고정 IP', '유동 IP'],
          correct: 1,
          explanation: '192.168.x.x는 대표적인 사설 IP 범위예요. 집이나 회사 내부에서만 사용하는 주소로, 인터넷에서는 직접 접근할 수 없어요.'
        },
        {
          id: 3, tag: null,
          question: '우리 집 공유기에 연결된 기기들은 무엇을 사용하나요?',
          options: ['모두 같은 사설 IP를 사용한다', '각각 다른 사설 IP를 사용한다', '각각 다른 공인 IP를 사용한다', 'IP 주소가 필요 없다'],
          correct: 1,
          explanation: '공유기는 DHCP를 통해 각 기기에 서로 다른 사설 IP를 자동으로 배정해요. 그래서 컴퓨터·스마트폰·TV 모두 다른 사설 IP를 갖게 돼요.'
        },
        {
          id: 4, tag: null,
          question: '게임 서버를 운영하려면 어떤 IP가 필요한가요?',
          options: ['사설 IP', '유동 IP', '고정 공인 IP', 'IP 주소가 필요 없다'],
          correct: 2,
          explanation: '서버는 항상 같은 주소를 유지해야 다른 사람들이 접속할 수 있어요. 그래서 고정 공인 IP가 필요해요.'
        },
        {
          id: 5, tag: null,
          question: 'NAT의 역할은 무엇인가요?',
          options: ['사설 IP를 공인 IP로 변환해준다', '인터넷 속도를 빠르게 해준다', '바이러스를 차단해준다', 'Wi-Fi 신호를 강하게 해준다'],
          correct: 0,
          explanation: 'NAT(Network Address Translation)는 공유기가 사설 IP를 공인 IP로 변환해서 인터넷에 연결할 수 있게 해주는 기술이에요.'
        },
        {
          id: 6, tag: null,
          question: 'DNS의 역할로 올바른 것은?',
          options: ['사설 IP를 공인 IP로 변환한다', '도메인 이름을 IP 주소로 변환한다', '인터넷 속도를 높여준다', '바이러스를 검사한다'],
          correct: 1,
          explanation: 'DNS는 전화번호부처럼 www.naver.com 같은 도메인 이름을 223.130.200.107 같은 IP 주소로 바꿔줘요. 덕분에 우리는 숫자 대신 이름으로 사이트에 접속할 수 있어요.'
        },
        {
          id: 7, tag: null,
          question: '서브넷 마스크 /24는 무엇을 의미하나요?',
          options: ['사용 가능한 IP 주소가 24개다', '네트워크 속도가 24Mbps다', '앞 24비트가 네트워크 주소를 나타낸다', '24개의 서브넷으로 나뉜다'],
          correct: 2,
          explanation: '/24는 IP 주소 32비트 중 앞 24비트를 네트워크 주소로 사용한다는 뜻이에요. 255.255.255.0과 같은 표현이에요. 나머지 8비트(256개)가 개별 기기 주소로 사용돼요.'
        },
        {
          id: 8, tag: null,
          question: '게이트웨이가 필요한 상황은?',
          options: ['같은 네트워크 안에서 파일을 공유할 때', '다른 네트워크(인터넷)에 접속할 때', 'IP 주소를 새로 받을 때', 'Wi-Fi 비밀번호를 변경할 때'],
          correct: 1,
          explanation: '게이트웨이는 서로 다른 네트워크를 연결하는 입구 역할이에요. 같은 네트워크 내부는 게이트웨이 없이 통신하고, 인터넷(다른 네트워크)으로 나갈 때만 게이트웨이를 통해요.'
        },
      ];

      const handleQuizAnswer = (questionId, selectedIdx) => {
        setQuizAnswers(prev => ({...prev, [questionId]: selectedIdx}));
      };

      const calculateScore = () => quizData.filter(q => quizAnswers[q.id] === q.correct).length;

      const resetQuiz = () => {
        setQuizAnswers({});
        setShowQuizResult(false);
      };

      // DNS 체험 상태
      const [dnsInput, setDnsInput] = useState('');
      const [dnsStep, setDnsStep] = useState(0);
      const [dnsAnimating, setDnsAnimating] = useState(false);
      const [dnsResult, setDnsResult] = useState('');
      const dnsTable = {
        'www.naver.com': '223.130.200.107',
        'www.google.com': '172.217.25.100',
        'www.youtube.com': '142.250.196.110',
        'www.kakao.com': '203.133.167.16',
        'www.moe.go.kr': '27.101.207.36',
      };

      const startDNS = (domain) => {
        const d = domain.trim().toLowerCase();
        if (!d) return;
        setDnsInput(d);
        setDnsStep(0);
        setDnsResult('');
        setDnsAnimating(true);
      };

      useEffect(() => {
        if (dnsAnimating && dnsStep < 3) {
          const t = setTimeout(() => setDnsStep(s => s + 1), 1400);
          return () => clearTimeout(t);
        }
        if (dnsAnimating && dnsStep === 3) {
          const ip = dnsTable[dnsInput] || (Math.floor(Math.random()*200+50)+'.'+Math.floor(Math.random()*200+50)+'.'+Math.floor(Math.random()*200+100)+'.'+Math.floor(Math.random()*200+1));
          setDnsResult(ip);
          setDnsAnimating(false);
        }
      }, [dnsAnimating, dnsStep]);

      // 서브넷 마스크 — 새 state
      const [subnetOctets, setSubnetOctets] = useState([192, 168, 1, 0]);
      const [subnetCidr, setSubnetCidr] = useState(24);
      const [subnetOctetErrors, setSubnetOctetErrors] = useState(['','','','']);

      const handleSubnetOctet = (idx, val) => {
        const n = parseInt(val);
        const errs = [...subnetOctetErrors];
        if (val === '' || isNaN(n)) errs[idx] = '숫자 필요';
        else if (n < 0 || n > 255) errs[idx] = '0~255만';
        else errs[idx] = '';
        setSubnetOctetErrors(errs);
        const next = [...subnetOctets];
        next[idx] = isNaN(n) ? 0 : Math.max(0, Math.min(255, n));
        setSubnetOctets(next);
      };

      // 서브넷 계산 유틸 (ip.html 로직)
      const calcSubnetInfo = (octs, cidr) => {
        const o = octs.map(v => Math.max(0, Math.min(255, isNaN(v) ? 0 : v)));
        const c = Math.max(1, Math.min(32, cidr));
        const maskInt = c === 32 ? 0xFFFFFFFF : (~(0xFFFFFFFF >>> c)) >>> 0;
        const maskOcts = [(maskInt>>>24)&255,(maskInt>>>16)&255,(maskInt>>>8)&255,maskInt&255];
        const ipInt = ((o[0]<<24)|(o[1]<<16)|(o[2]<<8)|o[3]) >>> 0;
        const netInt = (ipInt & maskInt) >>> 0;
        const broadInt = (netInt | (~maskInt >>> 0)) >>> 0;
        const toIP = n => [(n>>>24)&255,(n>>>16)&255,(n>>>8)&255,n&255].join('.');
        const hostBits = 32 - c;
        const hostCount = hostBits >= 2 ? (Math.pow(2, hostBits) - 2)
                        : hostBits === 1 ? 0 : 1;
        return {
          mask: maskOcts.join('.'),
          network: toIP(netInt),
          broadcast: toIP(broadInt),
          firstHost: c < 31 ? toIP(netInt + 1) : toIP(netInt),
          lastHost:  c < 31 ? toIP(broadInt - 1) : toIP(broadInt),
          hosts: c === 32 ? '없음 (단일 기기)'
               : c === 31 ? '2개 (특수 연결용)'
               : hostCount.toLocaleString() + '개',
          hostBits,
        };
      };
      const subnetInfo = calcSubnetInfo(subnetOctets, subnetCidr);

      // 게이트웨이 체험 상태
      const [gwPacketFrom, setGwPacketFrom] = useState('');
      const [gwPacketTo, setGwPacketTo] = useState('');
      const [gwStep, setGwStep] = useState(0);
      const [gwAnimating, setGwAnimating] = useState(false);

      const startGateway = (from, to) => {
        setGwPacketFrom(from);
        setGwPacketTo(to);
        setGwStep(0);
        setGwAnimating(true);
      };

      useEffect(() => {
        if (gwAnimating && gwStep < 4) {
          const t = setTimeout(() => setGwStep(s => s + 1), 1200);
          return () => clearTimeout(t);
        }
        if (gwAnimating && gwStep >= 4) {
          setTimeout(() => { setGwAnimating(false); setGwStep(0); }, 2000);
        }
      }, [gwAnimating, gwStep]);

      // NAT 애니메이션 상태
      const [selectedDevice, setSelectedDevice] = useState(null);
      const [natStep, setNatStep] = useState(0);
      const [isAnimating, setIsAnimating] = useState(false);

      const changeDynamicIP = () => {
        const newIP = '192.168.1.' + Math.floor(Math.random() * 200 + 50);
        setDynamicIP(newIP);
      };

      const addDevice = () => {
        const deviceNames = ['🎮 게임기', '💻 노트북', '⌚ 스마트워치', '🖨️ 프린터', '🎧 이어폰', '🔊 스피커'];
        const randomDevice = deviceNames[Math.floor(Math.random() * deviceNames.length)];
        const newIP = '192.168.0.' + (devices.length + 2);
        setDevices([...devices, { name: randomDevice, ip: newIP }]);
      };

      const startNATAnimation = (device) => {
        setSelectedDevice(device);
        setNatStep(0);
        setIsAnimating(true);
      };

      const nextNatStep = () => {
        if (natStep < 5) setNatStep(natStep + 1);
        if (natStep === 4) setIsAnimating(false);
      };

      return (
        <div className="max-w-7xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden">
          <div className="bg-gradient-to-r from-cyan-600 to-blue-600 p-6 text-white">
            <div className="flex justify-between items-center mb-2">
              <div className="text-sm text-cyan-100">고등학교 정보 학습자료</div>
              <a
                href="index.html"
                className="bg-white text-cyan-600 px-4 py-2 rounded-lg font-bold text-base hover:bg-cyan-50 transition-all shadow-md hover:shadow-lg flex items-center gap-2"
              >
                🏠 홈으로
              </a>
            </div>
            <h1 className="text-3xl font-bold mb-2">🌐 IP 주소의 종류</h1>
            <p className="text-cyan-100">고정/유동 IP와 공인/사설 IP, NAT를 재미있게 배워봅시다!</p>
          </div>

          {/* 탭 메뉴 */}
          <div className="bg-gray-100 px-6 py-4 flex gap-2 border-b border-gray-200 overflow-x-auto">
            <button
              onClick={() => setActiveTab('fixed-dynamic')}
              className={`px-6 py-3 rounded-lg font-bold transition-all whitespace-nowrap ${
                activeTab === 'fixed-dynamic'
                  ? 'bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg'
                  : 'bg-white text-gray-600 hover:bg-gray-50'
              }`}
            >
              고정 IP vs 유동 IP
            </button>
            <button
              onClick={() => setActiveTab('public-private')}
              className={`px-6 py-3 rounded-lg font-bold transition-all whitespace-nowrap ${
                activeTab === 'public-private'
                  ? 'bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg'
                  : 'bg-white text-gray-600 hover:bg-gray-50'
              }`}
            >
              공인 IP vs 사설 IP
            </button>
            <button
              onClick={() => setActiveTab('nat')}
              className={`px-6 py-3 rounded-lg font-bold transition-all whitespace-nowrap ${
                activeTab === 'nat'
                  ? 'bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg'
                  : 'bg-white text-gray-600 hover:bg-gray-50'
              }`}
            >
              NAT 원리
            </button>
            <button
              onClick={() => setActiveTab('dns')}
              className={`px-6 py-3 rounded-lg font-bold transition-all whitespace-nowrap ${
                activeTab === 'dns'
                  ? 'bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg'
                  : 'bg-white text-gray-600 hover:bg-gray-50'
              }`}
            >
              DNS
            </button>
            <button
              onClick={() => setActiveTab('subnet')}
              className={`px-6 py-3 rounded-lg font-bold transition-all whitespace-nowrap ${
                activeTab === 'subnet'
                  ? 'bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg'
                  : 'bg-white text-gray-600 hover:bg-gray-50'
              }`}
            >
              서브넷 마스크
            </button>
            <button
              onClick={() => setActiveTab('gateway')}
              className={`px-6 py-3 rounded-lg font-bold transition-all whitespace-nowrap ${
                activeTab === 'gateway'
                  ? 'bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg'
                  : 'bg-white text-gray-600 hover:bg-gray-50'
              }`}
            >
              게이트웨이
            </button>
            <button
              onClick={() => setActiveTab('quiz')}
              className={`px-6 py-3 rounded-lg font-bold transition-all whitespace-nowrap ${
                activeTab === 'quiz'
                  ? 'bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg'
                  : 'bg-white text-gray-600 hover:bg-gray-50'
              }`}
            >
              퀴즈
            </button>
          </div>

          {/* 고정 IP vs 유동 IP 탭 */}
          {activeTab === 'fixed-dynamic' && (
            <div className="p-8 animate-slide-in">
              <div className="bg-gradient-to-r from-cyan-50 to-blue-50 p-6 rounded-lg border border-cyan-200 mb-6">
                <h3 className="font-bold text-cyan-900 text-lg mb-2">🏠 IP 주소가 뭐예요?</h3>
                <p className="leading-relaxed text-gray-800">
                  <span className="font-bold text-blue-600">IP 주소</span>는 인터넷에 연결된 컴퓨터나 스마트폰의 <span className="font-bold text-cyan-600">주소</span>예요.
                  마치 우리 집에 주소가 있어서 택배를 받을 수 있는 것처럼, 컴퓨터도 IP 주소가 있어야 인터넷에서 데이터를 주고받을 수 있어요!
                </p>
                <div className="bg-white p-3 rounded-lg mt-3 border border-cyan-300">
                  <p className="text-base"><span className="font-bold text-cyan-700">📍 예시:</span> 192.168.0.1 처럼 점(.)으로 구분된 숫자들이에요.</p>
                </div>
              </div>

              {/* 고정 IP와 유동 IP 비교 */}
              <div className="bg-white p-8 rounded-lg border border-gray-200 shadow-lg mb-6">
                <div className="flex items-center justify-center gap-12 flex-wrap">
                  {/* 고정 IP */}
                  <div className="text-center">
                    <h2 className="text-3xl font-bold text-cyan-600 mb-6">🔒 고정 IP</h2>
                    <div className="flex flex-col items-center gap-4">
                      <div className="bg-gradient-to-br from-cyan-100 to-blue-100 p-6 rounded-2xl border-4 border-cyan-500">
                        <div className="text-6xl mb-3">🏠</div>
                        <div className="font-mono text-xl font-bold text-cyan-800">192.168.1.10</div>
                        <div className="mt-3 text-base font-bold text-cyan-800">절대 변하지 않는 주소!</div>
                      </div>
                    </div>                    
                    <br/><br/>
                  </div>


                  {/* 화살표 */}
                  <div className="text-center">
                    <div className="text-xl font-bold text-purple-600 mb-2">vs</div>
                    <div className="text-6xl text-purple-500">⚡</div>
                  </div>

                  {/* 유동 IP */}
                  <div className="text-center">
                    <h2 className="text-3xl font-bold text-purple-600 mb-6">🔄 유동 IP</h2>
                    <div className="flex flex-col items-center gap-4">
                      <div className="bg-gradient-to-br from-purple-100 to-pink-100 p-6 rounded-2xl border-4 border-purple-500">
                        <div className="text-6xl mb-3">🏠</div>
                        <div className="font-mono text-xl font-bold text-purple-800" key={dynamicIP}>
                          {dynamicIP}
                        </div>
                        <div className="mt-3 text-base font-bold text-purple-800">연결할 때마다 바뀌어요!</div>
                      </div>
                      <button
                        onClick={changeDynamicIP}
                        className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-lg font-bold hover:shadow-lg transition-all"
                      >
                        인터넷 다시 연결
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              {/* 장단점 비교 */}
              <div className="grid md:grid-cols-2 gap-6 mb-6">
                {/* 고정 IP */}
                <div className="bg-gradient-to-br from-cyan-50 to-blue-50 p-6 rounded-lg border border-cyan-300">
                  <h3 className="font-bold text-cyan-900 text-lg mb-4">🔒 고정 IP</h3>
                  <div className="space-y-3">
                    <div className="bg-white p-3 rounded-lg border border-cyan-200">
                      <p className="font-bold text-green-700 mb-1">👍 장점</p>
                      <ul className="text-base text-gray-800 space-y-1">
                        <li>• 항상 같은 주소라서 서버 운영에 좋아요</li>
                        <li>• 외부에서 쉽게 접속할 수 있어요</li>
                        <li>• 게임 서버, 웹 서버 운영 가능</li>
                      </ul>
                    </div>
                    <div className="bg-white p-3 rounded-lg border border-cyan-200">
                      <p className="font-bold text-red-700 mb-1">👎 단점</p>
                      <ul className="text-base text-gray-800 space-y-1">
                        <li>• 추가 비용이 들어요 (월 1~2만원)</li>
                        <li>• 보안에 더 신경써야 해요</li>
                      </ul>
                    </div>
                  </div>
                </div>

                {/* 유동 IP */}
                <div className="bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-lg border border-purple-300">
                  <h3 className="font-bold text-purple-900 text-lg mb-4">🔄 유동 IP</h3>
                  <div className="space-y-3">
                    <div className="bg-white p-3 rounded-lg border border-purple-200">
                      <p className="font-bold text-green-700 mb-1">👍 장점</p>
                      <ul className="text-base text-gray-800 space-y-1">
                        <li>• 무료로 사용할 수 있어요</li>
                        <li>• IP가 계속 바뀌어서 보안에 유리해요</li>
                        <li>• 일반 인터넷 사용에 충분해요</li>
                      </ul>
                    </div>
                    <div className="bg-white p-3 rounded-lg border border-purple-200">
                      <p className="font-bold text-red-700 mb-1">👎 단점</p>
                      <ul className="text-base text-gray-800 space-y-1">
                        <li>• 서버 운영이 어려워요</li>
                        <li>• 외부에서 접속하기 힘들어요</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>

              {/* 실생활 예시 */}
              <div className="bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-lg border border-yellow-300">
                <h3 className="font-bold text-orange-900 text-lg mb-3">💡 실생활에서는 이렇게 사용해요!</h3>
                <div className="grid md:grid-cols-2 gap-4">
                  <div className="bg-white p-4 rounded-lg border border-yellow-300">
                    <p className="font-bold text-cyan-700 mb-2">🔒 고정 IP를 사용하는 경우</p>
                    <ul className="text-base text-gray-800 space-y-1">
                      <li>• 마인크래프트 서버 운영</li>
                      <li>• 회사 웹사이트 호스팅</li>
                      <li>• CCTV 원격 모니터링</li>
                      <li>• FTP 파일 서버</li>
                    </ul>
                  </div>
                  <div className="bg-white p-4 rounded-lg border border-yellow-300">
                    <p className="font-bold text-purple-700 mb-2">🔄 유동 IP를 사용하는 경우</p>
                    <ul className="text-base text-gray-800 space-y-1">
                      <li>• 일반 가정집 인터넷</li>
                      <li>• 웹서핑, 유튜브 시청</li>
                      <li>• 온라인 게임 접속</li>
                      <li>• 카톡, 인스타그램 사용</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* 공인 IP vs 사설 IP 탭 */}
          {activeTab === 'public-private' && (
            <div className="p-8 animate-slide-in">
              <div className="bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-lg border border-green-300 mb-6">
                <h3 className="font-bold text-green-900 text-lg mb-2">🌍 공인 IP와 사설 IP는 왜 필요할까요?</h3>
                <p className="leading-relaxed text-gray-800">
                  전 세계 사람들이 모두 인터넷을 사용하는데, IP 주소가 부족해요! 
                  그래서 <span className="font-bold text-green-600">공인 IP</span>는 전 세계에서 하나만 있고,
                  <span className="font-bold text-blue-600"> 사설 IP</span>는 집 안에서만 사용하는 주소로 나눴어요.
                </p>
              </div>

              {/* 우리집 네트워크 시각화 */}
              <div className="bg-white p-8 rounded-lg border border-gray-200 shadow-lg mb-6">
                <h3 className="text-lg font-bold text-center mb-6 text-gray-800">🏠 우리 집 네트워크</h3>
                
                <div className="flex flex-col items-center gap-8">
                  {/* 인터넷 (공인 IP) */}
                  <div className="text-center">
                    <div className="bg-gradient-to-br from-blue-500 to-purple-600 text-white p-6 rounded-2xl shadow-xl">
                      <div className="text-5xl mb-2">🌐</div>
                      <div className="font-bold text-xl">인터넷</div>
                      <div className="bg-white text-blue-600 font-mono font-bold px-4 py-2 rounded-lg mt-2">
                        {ipLoading ? <span className="animate-pulse text-gray-400">불러오는 중...</span> : publicIP}
                      </div>
                      <div className="text-base mt-1 text-blue-100">나의 공인 IP 🎯</div>
                    </div>
                  </div>

                  {/* 연결선 */}
                  <div className="text-4xl text-gray-400">⬇️</div>

                  {/* 공유기 */}
                  <div className="text-center">
                    <div className="bg-gradient-to-br from-orange-400 to-red-500 text-white p-6 rounded-2xl shadow-xl">
                      <div className="text-5xl mb-2">📡</div>
                      <div className="font-bold text-xl">공유기  (라우터)</div>
                      <div className="text-base mt-1">주소 변환 장치</div>
                    </div>
                  </div>

                  {/* 연결선 */}
                  <div className="text-4xl text-gray-400">⬇️</div>

                  {/* 집 안 기기들 (사설 IP) */}
                  <div className="bg-gradient-to-r from-cyan-50 to-blue-50 p-6 rounded-lg border-2 border-cyan-300 w-full">
                    <div className="text-center mb-4">
                      <div className="font-bold text-cyan-900 text-lg">집 안 네트워크 (사설 IP)</div>
                      <div className="text-base text-gray-600">우리 집 안에서만 사용하는 주소들</div>
                    </div>
                    <div className="flex flex-wrap justify-center gap-4">
                      {devices.map((device, idx) => (
                        <div key={idx} className="bg-white p-4 rounded-lg border border-cyan-300 text-center">
                          <div className="text-xl mb-2">{device.name}</div>
                          <div className="font-mono text-base font-bold text-cyan-700">{device.ip}</div>
                        </div>
                      ))}
                    </div>
                    <button
                      onClick={addDevice}
                      className="mt-4 w-full bg-gradient-to-r from-cyan-500 to-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transition-all"
                    >
                      ➕ 기기 추가하기
                    </button>
                  </div>
                </div>
              </div>

              {/* 주요 특징 비교 */}
              <div className="grid md:grid-cols-2 gap-6 mb-6">
                <div className="bg-gradient-to-br from-blue-50 to-purple-50 p-6 rounded-lg border border-blue-300">
                  <h3 className="font-bold text-blue-900 text-lg mb-4 flex items-center gap-2">
                    🌍 공인 IP (Public IP)
                  </h3>
                  <div className="space-y-3">
                    <div className="bg-white p-3 rounded-lg border border-blue-200">
                      <p className="font-bold text-blue-700 mb-1">📍 특징</p>
                      <ul className="text-base text-gray-800 space-y-1">
                        <li>• 전 세계에서 유일한 주소</li>
                        <li>• 통신사(KT, SK 등)가 제공</li>
                        <li>• 인터넷에서 직접 접근 가능</li>
                        <li>• 한정된 개수 (약 43억 개)</li>
                      </ul>
                    </div>
                    <div className="bg-white p-3 rounded-lg border border-blue-200">
                      <p className="font-bold text-blue-700 mb-1">📌 예시</p>
                      <p className="text-base text-gray-800 font-mono">{publicIP} <span className="text-xs text-green-600 font-bold">(나의 공인 IP)</span></p>
                      <p className="text-base text-gray-800 font-mono">8.8.8.8 (구글 DNS)</p>
                    </div>
                  </div>
                </div>

                <div className="bg-gradient-to-br from-cyan-50 to-teal-50 p-6 rounded-lg border border-cyan-300">
                  <h3 className="font-bold text-cyan-900 text-lg mb-4 flex items-center gap-2">
                    🏠 사설 IP (Private IP)
                  </h3>
                  <div className="space-y-3">
                    <div className="bg-white p-3 rounded-lg border border-cyan-200">
                      <p className="font-bold text-cyan-700 mb-1">📍 특징</p>
                      <ul className="text-base text-gray-800 space-y-1">
                        <li>• 집이나 회사 안에서만 사용</li>
                        <li>• 공유기가 자동으로 배정</li>
                        <li>• 인터넷에서 직접 접근 불가</li>
                        <li>• 무제한으로 사용 가능</li>
                      </ul>
                    </div>
                    <div className="bg-white p-3 rounded-lg border border-cyan-200">
                      <p className="font-bold text-cyan-700 mb-1">📌 대표적인 범위</p>
                      <p className="text-base text-gray-800 font-mono">192.168.x.x</p>
                      <p className="text-base text-gray-800 font-mono">10.x.x.x</p>
                      <p className="text-base text-gray-800 font-mono">172.16.x.x ~ 172.31.x.x</p>
                    </div>
                  </div>
                </div>
              </div>

              {/* 왜 이렇게 나눴을까요? */}
              <div className="bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-lg border border-yellow-300">
                <h3 className="font-bold text-orange-900 text-lg mb-3">💡 왜 공인 IP와 사설 IP로 나눴을까요?</h3>
                <div className="bg-white p-4 rounded-lg border border-yellow-300 mb-3">
                  <p className="font-bold text-red-600 mb-2">❌ 문제: IP 주소가 부족해요!</p>
                  <p className="text-base text-gray-800">
                    IPv4는 약 43억 개의 주소만 만들 수 있어요. 하지만 전 세계 인터넷 기기는 
                    수백억 개! 모든 기기에 공인 IP를 주면 주소가 부족해요.
                  </p>
                </div>
                <div className="bg-white p-4 rounded-lg border border-yellow-300">
                  <p className="font-bold text-green-600 mb-2">✅ 해결: 사설 IP를 사용해요!</p>
                  <p className="text-base text-gray-800">
                    집마다 하나의 공인 IP만 사용하고, 집 안 기기들은 사설 IP를 사용해요.
                    이렇게 하면 43억 개의 공인 IP로 전 세계 모든 사람이 인터넷을 쓸 수 있어요!
                  </p>
                </div>
              </div>
            </div>
          )}

          {/* NAT 원리 탭 */}
          {activeTab === 'nat' && (
            <div className="p-8 animate-slide-in">
              <div className="bg-gradient-to-r from-orange-50 to-red-50 p-6 rounded-lg border border-orange-300 mb-6">
                <h3 className="font-bold text-orange-900 text-lg mb-3">🔄 NAT가 뭔가요?</h3>
                <p className="leading-relaxed text-gray-800 mb-2">
                  <span className="font-bold text-orange-600">NAT</span>는 <span className="font-bold">Network Address Translation</span>의 약자로, 
                  <span className="font-bold text-blue-600"> "네트워크 주소 변환"</span>이라는 뜻이에요.
                </p>
                <p className="leading-relaxed text-gray-800">
                  쉽게 말하면, 공유기가 <span className="font-bold text-green-600">사설 IP</span>를 
                  <span className="font-bold text-purple-600"> 공인 IP</span>로 바꿔주는 일을 해요! 
                  마치 <span className="font-bold">통역사</span>처럼요! 🗣️
                </p>
              </div>

              {/* 비유로 이해하기 */}
              <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-lg mb-6">
                <h3 className="font-bold text-gray-800 text-lg mb-4 text-center">🏢 아파트 우편물로 이해하는 NAT</h3>
                <div className="grid md:grid-cols-3 gap-4">
                  <div className="bg-blue-50 p-4 rounded-lg border border-blue-300 text-center">
                    <div className="text-4xl mb-2">📬</div>
                    <p className="font-bold text-blue-700 mb-2">집 주소 = 공인 IP</p>
                    <p className="text-base text-gray-800">서울시 강남구 123번지<br/>({publicIP})</p>
                  </div>
                  <div className="bg-orange-50 p-4 rounded-lg border border-orange-300 text-center">
                    <div className="text-4xl mb-2">🚪</div>
                    <p className="font-bold text-orange-700 mb-2">경비실 = 공유기</p>
                    <p className="text-base text-gray-800">우편물을 받아서<br/>각 집으로 배달</p>
                  </div>
                  <div className="bg-cyan-50 p-4 rounded-lg border border-cyan-300 text-center">
                    <div className="text-4xl mb-2">🏠</div>
                    <p className="font-bold text-cyan-700 mb-2">호수 = 사설 IP</p>
                    <p className="text-base text-gray-800">101호, 102호, 103호<br/>(192.168.0.2, 192.168.0.3...)</p>
                  </div>
                </div>
                <div className="bg-yellow-50 p-4 rounded-lg border border-yellow-300 mt-4">
                  <p className="text-base text-gray-800 leading-relaxed">
                    <span className="font-bold">💡 설명:</span> 우체부는 아파트 주소(공인 IP)만 알고 있어요. 
                    경비실(공유기)에서 우편물을 받아서 101호(192.168.0.2), 102호(192.168.0.3)로 나눠주는 것처럼, 
                    NAT는 인터넷 데이터를 각 기기로 전달해줘요!
                  </p>
                </div>
              </div>

              {/* NAT 동작 과정 인터랙티브 */}
              <div className="bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-lg border border-purple-300 mb-6">
                <h3 className="font-bold text-purple-900 text-lg mb-4 text-center">🔄 NAT 동작 과정 (클릭해보세요!)</h3>
                
                {!selectedDevice && (
                  <div className="grid grid-cols-2 md:grid-cols-3 gap-3 mb-6">
                    {[
                      { name: '💻 컴퓨터', ip: '192.168.0.2' },
                      { name: '📱 스마트폰', ip: '192.168.0.3' },
                      { name: '📺 TV', ip: '192.168.0.4' }
                    ].map((device, idx) => (
                      <button
                        key={idx}
                        onClick={() => startNATAnimation(device)}
                        className="bg-white p-4 rounded-lg border-2 border-cyan-300 hover:border-purple-500 hover:shadow-lg transition-all"
                      >
                        <div className="text-xl mb-2">{device.name}</div>
                        <div className="font-mono text-base font-bold text-cyan-700">{device.ip}</div>
                        <div className="text-sm text-gray-500 mt-2">클릭하여 작동 확인</div>
                      </button>
                    ))}
                  </div>
                )}

                {selectedDevice && (
                  <div className="space-y-6">
                    {/* 단계별 설명 */}
                    <div className="bg-white p-4 rounded-lg border border-purple-300">
                      <div className="flex items-center gap-3 mb-2">
                        <div className="w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">
                          {natStep + 1}
                        </div>
                        <p className="font-bold text-gray-800 flex-1">
                          {natStep === 0 && `${selectedDevice.name}이(가) 유튜브를 보고 싶어요!`}
                          {natStep === 1 && "① 기기가 공유기에게 요청을 보냅니다"}
                          {natStep === 2 && "② 공유기가 사설 IP를 공인 IP로 변환합니다"}
                          {natStep === 3 && "③ 공유기가 인터넷으로 데이터를 보냅니다"}
                          {natStep === 4 && "④ 인터넷에서 공유기로 응답이 돌아옵니다"}
                          {natStep === 5 && "⑤ 공유기가 공인 IP를 다시 사설 IP로 변환해서 기기에 전달합니다! 🎉"}
                        </p>
                      </div>
                      {/* 진행 바 */}
                      <div className="flex gap-1 mt-3">
                        {[0,1,2,3,4,5].map(i => (
                          <div key={i} className={`flex-1 h-2 rounded-full transition-all duration-300 ${i <= natStep ? 'bg-purple-500' : 'bg-gray-200'}`} />
                        ))}
                      </div>
                    </div>

                    {/* 시각화 */}
                    <div className="relative bg-white p-8 rounded-lg border border-gray-300 min-h-64">
                      {/* 기기 */}
                      <div className={`absolute left-8 top-1/2 -translate-y-1/2 transition-all duration-500 ${natStep >= 1 ? 'opacity-100' : 'opacity-50'}`}>
                        <div className="bg-cyan-100 p-4 rounded-lg border-2 border-cyan-500 text-center">
                          <div className="text-3xl mb-2">{selectedDevice.name}</div>
                          <div className="font-mono text-sm font-bold text-cyan-700">{selectedDevice.ip}</div>
                          <div className="text-sm text-gray-600 mt-1">사설 IP</div>
                        </div>
                      </div>

                      {/* 화살표 1 (기기 → 공유기) : step 1 */}
                      {natStep === 1 && (
                        <div className="absolute left-1/2 top-1/2 -translate-x-32 -translate-y-1/2 w-24">
                          <div className="text-3xl animate-pulse">→</div>
                          <div className="text-sm text-gray-600 text-left mt-1">요청</div>
                        </div>
                      )}

                      {/* 공유기 */}
                      <div className={`absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 transition-all duration-500 ${natStep >= 2 ? 'scale-110 opacity-100' : 'opacity-50'}`}>
                        <div className="bg-orange-100 p-4 rounded-lg border-2 border-orange-500 text-center">
                          <div className="text-4xl mb-2">📡</div>
                          <div className="font-bold text-orange-700">공유기</div>
                          <div className="text-sm text-gray-600 mt-1">NAT 변환 중</div>
                          {natStep >= 2 && (
                            <div className="mt-2 text-sm space-y-1">
                              <div className="text-cyan-700 font-mono">{selectedDevice.ip}</div>
                              <div>⬇️</div>
                              <div className="text-purple-700 font-mono">{publicIP}</div>
                            </div>
                          )}
                        </div>
                      </div>

                      {/* 화살표 2 (공유기 → 인터넷) : step 3 */}
                      {natStep === 3 && (
                        <div className="absolute left-1/2 translate-x-32 top-1/2 -translate-y-1/2 w-24">
                          <div className="text-3xl animate-pulse">→</div>
                          <div className="text-sm text-gray-600 text-left mt-1">변환됨</div>
                        </div>
                      )}

                      {/* 인터넷 */}
                      <div className={`absolute right-8 top-1/2 -translate-y-1/2 transition-all duration-500 ${natStep >= 3 ? 'opacity-100' : 'opacity-50'}`}>
                        <div className="bg-purple-100 p-4 rounded-lg border-2 border-purple-500 text-center">
                          <div className="text-4xl mb-2">🌐</div>
                          <div className="font-bold text-purple-700">인터넷</div>
                          <div className="font-mono text-sm font-bold text-purple-700 mt-1">{publicIP}</div>
                          <div className="text-sm text-gray-600 mt-1">공인 IP</div>
                        </div>
                      </div>

                      {/* 화살표 3 (인터넷 → 공유기, 응답) : step 4 */}
                      {natStep === 4 && (
                        <div className="absolute left-1/2 translate-x-32 bottom-12 w-24">
                          <div className="text-3xl animate-pulse text-green-600">←</div>
                          <div className="text-sm text-green-600 text-left mt-1">응답</div>
                        </div>
                      )}

                      {/* 화살표 4 (공유기 → 기기, 응답) : step 5 */}
                      {natStep === 5 && (
                        <div className="absolute left-1/2 -translate-x-32 bottom-12 w-24">
                          <div className="text-3xl animate-pulse text-green-600">←</div>
                          <div className="text-sm text-green-600 text-left mt-1">전달!</div>
                        </div>
                      )}
                    </div>

                    {/* 이전 / 다음 버튼 */}
                    <div className="flex justify-between items-center mt-2 gap-3">
                      <button
                        onClick={() => { setSelectedDevice(null); setNatStep(0); setIsAnimating(false); }}
                        className="bg-gray-200 text-gray-700 px-5 py-2 rounded-lg font-bold hover:bg-gray-300 transition-all"
                      >
                        ↩ 처음으로
                      </button>
                      <span className="text-sm text-gray-500 font-bold">{natStep + 1} / 6 단계</span>
                      {natStep < 5 ? (
                        <button
                          onClick={() => setNatStep(natStep + 1)}
                          className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-5 py-2 rounded-lg font-bold hover:shadow-lg transition-all"
                        >
                          다음 단계 →
                        </button>
                      ) : (
                        <button
                          onClick={() => { setSelectedDevice(null); setNatStep(0); setIsAnimating(false); }}
                          className="bg-gradient-to-r from-green-500 to-emerald-600 text-white px-5 py-2 rounded-lg font-bold hover:shadow-lg transition-all"
                        >
                          🔄 다시 보기
                        </button>
                      )}
                    </div>
                  </div>
                )}
              </div>

              {/* NAT 테이블 설명 */}
              <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-lg mb-6">
                <h3 className="font-bold text-gray-800 text-lg mb-4">📋 NAT 변환 테이블</h3>
                <p className="text-base text-gray-600 mb-4">
                  공유기는 어떤 기기가 어떤 요청을 보냈는지 기억하기 위해 테이블을 만들어요!
                </p>
                <div className="overflow-x-auto">
                  <table className="w-full border-collapse">
                    <thead>
                      <tr className="bg-gradient-to-r from-cyan-600 to-blue-600 text-white">
                        <th className="border border-gray-300 px-4 py-3 text-left">내부 주소 (사설 IP)</th>
                        <th className="border border-gray-300 px-4 py-3 text-left">포트</th>
                        <th className="border border-gray-300 px-4 py-3 text-center">↔️</th>
                        <th className="border border-gray-300 px-4 py-3 text-left">외부 주소 (공인 IP)</th>
                        <th className="border border-gray-300 px-4 py-3 text-left">포트</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr className="bg-cyan-50">
                        <td className="border border-gray-300 px-4 py-3 font-mono text-base">192.168.0.2</td>
                        <td className="border border-gray-300 px-4 py-3 font-mono text-base">5001</td>
                        <td className="border border-gray-300 px-4 py-3 text-center">🔄</td>
                        <td className="border border-gray-300 px-4 py-3 font-mono text-base">{publicIP}</td>
                        <td className="border border-gray-300 px-4 py-3 font-mono text-base">5001</td>
                      </tr>
                      <tr className="bg-white">
                        <td className="border border-gray-300 px-4 py-3 font-mono text-base">192.168.0.3</td>
                        <td className="border border-gray-300 px-4 py-3 font-mono text-base">5002</td>
                        <td className="border border-gray-300 px-4 py-3 text-center">🔄</td>
                        <td className="border border-gray-300 px-4 py-3 font-mono text-base">{publicIP}</td>
                        <td className="border border-gray-300 px-4 py-3 font-mono text-base">5002</td>
                      </tr>
                      <tr className="bg-cyan-50">
                        <td className="border border-gray-300 px-4 py-3 font-mono text-base">192.168.0.4</td>
                        <td className="border border-gray-300 px-4 py-3 font-mono text-base">5003</td>
                        <td className="border border-gray-300 px-4 py-3 text-center">🔄</td>
                        <td className="border border-gray-300 px-4 py-3 font-mono text-base">{publicIP}</td>
                        <td className="border border-gray-300 px-4 py-3 font-mono text-base">5003</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div className="bg-yellow-50 p-4 rounded-lg border border-yellow-300 mt-4">
                  <p className="text-base text-gray-800">
                    <span className="font-bold">💡 포인트:</span> 공유기는 포트 번호를 사용해서 어느 기기에서 온 데이터인지 구분해요!
                  </p>
                </div>
              </div>

              {/* NAT의 장점 */}
              <div className="grid md:grid-cols-2 gap-6">
                <div className="bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-lg border border-green-300">
                  <h3 className="font-bold text-green-900 text-lg mb-3">👍 NAT의 장점</h3>
                  <ul className="space-y-2 text-base text-gray-800">
                    <li className="flex items-start gap-2">
                      <span className="text-green-600 font-bold">✓</span>
                      <span><span className="font-bold">IP 주소 절약:</span> 하나의 공인 IP로 여러 기기 사용 가능</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-green-600 font-bold">✓</span>
                      <span><span className="font-bold">보안 강화:</span> 외부에서 내부 기기를 직접 볼 수 없음</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-green-600 font-bold">✓</span>
                      <span><span className="font-bold">비용 절감:</span> 공인 IP를 적게 사용하므로 저렴</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-green-600 font-bold">✓</span>
                      <span><span className="font-bold">유연성:</span> 내부 네트워크를 자유롭게 구성 가능</span>
                    </li>
                  </ul>
                </div>

                <div className="bg-gradient-to-br from-orange-50 to-red-50 p-6 rounded-lg border border-orange-300">
                  <h3 className="font-bold text-orange-900 text-lg mb-3">👎 NAT의 단점</h3>
                  <ul className="space-y-2 text-base text-gray-800">
                    <li className="flex items-start gap-2">
                      <span className="text-orange-600 font-bold">✗</span>
                      <span><span className="font-bold">서버 운영 어려움:</span> 외부에서 내부로 직접 접속 불가</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-orange-600 font-bold">✗</span>
                      <span><span className="font-bold">처리 속도:</span> 주소 변환에 약간의 시간 소요</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-orange-600 font-bold">✗</span>
                      <span><span className="font-bold">일부 앱 문제:</span> P2P 프로그램 등에서 제약 가능</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-orange-600 font-bold">✗</span>
                      <span><span className="font-bold">포트 포워딩 필요:</span> 서버 운영 시 추가 설정 필요</span>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          )}

          {/* DNS 탭 */}
          {activeTab === 'dns' && (
            <div className="p-8 animate-slide-in">
              {/* 개념 설명 */}
              <div className="bg-gradient-to-r from-green-50 to-teal-50 p-6 rounded-lg border border-green-300 mb-6">
                <h3 className="font-bold text-green-900 text-lg mb-2">📖 DNS가 뭔가요?</h3>
                <p className="text-gray-800 leading-relaxed mb-3">
                  <span className="font-bold text-green-700">DNS</span>는 <span className="font-bold">Domain Name System</span>의 약자예요.<br/>
                  우리가 인터넷 주소창에 <span className="font-bold text-blue-600">www.naver.com</span> 이라고 입력하면, 
                  컴퓨터는 사실 숫자로 된 <span className="font-bold text-red-600">IP 주소</span>로 찾아가야 해요.<br/>
                  DNS는 마치 <span className="font-bold text-orange-600">전화번호부</span>처럼 도메인 이름을 IP 주소로 바꿔주는 역할을 해요!
                </p>
                <div className="grid md:grid-cols-3 gap-3">
                  <div className="bg-white p-3 rounded-lg border border-green-200 text-center">
                    <div className="text-3xl mb-1">📖</div>
                    <p className="text-base font-bold text-green-700">DNS = 전화번호부</p>
                    <p className="text-sm text-gray-600">이름 → 번호</p>
                  </div>
                  <div className="bg-white p-3 rounded-lg border border-green-200 text-center">
                    <div className="text-3xl mb-1">🌐</div>
                    <p className="text-base font-bold text-blue-700">도메인 이름</p>
                    <p className="text-sm text-gray-600 font-mono">www.naver.com</p>
                  </div>
                  <div className="bg-white p-3 rounded-lg border border-green-200 text-center">
                    <div className="text-3xl mb-1">🔢</div>
                    <p className="text-base font-bold text-red-700">IP 주소</p>
                    <p className="text-sm text-gray-600 font-mono">223.130.200.107</p>
                  </div>
                </div>
              </div>

              {/* DNS 체험 */}
              <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-lg mb-6">
                <h3 className="font-bold text-gray-800 text-lg mb-4 text-center">🔍 DNS 직접 체험해보기!</h3>
                <p className="text-center text-gray-600 text-base mb-4">아래 사이트 중 하나를 클릭하거나 직접 입력해보세요!</p>

                {/* 빠른 선택 버튼 */}
                <div className="flex flex-wrap justify-center gap-2 mb-4">
                  {Object.keys(dnsTable).map(domain => (
                    <button
                      key={domain}
                      onClick={() => startDNS(domain)}
                      disabled={dnsAnimating}
                      className="bg-gradient-to-r from-green-100 to-teal-100 border-2 border-green-400 text-green-800 px-4 py-2 rounded-full font-mono text-base font-bold hover:shadow-md transition-all disabled:opacity-40"
                    >
                      {domain}
                    </button>
                  ))}
                </div>

                {/* 직접 입력 */}
                <div className="flex gap-2 mb-6">
                  <input
                    type="text"
                    placeholder="도메인 직접 입력 (예: www.samsung.com)"
                    className="flex-1 border-2 border-gray-300 rounded-lg px-4 py-2 font-mono text-base focus:outline-none focus:border-green-500"
                    onKeyDown={(e) => { if (e.key === 'Enter') startDNS(e.target.value); }}
                    id="dnsInputField"
                  />
                  <button
                    onClick={() => startDNS(document.getElementById('dnsInputField').value)}
                    disabled={dnsAnimating}
                    className="bg-gradient-to-r from-green-600 to-teal-600 text-white px-5 py-2 rounded-lg font-bold hover:shadow-lg transition-all disabled:opacity-40"
                  >
                    검색!
                  </button>
                </div>

                {/* DNS 동작 애니메이션 */}
                {(dnsAnimating || dnsResult) && (
                  <div className="bg-gray-50 rounded-xl p-6 border border-gray-200">
                    <div className="flex items-center justify-between flex-wrap gap-4">

                      {/* 내 컴퓨터 */}
                      <div className={`text-center transition-all duration-500 ${dnsStep >= 0 ? 'opacity-100' : 'opacity-30'}`}>
                        <div className="bg-blue-100 border-2 border-blue-400 rounded-xl p-4 w-32">
                          <div className="text-3xl mb-1">💻</div>
                          <div className="text-sm font-bold text-blue-700">내 컴퓨터</div>
                          {dnsStep >= 0 && <div className="text-sm font-mono text-gray-600 mt-1 break-all">{dnsInput}</div>}
                        </div>
                      </div>

                      {/* 화살표1 */}
                      <div className="flex flex-col items-center">
                        <div className={`text-2xl transition-all duration-300 ${dnsStep >= 1 ? 'text-green-600 scale-125' : 'text-gray-300'}`}>→</div>
                        {dnsStep >= 1 && <div className="text-sm text-green-700 font-bold">①요청</div>}
                      </div>

                      {/* DNS 서버 */}
                      <div className={`text-center transition-all duration-500 ${dnsStep >= 1 ? 'opacity-100 scale-105' : 'opacity-30'}`}>
                        <div className="bg-yellow-100 border-2 border-yellow-400 rounded-xl p-4 w-32">
                          <div className="text-3xl mb-1">🗄️</div>
                          <div className="text-sm font-bold text-yellow-700">DNS 서버</div>
                          <div className="text-sm text-gray-500 mt-1">전화번호부</div>
                          {dnsStep >= 2 && <div className="text-sm text-orange-600 font-bold mt-1 animate-pulse">🔍 검색 중...</div>}
                        </div>
                      </div>

                      {/* 화살표2 */}
                      <div className="flex flex-col items-center">
                        <div className={`text-2xl transition-all duration-300 ${dnsStep >= 3 ? 'text-purple-600 scale-125' : 'text-gray-300'}`}>→</div>
                        {dnsStep >= 3 && <div className="text-sm text-purple-700 font-bold">②응답</div>}
                      </div>

                      {/* 결과 */}
                      <div className={`text-center transition-all duration-500 ${dnsResult ? 'opacity-100 scale-110' : 'opacity-30'}`}>
                        <div className="bg-green-100 border-2 border-green-400 rounded-xl p-4 w-36">
                          <div className="text-3xl mb-1">✅</div>
                          <div className="text-sm font-bold text-green-700">IP 주소 발견!</div>
                          {dnsResult && <div className="text-sm font-mono text-green-800 font-bold mt-1 break-all">{dnsResult}</div>}
                        </div>
                      </div>
                    </div>

                    {/* 단계 설명 */}
                    <div className="mt-4 bg-white p-3 rounded-lg border border-gray-200 text-base text-gray-800 text-center">
                      {dnsStep === 0 && <span>💻 <strong>{dnsInput}</strong>에 접속하려 해요!</span>}
                      {dnsStep === 1 && <span>📤 DNS 서버에게 "<strong>{dnsInput}</strong>의 IP 주소가 뭔가요?" 물어봐요!</span>}
                      {dnsStep === 2 && <span>🔍 DNS 서버가 전화번호부에서 <strong>{dnsInput}</strong>을 찾고 있어요...</span>}
                      {dnsStep === 3 && <span>📬 IP 주소를 찾았어요! 이제 그 주소로 접속합니다!</span>}
                      {dnsResult && dnsStep === 3 && (
                        <div className="mt-2 bg-green-50 p-2 rounded border border-green-200">
                          🎉 <strong>{dnsInput}</strong> = <span className="font-mono text-green-700 font-bold">{dnsResult}</span>
                        </div>
                      )}
                    </div>
                  </div>
                )}
              </div>

              {/* DNS 동작 순서 요약 */}
              <div className="bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg border border-blue-200">
                <h3 className="font-bold text-blue-900 text-lg mb-4">📋 DNS 동작 순서 정리</h3>
                <div className="grid md:grid-cols-4 gap-3">
                  {[
                    { step: '①', icon: '💻', title: '주소 입력', desc: '브라우저에 www.naver.com 입력' },
                    { step: '②', icon: '📤', title: 'DNS 요청', desc: 'DNS 서버에 IP 주소 요청' },
                    { step: '③', icon: '🔍', title: 'IP 조회', desc: 'DNS 서버가 IP 주소 검색' },
                    { step: '④', icon: '🌐', title: '접속!', desc: 'IP 주소로 웹사이트에 접속' },
                  ].map(item => (
                    <div key={item.step} className="bg-white p-4 rounded-lg border border-blue-200 text-center">
                      <div className="text-2xl font-bold text-blue-600 mb-1">{item.step}</div>
                      <div className="text-3xl mb-2">{item.icon}</div>
                      <div className="font-bold text-base text-gray-800 mb-1">{item.title}</div>
                      <div className="text-sm text-gray-600">{item.desc}</div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          )}

          {/* 서브넷 마스크 탭 */}
          {activeTab === 'subnet' && (
            <div className="p-6 md:p-8 animate-slide-in">

              {/* ① 서브넷이란? */}
              <div className="bg-green-50 border border-green-200 rounded-xl p-5 mb-5 text-base text-gray-700 leading-relaxed">
                <div className="font-bold text-green-800 text-lg mb-2">🏘️ 서브넷(Subnet)이 뭐예요?</div>
                <p className="mb-3">
                  인터넷 전체를 <strong>거대한 도시</strong>라고 하면, 서브넷은 그 도시 안의 <strong>아파트 단지</strong>예요.
                  하나의 큰 네트워크를 용도나 장소에 따라 <strong>작은 구역으로 나눈 것</strong>이 서브넷이에요.
                </p>
                <div className="bg-white rounded-lg p-4 border border-green-200 font-mono text-sm leading-loose text-gray-700">
                  🌆 인터넷 (거대한 도시)<br/>
                  &nbsp;├── 🏢 1반 네트워크 &nbsp;(192.168.1.???)<br/>
                  &nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;├── PC-01 (192.168.1.1)<br/>
                  &nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;└── PC-02 (192.168.1.2)<br/>
                  &nbsp;└── 🏢 2반 네트워크 &nbsp;(192.168.2.???)<br/>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├── PC-01 (192.168.2.1)<br/>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└── PC-02 (192.168.2.2)
                </div>
              </div>

              {/* ② 왜 나눠요? */}
              <div className="bg-yellow-50 border border-yellow-200 rounded-xl p-5 mb-5 text-base text-gray-700 leading-relaxed">
                <div className="font-bold text-yellow-800 text-lg mb-3">🤔 왜 굳이 나눌까요?</div>
                <div className="space-y-3">
                  <div className="flex items-start gap-3">
                    <span className="text-2xl">🚦</span>
                    <div><strong>교통 정리</strong> — 컴퓨터가 많을수록 신호가 뒤엉켜요. 반별로 나누면 각 반 안에서만 신호가 돌아서 훨씬 빠르고 조용해져요.</div>
                  </div>
                  <div className="flex items-start gap-3">
                    <span className="text-2xl">🔒</span>
                    <div><strong>보안</strong> — 서버실(2반)과 학생 PC(1반)를 다른 서브넷으로 분리하면, 학생이 실수로 서버에 접근하는 걸 막을 수 있어요.</div>
                  </div>
                  <div className="flex items-start gap-3">
                    <span className="text-2xl">📦</span>
                    <div><strong>효율</strong> — 필요한 만큼만 IP를 나눠쓰기 때문에 IP 주소 낭비가 없어요.</div>
                  </div>
                </div>
              </div>

              {/* ③ 라우터가 경비원 */}
              <div className="bg-red-50 border border-red-200 rounded-xl p-5 mb-5 text-base text-gray-700 leading-relaxed">
                <div className="font-bold text-red-800 text-lg mb-2">🚧 그럼 어떻게 접근을 막아요? — 라우터가 경비원!</div>
                <p className="mb-3">
                  서브넷을 나누는 것만으로는 자동으로 막히지 않아요.
                  서로 다른 서브넷 사이에는 반드시 <strong>라우터(Router)</strong>를 거쳐야 하는데,
                  바로 이 라우터에 <strong>"1반 → 2반 통행 금지"</strong> 규칙을 설정하면 차단돼요.
                </p>
                <div className="bg-white rounded-lg p-4 border border-red-200 font-mono text-sm leading-loose text-gray-700">
                  🖥️ 1반 PC (192.168.1.10)<br/>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│ "2반 서버에 접속하고 싶어요!"<br/>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;▼<br/>
                  &nbsp;&nbsp;🚦 라우터 (교문 경비원)<br/>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│ 규칙 확인 중... ❌ 1반은 2반 접근 불가!<br/>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;✖ 차단!<br/>
                  🖥️ 2반 서버 (192.168.2.10) ← 도달 못 함
                </div>
                <p className="mt-3 text-sm text-gray-500">
                  💡 같은 서브넷 안의 컴퓨터끼리는 라우터를 거치지 않고 직접 통신해요.
                  다른 서브넷으로 가려면 무조건 라우터를 통과해야 하기 때문에, 라우터가 <strong>유일한 출입구</strong>가 되는 거예요.
                </p>
              </div>

              {/* ④ /숫자의 의미 */}
              <div className="bg-purple-50 border border-purple-200 rounded-xl p-5 mb-5 text-base text-gray-700 leading-relaxed">
                <div className="font-bold text-purple-800 text-lg mb-2">✂️ /숫자는 무슨 뜻이에요? (CIDR 표기법)</div>
                <p className="mb-3">
                  IP 주소 32비트 중에서 <strong>앞 몇 비트를 "동 번호(네트워크)"로 쓸지</strong> 결정해요.
                  숫자가 클수록 네트워크가 작아지고, 연결 가능한 기기 수도 줄어요.
                </p>
                <div className="overflow-x-auto">
                  <table className="w-full text-sm text-center border-collapse">
                    <thead>
                      <tr className="bg-purple-100 text-purple-800">
                        <th className="p-2 rounded-tl-lg">CIDR</th>
                        <th className="p-2">서브넷 마스크</th>
                        <th className="p-2">네트워크 (동 번호)</th>
                        <th className="p-2">기기 번호 (호수)</th>
                        <th className="p-2 rounded-tr-lg">연결 가능 기기 수</th>
                      </tr>
                    </thead>
                    <tbody className="text-gray-700">
                      <tr className="border-t border-purple-100"><td className="p-2 font-mono font-bold">/8</td><td className="p-2 font-mono text-sm">255.0.0.0</td><td className="p-2">8비트 고정</td><td className="p-2">24비트 자유</td><td className="p-2 font-bold text-green-700">약 1,600만 대</td></tr>
                      <tr className="border-t border-purple-100"><td className="p-2 font-mono font-bold">/16</td><td className="p-2 font-mono text-sm">255.255.0.0</td><td className="p-2">16비트 고정</td><td className="p-2">16비트 자유</td><td className="p-2 font-bold text-green-700">약 65,000 대</td></tr>
                      <tr className="border-t border-purple-100 bg-purple-50"><td className="p-2 font-mono font-bold">/24</td><td className="p-2 font-mono text-sm">255.255.255.0</td><td className="p-2">24비트 고정</td><td className="p-2">8비트 자유</td><td className="p-2 font-bold text-blue-700">254 대 ← 가정용</td></tr>
                      <tr className="border-t border-purple-100"><td className="p-2 font-mono font-bold">/32</td><td className="p-2 font-mono text-sm">255.255.255.255</td><td className="p-2">32비트 전부 고정</td><td className="p-2">없음</td><td className="p-2 font-bold text-red-600">1 대 (딱 한 컴퓨터)</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>

              {/* ⑤ 계산기 */}
              <div className="bg-white border-2 border-purple-200 rounded-xl p-5 mb-5">
                <div className="font-bold text-purple-800 text-lg mb-4">🧮 직접 계산해보기 — 슬라이더를 움직여보세요!</div>

                {/* IP 입력 */}
                <div className="mb-4">
                  <p className="text-base font-bold text-gray-700 mb-2">📍 IP 주소 입력</p>
                  <div className="flex items-center gap-1 flex-wrap">
                    {[0,1,2,3].map(idx => (
                      <React.Fragment key={idx}>
                        <div className="flex flex-col items-center gap-1">
                          <span className="text-xs text-gray-400">{idx+1}번째</span>
                          <input
                            type="number" min="0" max="255"
                            value={subnetOctets[idx]}
                            onChange={e => handleSubnetOctet(idx, e.target.value)}
                            className={`w-16 h-12 text-center text-lg font-bold border-2 rounded-xl focus:outline-none font-mono
                              ${subnetOctetErrors[idx] ? 'border-red-400 bg-red-50 text-red-600' : 'border-purple-300 text-purple-700 bg-white focus:border-purple-500'}`}
                            style={{MozAppearance:'textfield'}}
                          />
                          {subnetOctetErrors[idx] && <span className="text-xs text-red-500">{subnetOctetErrors[idx]}</span>}
                        </div>
                        {idx < 3 && <span className="text-2xl font-bold text-gray-400 mt-4">.</span>}
                      </React.Fragment>
                    ))}
                  </div>
                </div>

                {/* CIDR 슬라이더 */}
                <div className="mb-5">
                  <div className="flex items-center gap-3 mb-2 flex-wrap">
                    <span className="text-base text-gray-700 font-bold">구역 크기:</span>
                    <span className="font-bold text-purple-700 text-lg font-mono">/</span>
                    <input
                      type="number" min="1" max="32" value={subnetCidr}
                      onChange={e => setSubnetCidr(Math.max(1, Math.min(32, Number(e.target.value) || 1)))}
                      className="w-16 h-10 text-center text-lg font-bold border-2 border-purple-300 rounded-xl focus:border-purple-500 focus:outline-none font-mono"
                      style={{MozAppearance:'textfield'}}
                    />
                    <span className="text-sm text-gray-400">← 이 숫자가 클수록 구역이 좁아져요</span>
                  </div>
                  <input
                    type="range" min="1" max="32" value={subnetCidr}
                    onChange={e => setSubnetCidr(Number(e.target.value))}
                    className="w-full mb-1"
                    style={{accentColor:'#7c3aed'}}
                  />
                  <div className="flex justify-between text-sm text-gray-400">
                    <span>/1 (매우 큰 구역)</span><span>/8</span><span>/16</span><span>/24</span><span>/32 (딱 1대)</span>
                  </div>
                </div>

                {/* 32비트 비트 시각화 */}
                <div className="mb-5 bg-gray-50 rounded-xl p-4 border border-gray-200">
                  <p className="text-sm font-bold text-gray-600 mb-2">🔬 32비트 시각화 — 슬라이더를 움직이면 색이 바뀌어요!</p>
                  <div className="flex flex-wrap gap-1 mb-2">
                    {Array.from({length: 32}, (_, pos) => {
                      const isNet = pos < subnetCidr;
                      const oct = Math.floor(pos / 8);
                      const elements = [];
                      if (pos > 0 && pos % 8 === 0) elements.push(<div key={`sep${oct}`} className="w-2" />);
                      elements.push(
                        <div key={pos}
                          title={isNet ? `네트워크 비트 (${pos+1}번째)` : `기기 번호 비트 (${pos+1}번째)`}
                          className={`w-6 h-6 rounded text-xs flex items-center justify-center font-bold font-mono
                            ${isNet ? 'bg-purple-200 text-purple-800' : 'bg-orange-100 text-orange-700'}`}
                        >
                          {isNet ? '1' : '0'}
                        </div>
                      );
                      return elements;
                    })}
                  </div>
                  <div className="flex gap-4 text-xs">
                    <span className="flex items-center gap-1">
                      <span className="inline-block w-4 h-4 rounded bg-purple-200 border border-purple-400"></span>
                      <span className="text-purple-800 font-bold">네트워크 비트 (동 번호 — 고정)</span>
                    </span>
                    <span className="flex items-center gap-1">
                      <span className="inline-block w-4 h-4 rounded bg-orange-100 border border-orange-300"></span>
                      <span className="text-orange-700 font-bold">기기 번호 비트 (호수 — 자유)</span>
                    </span>
                  </div>
                </div>

                {/* 결과 카드 */}
                <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                  {[
                    { label: '서브넷 마스크',    value: subnetInfo.mask,      color: 'text-gray-800',   bg: 'bg-gray-50',   border: 'border-gray-200',  desc: '네트워크를 구분하는 기준값' },
                    { label: '네트워크 주소',     value: subnetInfo.network,   color: 'text-blue-700',   bg: 'bg-blue-50',   border: 'border-blue-200',  desc: '이 구역(서브넷)의 이름' },
                    { label: '브로드캐스트 주소', value: subnetInfo.broadcast, color: 'text-red-600',    bg: 'bg-red-50',    border: 'border-red-200',   desc: '구역 전체에 동시 전송하는 주소' },
                    { label: '첫 번째 기기 IP',   value: subnetInfo.firstHost, color: 'text-indigo-700', bg: 'bg-indigo-50', border: 'border-indigo-200', desc: '기기에 줄 수 있는 첫 번째 IP' },
                    { label: '마지막 기기 IP',    value: subnetInfo.lastHost,  color: 'text-indigo-700', bg: 'bg-indigo-50', border: 'border-indigo-200', desc: '기기에 줄 수 있는 마지막 IP' },
                    { label: '연결 가능한 기기 수', value: subnetInfo.hosts,   color: 'text-green-700',  bg: 'bg-green-50',  border: 'border-green-200', desc: '실제로 사용할 수 있는 IP 개수' },
                  ].map(card => (
                    <div key={card.label} className={`${card.bg} rounded-xl p-3 border ${card.border}`}>
                      <div className="text-xs text-gray-500 mb-1">{card.label}</div>
                      <div className={`font-mono font-bold text-base ${card.color}`}>{card.value}</div>
                      <div className="text-xs text-gray-400 mt-1">{card.desc}</div>
                    </div>
                  ))}
                </div>

                {/* 요약 */}
                <div className="mt-4 bg-yellow-50 rounded-xl p-4 border border-yellow-200 text-sm text-gray-700 leading-relaxed">
                  💡 <strong>{subnetOctets.join('.')}/{subnetCidr}</strong> 네트워크에서는 최대{' '}
                  <strong className="text-green-700">{subnetInfo.hosts}</strong>의 기기를 연결할 수 있어요.
                  네트워크 주소 <strong className="text-blue-700">{subnetInfo.network}</strong>와
                  브로드캐스트 주소 <strong className="text-red-600">{subnetInfo.broadcast}</strong>는 기기에 줄 수 없어요.
                </div>
              </div>

              {/* ⑥ 서브넷 시각화 */}
              <div className="bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
                <h3 className="font-bold text-gray-800 text-lg mb-4">🗂️ 서브넷으로 나누면 이렇게 돼요!</h3>
                <div className="flex flex-wrap justify-center gap-3 mb-4">
                  {[
                    { name: '1학년 네트워크',  range: '192.168.1.0/24', color: 'bg-blue-100 border-blue-400',   text: 'text-blue-700',   hosts: 254 },
                    { name: '2학년 네트워크',  range: '192.168.2.0/24', color: 'bg-green-100 border-green-400', text: 'text-green-700',  hosts: 254 },
                    { name: '교무실 네트워크', range: '192.168.3.0/24', color: 'bg-orange-100 border-orange-400',text: 'text-orange-700', hosts: 254 },
                    { name: '행정실 네트워크', range: '192.168.4.0/24', color: 'bg-purple-100 border-purple-400',text: 'text-purple-700', hosts: 254 },
                  ].map(item => (
                    <div key={item.name} className={`${item.color} border-2 rounded-xl p-4 w-44 text-center`}>
                      <div className="text-2xl mb-2">🏫</div>
                      <div className={`font-bold text-base ${item.text}`}>{item.name}</div>
                      <div className="font-mono text-sm text-gray-600 mt-1">{item.range}</div>
                      <div className={`font-bold text-sm mt-1 ${item.text}`}>최대 {item.hosts}대</div>
                    </div>
                  ))}
                </div>
                <div className="bg-yellow-50 p-3 rounded-lg border border-yellow-300 text-base text-center text-gray-800">
                  💡 서브넷 마스크로 네트워크를 나누면 <strong>학년별, 부서별로 네트워크를 분리</strong>해서 보안과 관리가 편해져요!
                </div>
              </div>

            </div>
          )}

          {/* 게이트웨이 탭 */}
          {activeTab === 'gateway' && (
            <div className="p-8 animate-slide-in">
              {/* 개념 설명 */}
              <div className="bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg border border-indigo-300 mb-6">
                <h3 className="font-bold text-indigo-900 text-lg mb-2">🚪 게이트웨이가 뭔가요?</h3>
                <p className="text-gray-800 leading-relaxed mb-3">
                  <span className="font-bold text-indigo-600">게이트웨이(Gateway)</span>는 영어로 <span className="font-bold">"문(Gate) + 길(Way)"</span>이에요.<br/>
                  서로 다른 네트워크를 연결해주는 <span className="font-bold text-orange-600">입구 역할</span>을 하는 장치예요.<br/>
                  마치 <span className="font-bold text-green-600">다른 나라로 가려면 공항을 통과해야 하는 것</span>처럼, 다른 네트워크로 가려면 게이트웨이를 통과해야 해요!
                </p>
                <div className="bg-white p-4 rounded-lg border border-indigo-200">
                  <div className="grid md:grid-cols-3 gap-3 text-center text-base">
                    <div className="p-3 bg-indigo-50 rounded border border-indigo-200">
                      <div className="text-3xl mb-1">✈️</div>
                      <div className="font-bold text-indigo-700">공항 = 게이트웨이</div>
                      <div className="text-gray-600 text-sm">다른 나라(네트워크)로 가는 관문</div>
                    </div>
                    <div className="p-3 bg-indigo-50 rounded border border-indigo-200">
                      <div className="text-3xl mb-1">🇰🇷</div>
                      <div className="font-bold text-indigo-700">한국 = 내 네트워크</div>
                      <div className="text-gray-600 text-sm">192.168.1.x</div>
                    </div>
                    <div className="p-3 bg-indigo-50 rounded border border-indigo-200">
                      <div className="text-3xl mb-1">🌍</div>
                      <div className="font-bold text-indigo-700">해외 = 다른 네트워크</div>
                      <div className="text-gray-600 text-sm">인터넷 / 다른 서브넷</div>
                    </div>
                  </div>
                </div>
              </div>

              {/* 패킷 전송 체험 */}
              <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-lg mb-6">
                <h3 className="font-bold text-gray-800 text-lg mb-2 text-center">📦 패킷 전송 체험!</h3>
                <p className="text-center text-base text-gray-600 mb-5">아래 기기를 클릭해서 다른 기기로 데이터를 보내보세요!</p>

                {/* 두 네트워크 시각화 */}
                <div className="grid md:grid-cols-5 gap-2 items-center mb-6">
                  {/* A반 네트워크 */}
                  <div className="md:col-span-2 bg-blue-50 rounded-xl border-2 border-blue-300 p-4">
                    <div className="text-center font-bold text-blue-700 mb-3">🏫 A반 네트워크<br/><span className="font-mono text-sm">192.168.1.x</span></div>
                    <div className="space-y-2">
                      {[
                        { name: '💻 선생님PC', ip: '192.168.1.1' },
                        { name: '🖥️ 학생1', ip: '192.168.1.10' },
                        { name: '📱 학생2', ip: '192.168.1.11' },
                      ].map(dev => (
                        <button
                          key={dev.ip}
                          onClick={() => !gwAnimating && setGwPacketFrom(gwPacketFrom === dev.ip ? '' : dev.ip)}
                          className={`w-full p-2 rounded-lg border-2 transition-all text-base ${
                            gwPacketFrom === dev.ip
                              ? 'bg-blue-500 text-white border-blue-700 shadow-lg'
                              : 'bg-white border-blue-200 hover:border-blue-500'
                          }`}
                        >
                          <span>{dev.name}</span>
                          <span className="font-mono text-sm block">{dev.ip}</span>
                        </button>
                      ))}
                    </div>
                  </div>

                  {/* 게이트웨이 */}
                  <div className="flex flex-col items-center gap-2">
                    <div className={`transition-all duration-500 ${gwStep >= 2 && gwStep <= 3 ? 'scale-125' : ''}`}>
                      <div className={`rounded-xl border-4 p-3 text-center ${gwStep >= 2 && gwStep <= 3 ? 'bg-yellow-200 border-yellow-500' : 'bg-gray-100 border-gray-300'}`}>
                        <div className="text-3xl">📡</div>
                        <div className="text-sm font-bold text-gray-800 mt-1">게이트웨이</div>
                        <div className="text-sm text-gray-500 font-mono">라우터</div>
                        {gwStep >= 2 && gwStep <= 3 && (
                          <div className="text-sm text-yellow-700 font-bold mt-1 animate-pulse">변환 중!</div>
                        )}
                      </div>
                    </div>
                    {gwPacketFrom && gwPacketTo && !gwAnimating && (
                      <button
                        onClick={() => startGateway(gwPacketFrom, gwPacketTo)}
                        className="bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm px-3 py-1 rounded-full font-bold hover:shadow-lg transition-all"
                      >
                        📤 전송!
                      </button>
                    )}
                    {(!gwPacketFrom || !gwPacketTo) && (
                      <div className="text-sm text-gray-400 text-center">양쪽에서<br/>기기 선택</div>
                    )}
                  </div>

                  {/* B반 네트워크 */}
                  <div className="md:col-span-2 bg-purple-50 rounded-xl border-2 border-purple-300 p-4">
                    <div className="text-center font-bold text-purple-700 mb-3">🏫 B반 네트워크<br/><span className="font-mono text-sm">192.168.2.x</span></div>
                    <div className="space-y-2">
                      {[
                        { name: '💻 선생님PC', ip: '192.168.2.1' },
                        { name: '🖥️ 학생3', ip: '192.168.2.10' },
                        { name: '📱 학생4', ip: '192.168.2.11' },
                      ].map(dev => (
                        <button
                          key={dev.ip}
                          onClick={() => !gwAnimating && setGwPacketTo(gwPacketTo === dev.ip ? '' : dev.ip)}
                          className={`w-full p-2 rounded-lg border-2 transition-all text-base ${
                            gwPacketTo === dev.ip
                              ? 'bg-purple-500 text-white border-purple-700 shadow-lg'
                              : 'bg-white border-purple-200 hover:border-purple-500'
                          }`}
                        >
                          <span>{dev.name}</span>
                          <span className="font-mono text-sm block">{dev.ip}</span>
                        </button>
                      ))}
                    </div>
                  </div>
                </div>

                {/* 전송 과정 설명 */}
                {gwAnimating && (
                  <div className="bg-indigo-50 rounded-xl p-4 border border-indigo-200 animate-slide-in">
                    <div className="flex items-center gap-3">
                      <div className="w-9 h-9 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold text-lg">{gwStep}</div>
                      <div>
                        {gwStep === 0 && <p className="font-bold text-indigo-800">📦 <span className="font-mono">{gwPacketFrom}</span>에서 데이터를 보냅니다!</p>}
                        {gwStep === 1 && <p className="font-bold text-blue-800">➡️ 목적지가 다른 네트워크인지 확인 중... <span className="font-mono text-red-600">{gwPacketTo}</span>는 다른 네트워크!</p>}
                        {gwStep === 2 && <p className="font-bold text-yellow-700">📡 게이트웨이(라우터)에 데이터 전달 중...</p>}
                        {gwStep === 3 && <p className="font-bold text-orange-700">🔀 게이트웨이가 최적 경로를 찾아 전달합니다!</p>}
                        {gwStep >= 4 && <p className="font-bold text-green-700">✅ <span className="font-mono">{gwPacketTo}</span>에 데이터가 도착했어요! 🎉</p>}
                      </div>
                    </div>
                    <div className="w-full bg-gray-200 rounded-full h-2 mt-3">
                      <div
                        className="bg-gradient-to-r from-indigo-500 to-purple-500 h-2 rounded-full transition-all duration-700"
                        style={{ width: `${Math.min(gwStep * 25, 100)}%` }}
                      />
                    </div>
                  </div>
                )}
                {!gwAnimating && gwStep >= 4 && (
                  <div className="bg-green-50 rounded-xl p-4 border border-green-300 text-center">
                    <p className="text-green-700 font-bold text-lg">🎉 전송 완료!</p>
                    <p className="text-base text-gray-600 mt-1"><span className="font-mono">{gwPacketFrom}</span> → 게이트웨이 → <span className="font-mono">{gwPacketTo}</span></p>
                    <button
                      onClick={() => { setGwPacketFrom(''); setGwPacketTo(''); setGwStep(0); }}
                      className="mt-3 bg-green-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-green-700 transition-all text-base"
                    >
                      다시 해보기
                    </button>
                  </div>
                )}
              </div>

              {/* 기본 게이트웨이 확인 방법 */}
              <div className="bg-gradient-to-r from-gray-50 to-slate-50 p-6 rounded-lg border border-gray-300 mb-6">
                <h3 className="font-bold text-gray-800 text-lg mb-4">💻 내 게이트웨이 주소 확인하는 방법</h3>
                <div className="grid md:grid-cols-2 gap-4">
                  <div className="bg-black text-green-400 p-4 rounded-lg font-mono text-base">
                    <p className="text-gray-400 mb-2"># 윈도우 명령 프롬프트(CMD)</p>
                    <p>C:\&gt; <span className="text-white">ipconfig</span></p>
                    <p className="mt-2 text-yellow-300">기본 게이트웨이: 192.168.1.1</p>
                    <p className="text-yellow-300">서브넷 마스크: 255.255.255.0</p>
                    <p className="text-yellow-300">IPv4 주소: 192.168.1.5</p>
                  </div>
                  <div className="bg-white p-4 rounded-lg border border-gray-200">
                    <p className="font-bold text-gray-800 mb-3">📋 ipconfig 결과 해석</p>
                    <div className="space-y-2 text-base">
                      <div className="flex gap-2">
                        <span className="text-yellow-600 font-bold w-20 shrink-0">IPv4 주소</span>
                        <span className="text-gray-800">= 내 컴퓨터의 IP 주소</span>
                      </div>
                      <div className="flex gap-2">
                        <span className="text-yellow-600 font-bold w-20 shrink-0">서브넷 마스크</span>
                        <span className="text-gray-800">= 네트워크 구분 기준</span>
                      </div>
                      <div className="flex gap-2">
                        <span className="text-yellow-600 font-bold w-20 shrink-0">기본 게이트웨이</span>
                        <span className="text-gray-800">= 인터넷으로 나가는 출구 (보통 공유기 주소)</span>
                      </div>
                    </div>
                    <div className="mt-3 bg-blue-50 p-2 rounded border border-blue-200 text-sm text-blue-700">
                      💡 보통 게이트웨이 주소는 <strong>192.168.x.1</strong>이에요!
                    </div>
                  </div>
                </div>
              </div>

              {/* 라우터 vs 게이트웨이 비교 */}
              <div className="bg-gradient-to-r from-sky-50 to-indigo-50 p-6 rounded-xl border border-sky-300">
                <h3 className="font-bold text-sky-900 text-lg mb-2">🤔 라우터(Router)와 게이트웨이(Gateway)는 다른 건가요?</h3>
                <p className="text-gray-700 text-base mb-5 leading-relaxed">
                  많이 헷갈리는 개념이에요! 한마디로 정리하면 —
                  <span className="font-bold text-orange-600"> 게이트웨이는 역할</span>이고,
                  <span className="font-bold text-blue-600"> 라우터는 장치</span>예요.
                  마치 <strong>"경비원"</strong>이 역할이고 <strong>"아저씨"</strong>가 그 일을 하는 사람인 것처럼요.
                </p>

                {/* 핵심 비교 카드 */}
                <div className="grid md:grid-cols-2 gap-4 mb-5">
                  <div className="bg-white rounded-xl border-2 border-blue-300 p-5">
                    <div className="flex items-center gap-3 mb-3">
                      <span className="text-4xl">📡</span>
                      <div>
                        <div className="font-bold text-blue-800 text-lg">라우터 (Router)</div>
                        <div className="text-sm text-blue-500">= 장치 (Hardware)</div>
                      </div>
                    </div>
                    <ul className="space-y-2 text-base text-gray-700">
                      <li className="flex items-start gap-2"><span className="text-blue-500 mt-0.5">▸</span><span>네트워크와 네트워크 사이에서 <strong>데이터를 어느 길로 보낼지 결정</strong>하는 장치예요.</span></li>
                      <li className="flex items-start gap-2"><span className="text-blue-500 mt-0.5">▸</span><span>집에 있는 <strong>공유기(Wi-Fi 기계)</strong>가 대표적인 라우터예요.</span></li>
                      <li className="flex items-start gap-2"><span className="text-blue-500 mt-0.5">▸</span><span>여러 길(경로) 중에서 가장 빠른 길을 골라줘요.</span></li>
                    </ul>
                  </div>

                  <div className="bg-white rounded-xl border-2 border-orange-300 p-5">
                    <div className="flex items-center gap-3 mb-3">
                      <span className="text-4xl">🚪</span>
                      <div>
                        <div className="font-bold text-orange-800 text-lg">게이트웨이 (Gateway)</div>
                        <div className="text-sm text-orange-500">= 역할 (Role)</div>
                      </div>
                    </div>
                    <ul className="space-y-2 text-base text-gray-700">
                      <li className="flex items-start gap-2"><span className="text-orange-500 mt-0.5">▸</span><span>서로 다른 네트워크를 연결해주는 <strong>"출입구 역할"</strong>을 뜻하는 말이에요.</span></li>
                      <li className="flex items-start gap-2"><span className="text-orange-500 mt-0.5">▸</span><span>라우터가 게이트웨이 역할을 하는 경우가 가장 많아요.</span></li>
                      <li className="flex items-start gap-2"><span className="text-orange-500 mt-0.5">▸</span><span>라우터 외에도 <strong>방화벽, 스위치</strong> 등이 게이트웨이 역할을 할 수 있어요.</span></li>
                    </ul>
                  </div>
                </div>

                {/* 비유 설명 */}
                <div className="bg-white rounded-xl p-5 border border-sky-200 mb-5">
                  <p className="font-bold text-gray-800 mb-3">🏫 학교로 비유해볼게요!</p>
                  <div className="grid md:grid-cols-3 gap-3 text-center text-sm">
                    <div className="bg-blue-50 rounded-lg p-3 border border-blue-200">
                      <div className="text-3xl mb-2">🧑‍✈️</div>
                      <div className="font-bold text-blue-700 mb-1">경비 아저씨</div>
                      <div className="text-gray-600">= 라우터<br/>(실제로 일하는 장치)</div>
                    </div>
                    <div className="bg-orange-50 rounded-lg p-3 border border-orange-200">
                      <div className="text-3xl mb-2">🚪</div>
                      <div className="font-bold text-orange-700 mb-1">교문 경비 역할</div>
                      <div className="text-gray-600">= 게이트웨이<br/>(출입을 관리하는 역할)</div>
                    </div>
                    <div className="bg-green-50 rounded-lg p-3 border border-green-200">
                      <div className="text-3xl mb-2">💡</div>
                      <div className="font-bold text-green-700 mb-1">결론</div>
                      <div className="text-gray-600">경비 아저씨가<br/>교문 역할을 한다<br/>= 라우터가 게이트웨이</div>
                    </div>
                  </div>
                </div>

                {/* 비교표 */}
                <div className="overflow-x-auto">
                  <table className="w-full text-sm text-center border-collapse bg-white rounded-xl overflow-hidden">
                    <thead>
                      <tr className="bg-gradient-to-r from-sky-500 to-indigo-500 text-white">
                        <th className="p-3">구분</th>
                        <th className="p-3">📡 라우터</th>
                        <th className="p-3">🚪 게이트웨이</th>
                      </tr>
                    </thead>
                    <tbody className="text-gray-700">
                      <tr className="border-t border-gray-100">
                        <td className="p-3 font-bold text-gray-600 bg-gray-50">개념</td>
                        <td className="p-3">물리적인 <strong>장치</strong></td>
                        <td className="p-3">네트워크의 <strong>출입구 역할</strong></td>
                      </tr>
                      <tr className="border-t border-gray-100">
                        <td className="p-3 font-bold text-gray-600 bg-gray-50">주요 기능</td>
                        <td className="p-3">데이터를 목적지까지<br/>최적 경로로 전달</td>
                        <td className="p-3">다른 네트워크로<br/>나가는 입구 제공</td>
                      </tr>
                      <tr className="border-t border-gray-100">
                        <td className="p-3 font-bold text-gray-600 bg-gray-50">실생활 예</td>
                        <td className="p-3">집에 있는 공유기</td>
                        <td className="p-3">공유기의 역할(기능)</td>
                      </tr>
                      <tr className="border-t border-gray-100">
                        <td className="p-3 font-bold text-gray-600 bg-gray-50">관계</td>
                        <td className="p-3 text-blue-600 font-bold" colSpan="2">라우터가 게이트웨이 역할을 하는 경우가 대부분! 🤝</td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <div className="mt-4 bg-yellow-50 rounded-xl p-4 border border-yellow-200 text-sm text-gray-700 text-center leading-relaxed">
                  ⭐ <strong>핵심 정리:</strong> 우리가 일상에서 쓰는 <strong>공유기 = 라우터 = 게이트웨이</strong>!
                  공유기 한 대가 이 세 가지 역할을 모두 하고 있어요. 그래서 실제로는 거의 같은 말처럼 쓰여요.
                </div>
              </div>
            </div>
          )}

          {/* 퀴즈 탭 */}
          {activeTab === 'quiz' && (
            <div className="p-8 animate-slide-in">
              <div className="bg-gradient-to-r from-purple-50 to-pink-50 p-5 rounded-lg border border-purple-200 mb-6">
                <h3 className="text-lg font-bold text-purple-900 mb-1">🎯 배운 내용 확인하기</h3>
                <p className="text-base text-gray-800">지금까지 배운 내용을 문제로 풀어봅시다!</p>
              </div>

              {!showQuizResult ? (
                <div className="space-y-6">
                  {quizData.map((quiz, qIdx) => (
                    <div key={quiz.id} className="bg-white p-5 rounded-lg border border-gray-200 shadow-sm">
                      {quiz.tag && (
                        <span className="inline-block bg-cyan-100 text-cyan-700 text-sm font-bold px-2 py-1 rounded mb-3">{quiz.tag}</span>
                      )}
                      <h4 className="font-bold text-base text-gray-800 mb-4">
                        Q{qIdx + 1}. {quiz.question}
                      </h4>
                      <div className="space-y-2">
                        {quiz.options.map((option, oIdx) => {
                          const answered = quizAnswers[quiz.id] !== undefined;
                          const isSelected = quizAnswers[quiz.id] === oIdx;
                          const isCorrect = quiz.correct === oIdx;
                          let cls = 'bg-gray-50 border-gray-200 hover:bg-cyan-50 hover:border-cyan-400';
                          if (answered) {
                            if (isCorrect) cls = 'bg-green-100 border-green-400';
                            else if (isSelected) cls = 'bg-red-100 border-red-400';
                            else cls = 'bg-gray-50 border-gray-200';
                          }
                          return (
                            <button
                              key={oIdx}
                              onClick={() => handleQuizAnswer(quiz.id, oIdx)}
                              disabled={answered}
                              className={`w-full text-left p-3 rounded-lg border-2 transition-all text-base ${cls} ${answered ? 'cursor-not-allowed' : 'cursor-pointer'}`}
                            >
                              {oIdx + 1}. {option}
                              {answered && isCorrect && <span className="ml-2 text-green-600 font-bold">✓ 정답</span>}
                              {answered && isSelected && !isCorrect && <span className="ml-2 text-red-600 font-bold">✗</span>}
                            </button>
                          );
                        })}
                      </div>
                      {quizAnswers[quiz.id] !== undefined && (
                        <div className="mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200">
                          <p className="text-base text-gray-800">
                            <span className="font-bold text-blue-600">설명: </span>{quiz.explanation}
                          </p>
                        </div>
                      )}
                    </div>
                  ))}

                  {Object.keys(quizAnswers).length === quizData.length && (
                    <button
                      onClick={() => setShowQuizResult(true)}
                      className="w-full py-4 bg-gradient-to-r from-cyan-600 to-blue-600 text-white font-bold rounded-lg hover:from-cyan-700 hover:to-blue-700 transition-all shadow-lg text-base"
                    >
                      🏁 결과 확인하기
                    </button>
                  )}
                </div>
              ) : (
                <div className="text-center">
                  <div className="bg-gradient-to-r from-green-50 to-emerald-50 p-8 rounded-lg border border-green-200 mb-6">
                    <h3 className="text-2xl font-bold text-green-900 mb-4">
                      <span
                        className="cursor-pointer relative inline-block"
                        onClick={() => { setShowTooltip(true); setTimeout(() => setShowTooltip(false), 500); }}
                      >
                        🎉
                        {showTooltip && (
                          <span className="absolute -top-10 left-1/2 -translate-x-1/2 bg-yellow-400 text-gray-900 px-3 py-1 rounded-xl text-sm font-bold whitespace-nowrap shadow-2xl z-50">
                            {"\uCC38\uC0C8"}
                          </span>
                        )}
                      </span>
                      {' '}퀴즈 완료!
                    </h3>
                    <div className="text-6xl font-bold text-cyan-600 mb-4">
                      {calculateScore()} / {quizData.length}
                    </div>
                    <p className="text-base text-gray-800">
                      {calculateScore() === quizData.length
                        ? '완벽해요! 모든 문제를 맞히셨네요! 🎊'
                        : calculateScore() >= Math.ceil(quizData.length * 0.7)
                        ? '잘하셨어요! 조금만 더 복습하면 완벽할 거예요! 👍'
                        : '다시 한 번 복습해보세요! 💪'}
                    </p>
                  </div>
                  <div className="text-left space-y-3 mb-6">
                    {quizData.filter(q => quizAnswers[q.id] !== q.correct).map(q => (
                      <div key={q.id} className="bg-red-50 p-4 rounded-lg border border-red-200">
                        <p className="font-bold text-red-700 text-base mb-1">❌ 틀린 문제: {q.question}</p>
                        <p className="text-base text-gray-800">
                          <span className="font-bold text-green-600">정답: </span>{q.options[q.correct]}
                        </p>
                        <p className="text-base text-gray-600 mt-1">{q.explanation}</p>
                      </div>
                    ))}
                  </div>
                  <button
                    onClick={resetQuiz}
                    className="px-8 py-4 bg-gradient-to-r from-cyan-600 to-blue-600 text-white font-bold rounded-lg hover:from-cyan-700 hover:to-blue-700 transition-all shadow-lg text-base"
                  >
                    🔄 다시 풀기
                  </button>
                </div>
              )}

            </div>
          )}

          {/* 공통 홈으로 돌아가기 버튼 - 모든 탭 하단에 표시 */}
          <div className="px-8 pb-8 text-center border-t border-gray-100 pt-6 mt-2">
            <a
              href="index.html"
              className="inline-block bg-gradient-to-r from-cyan-600 to-blue-600 text-white px-8 py-3 rounded-lg font-bold text-base hover:from-cyan-700 hover:to-blue-700 transition-all shadow-lg hover:shadow-xl"
            >
              🏠 홈으로 돌아가기
            </a>
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<IPEducation />);
  </script>
</body>
</html>
